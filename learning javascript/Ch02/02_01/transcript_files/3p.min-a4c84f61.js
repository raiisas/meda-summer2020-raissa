!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Z.type(e);return"function"!==n&&!Z.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function r(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ae.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return U.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=he[e]={};return Z.each(e.match(de)||[],function(e,n){t[n]=!0}),t}function s(){J.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+a.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(be,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:xe.test(n)?Z.parseJSON(n):n)}catch(i){}ye.set(e,t,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function f(){try{return J.activeElement}catch(e){}}function p(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Pe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;n<r;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function m(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(ve.hasData(e)&&(o=ve.access(e),s=ve.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)Z.event.add(t,i,l[i][n])}ye.hasData(e)&&(a=ye.access(e),u=Z.extend({},a),ye.set(t,u))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ne.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function x(t,n){var r,i=Z(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function b(e){var t=J,n=$e[e];return n||(n=x(e,t),"none"!==n&&n||(We=(We||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=We[0].contentDocument,t.write(),t.close(),n=x(e,t),We.detach()),$e[e]=n),n}function w(e,t,n){var r,i,o,s,a=e.style;return n=n||_e(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),Be.test(s)&&Ie.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Ge.length;i--;)if(t=Ge[i]+n,t in e)return t;return r}function N(e,t,n){var r=Xe.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function k(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=Z.css(e,n+Te[o],!0,i)),r?("content"===n&&(s-=Z.css(e,"padding"+Te[o],!0,i)),"margin"!==n&&(s-=Z.css(e,"border"+Te[o]+"Width",!0,i))):(s+=Z.css(e,"padding"+Te[o],!0,i),"padding"!==n&&(s+=Z.css(e,"border"+Te[o]+"Width",!0,i)));return s}function E(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=_e(e),s="border-box"===Z.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(i=w(e,t,o),(i<0||null==i)&&(i=e.style[t]),Be.test(i))return i;r=s&&(Q.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+k(e,t,n||(s?"border":"content"),r,o)+"px"}function S(e,t){for(var n,r,i,o=[],s=0,a=e.length;s<a;s++)r=e[s],r.style&&(o[s]=ve.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Ce(r)&&(o[s]=ve.access(r,"olddisplay",b(r.nodeName)))):(i=Ce(r),"none"===n&&i||ve.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(s=0;s<a;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function D(e,t,n,r,i){return new D.prototype.init(e,t,n,r,i)}function j(){return setTimeout(function(){Qe=void 0}),Qe=Z.now()}function A(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Te[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function L(e,t,n){for(var r,i=(nt[t]||[]).concat(nt["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function q(e,t,n){var r,i,o,s,a,u,l,c,f=this,p={},d=e.style,h=e.nodeType&&Ce(e),g=ve.get(e,"fxshow");n.queue||(a=Z._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,Z.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=Z.css(e,"display"),c="none"===l?ve.get(e,"olddisplay")||b(e.nodeName):l,"inline"===c&&"none"===Z.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Ke.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;h=!0}p[r]=g&&g[r]||Z.style(e,r)}else l=void 0;if(Z.isEmptyObject(p))"inline"===("none"===l?b(e.nodeName):l)&&(d.display=l);else{g?"hidden"in g&&(h=g.hidden):g=ve.access(e,"fxshow",{}),o&&(g.hidden=!h),h?Z(e).show():f.done(function(){Z(e).hide()}),f.done(function(){var t;ve.remove(e,"fxshow");for(t in p)Z.style(e,t,p[t])});for(r in p)s=L(h?g[r]:0,r,f),r in g||(g[r]=s.start,h&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function H(e,t){var n,r,i,o,s;for(n in e)if(r=Z.camelCase(n),i=t[r],o=e[n],Z.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=Z.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function O(e,t,n){var r,i,o=0,s=tt.length,a=Z.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Qe||j(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;s<u;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),o<1&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qe||j(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Z.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(H(c,l.opts.specialEasing);o<s;o++)if(r=tt[o].call(l,e,c,l.opts))return r;return Z.map(c,L,l),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(de)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function P(e,t,n,r){function i(a){var u;return o[a]=!0,Z.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===xt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function R(e,t){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Z.extend(!0,e,r),e}function M(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}function W(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function $(e,t,n,r){var i;if(Z.isArray(t))Z.each(t,function(t,i){n||Nt.test(e)?r(e,i):$(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==Z.type(t))r(e,t);else for(i in t)$(e+"["+i+"]",t[i],n,r)}function I(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var B=[],_=B.slice,z=B.concat,X=B.push,U=B.indexOf,V={},Y=V.toString,G=V.hasOwnProperty,Q={},J=e.document,K="2.1.3",Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:K,constructor:Z,selector:"",length:0,toArray:function(){return _.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:_.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(_.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:B.sort,splice:B.splice},Z.extend=Z.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[t]=Z.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},Z.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"===Z.type(e)&&!e.nodeType&&!Z.isWindow(e)&&!(e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?V[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,s=e.length,a=n(e);if(r){if(a)for(;o<s&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(a)for(;o<s&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?Z.merge(r,"string"==typeof e?[e]:e):X.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:U.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;o<s;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,s=e.length,a=n(e),u=[];if(a)for(;o<s;o++)i=t(e[o],o,r),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&u.push(i);return z.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e))return r=_.call(arguments,2),i=function(){return e.apply(t||this,r.concat(_.call(arguments)))},i.guid=e.guid=e.guid||Z.guid++,i},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()});var ie=function(e){function t(e,t,n,r){var i,o,s,a,u,l,f,d,h,g;if((t?t.ownerDocument||t:$)!==q&&L(t),t=t||q,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!r&&O){if(11!==a&&(i=ye.exec(e)))if(s=i[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&M(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return K.apply(n,t.getElementsByTagName(e)),n;if((s=i[3])&&w.getElementsByClassName)return K.apply(n,t.getElementsByClassName(s)),n}if(w.qsa&&(!F||!F.test(e))){if(d=f=W,h=t,g=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=k(e),(f=t.getAttribute("id"))?d=f.replace(be,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+p(l[u]);h=xe.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return K.apply(n,h.querySelectorAll(g)),n}catch(m){}finally{f||t.removeAttribute("id")}}}return S(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[W]=!0,e}function i(e){var t=q.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)T.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function p(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=B++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l=[I,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[W]||(t[W]={}),(a=u[r])&&a[0]===I&&a[1]===o)return l[2]=a[2];if(u[r]=l,l[2]=e(t,n,s))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),l&&t.push(a)));return s}function v(e,t,n,i,o,s){return i&&!i[W]&&(i=v(i)),o&&!o[W]&&(o=v(o,s)),r(function(r,s,a,u){var l,c,f,p=[],d=[],h=s.length,v=r||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:m(v,p,e,a,u),x=n?o||(r?e:h||i)?[]:s:y;if(n&&n(y,x,a,u),i)for(l=m(x,d),i(l,[],a,u),c=l.length;c--;)(f=l[c])&&(x[d[c]]=!(y[d[c]]=f));if(r){if(o||e){if(o){for(l=[],c=x.length;c--;)(f=x[c])&&l.push(y[c]=f);o(null,x=[],l,u)}for(c=x.length;c--;)(f=x[c])&&(l=o?ee(r,f):p[c])>-1&&(r[l]=!(s[l]=f))}}else x=m(x===s?x.splice(h,x.length):x),o?o(null,s,x,u):K.apply(s,x)})}function y(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],s=o||T.relative[" "],a=o?1:0,u=d(function(e){return e===t},s,!0),l=d(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,r){var i=!o&&(r||n!==D)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];a<i;a++)if(n=T.relative[e[a].type])c=[d(h(c),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[W]){for(r=++a;r<i&&!T.relative[e[r].type];r++);return v(a>1&&h(c),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ue,"$1"),n,a<r&&y(e.slice(a,r)),r<i&&y(e=e.slice(r)),r<i&&p(e))}c.push(n)}return h(c)}function x(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,u,l){var c,f,p,d=0,h="0",g=r&&[],v=[],y=D,x=r||o&&T.find.TAG("*",l),b=I+=null==y?1:Math.random()||.1,w=x.length;for(l&&(D=s!==q&&s);h!==w&&null!=(c=x[h]);h++){if(o&&c){for(f=0;p=e[f++];)if(p(c,s,a)){u.push(c);break}l&&(I=b)}i&&((c=!p&&c)&&d--,r&&g.push(c))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(g,v,s,a);if(r){if(d>0)for(;h--;)g[h]||v[h]||(v[h]=Q.call(u));v=m(v)}K.apply(u,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&(I=b,D=y),g};return i?r(s):s}var b,w,T,C,N,k,E,S,D,j,A,L,q,H,O,F,P,R,M,W="sizzle"+1*new Date,$=e.document,I=0,B=0,_=n(),z=n(),X=n(),U=function(e,t){return e===t&&(A=!0),0},V=1<<31,Y={}.hasOwnProperty,G=[],Q=G.pop,J=G.push,K=G.push,Z=G.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",se=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),ue=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),fe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),pe=new RegExp(se),de=new RegExp("^"+ie+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Te=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ce=function(){L()};try{K.apply(G=Z.call($.childNodes),$.childNodes),G[$.childNodes.length].nodeType}catch(Ne){K={apply:G.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},N=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},L=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:$;return r!==q&&9===r.nodeType&&r.documentElement?(q=r,H=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),O=!N(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(r.getElementsByClassName),w.getById=i(function(e){return H.appendChild(e).id=W,!r.getElementsByName||!r.getElementsByName(W).length}),w.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){if(O)return t.getElementsByClassName(e)},P=[],F=[],(w.qsa=ve.test(r.querySelectorAll))&&(i(function(e){H.appendChild(e).innerHTML="<a id='"+W+"'></a><select id='"+W+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+W+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+W+"+*").length||F.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=ve.test(R=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&i(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),P.push("!=",se)}),F=F.length&&new RegExp(F.join("|")),P=P.length&&new RegExp(P.join("|")),t=ve.test(H.compareDocumentPosition),M=t||ve.test(H.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===$&&M($,e)?-1:t===r||t.ownerDocument===$&&M($,t)?1:j?ee(j,e)-ee(j,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,u=[e],l=[t];if(!o||!a)return e===r?-1:t===r?1:o?-1:a?1:j?ee(j,e)-ee(j,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?s(u[i],l[i]):u[i]===$?-1:l[i]===$?1:0},r):q},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==q&&L(e),n=n.replace(fe,"='$1']"),w.matchesSelector&&O&&(!P||!P.test(n))&&(!F||!F.test(n)))try{var r=R.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,q,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==q&&L(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==q&&L(e);var n=T.attrHandle[t.toLowerCase()],r=n&&Y.call(T.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,j=!w.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return j=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pe.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&y){for(c=m[W]||(m[W]={}),l=c[e]||[],d=l[0]===I&&l[1],p=l[0]===I&&l[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(p=d=0)||h.pop();)if(1===f.nodeType&&++p&&f===t){c[e]=[I,d,p];break}}else if(y&&(l=(t[W]||(t[W]={}))[e])&&l[0]===I)p=l[1];else for(;(f=++d&&f&&f[g]||(p=d=0)||h.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++p||(y&&((f[W]||(f[W]={}))[e]=[I,p]),f!==t)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[W]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=ee(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=E(e.replace(ue,"$1"));return i[W]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Te),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Te).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=u(b);return f.prototype=T.filters=T.pseudos,T.setFilters=new f,k=t.tokenize=function(e,n){var r,i,o,s,a,u,l,c=z[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=T.preFilter;a;){r&&!(i=le.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=ce.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),a=a.slice(r.length));for(s in T.filter)!(i=he[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):z(e,u).slice(0)},E=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=y(t[n]),o[W]?r.push(o):i.push(o);o=X(e,x(i,r)),o.selector=e}return o},S=t.select=function(e,t,n,r){var i,o,s,a,u,l="function"==typeof e&&e,f=!r&&k(e=l.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&O&&T.relative[o[1].type]){if(t=(T.find.ID(s.matches[0].replace(we,Te),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(s=o[i],!T.relative[a=s.type]);)if((u=T.find[a])&&(r=u(s.matches[0].replace(we,Te),xe.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return K.apply(n,r),n;break}}return(l||E(e,f))(r,t,!O,n,xe.test(e)&&c(t.parentNode)||t),n},w.sortStable=W.split("").sort(U).join("")===W,w.detectDuplicates=!!A,L(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(q.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Z.find=ie,Z.expr=ie.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=ie.uniqueSort,Z.text=ie.getText,Z.isXMLDoc=ie.isXML,Z.contains=ie.contains;var oe=Z.expr.match.needsContext,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Z.find.matchesSelector(r,e)?[r]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){
for(t=0;t<n;t++)if(Z.contains(i[t],this))return!0}));for(t=0;t<n;t++)Z.find(e,i[t],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&oe.test(e)?Z(e):e||[],!1).length}});var ue,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=Z.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ue).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),se.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof ue.ready?ue.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ce.prototype=Z.fn,ue=Z(J);var fe=/^(?:parents|prev(?:Until|All))/,pe={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Z(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=oe.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?U.call(Z(e),this[0]):U.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,r){var i=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(pe[e]||Z.unique(i),fe.test(e)&&i.reverse()),this.pushStack(i)}});var de=/\S+/g,he={};Z.Callbacks=function(e){e="string"==typeof e?he[e]||o(e):Z.extend({},e);var t,n,r,i,s,a,u=[],l=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=i||0,i=0,s=u.length,r=!0;u&&a<s;a++)if(u[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):t?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function o(t){Z.each(t,function(t,n){var r=Z.type(n);"function"===r?e.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?s=u.length:t&&(i=n,c(t))}return this},remove:function(){return u&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,u,n))>-1;)u.splice(n,1),r&&(n<=s&&s--,n<=a&&a--)}),this},has:function(e){return e?Z.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=l=t=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,t||f.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],r?l.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,o){var s=Z.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,r):r}},i={};return r.pipe=r.then,Z.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=_.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,u=1===a?e:Z.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?_.call(arguments):i,r===t?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);i<s;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--a;return a||u.resolveWith(r,o),u.promise()}});var ge;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(ge.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return ge||(ge=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),ge.promise(t)},Z.ready.promise();var me=Z.access=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===Z.type(n)){i=!0;for(a in n)Z.access(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(Z(e),n)})),t))for(;a<u;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?r=t.concat(t.map(Z.camelCase)):(i=Z.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(de)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new a,ye=new a,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;Z.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=ye.get(o),1===o.nodeType&&!ve.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),u(o,r,i[r])));ve.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ye.set(this,e)}):me(this,function(t){var n,r=Z.camelCase(e);if(o&&void 0===t){if(n=ye.get(o,e),void 0!==n)return n;if(n=ye.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,r);ye.set(this,r,t),e.indexOf("-")!==-1&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ve.get(e,t),n&&(!r||Z.isArray(n)?r=ve.access(e,t,Z.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),r=n.length,i=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:Z.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Z.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=ve.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Te=["Top","Right","Bottom","Left"],Ce=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Ne=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var ke="undefined";Q.focusinBubbles="onfocusin"in e;var Ee=/^key/,Se=/^(?:mouse|pointer|contextmenu)|click/,De=/^(?:focusinfocus|focusoutblur)$/,je=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=ve.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return typeof Z!==ke&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(de)||[""],l=t.length;l--;)a=je.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d&&(f=Z.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=Z.event.special[d]||{},c=Z.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,s)!==!1||e.addEventListener&&e.addEventListener(d,s,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),Z.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=ve.hasData(e)&&ve.get(e);if(m&&(u=m.events)){for(t=(t||"").match(de)||[""],l=t.length;l--;)if(a=je.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d){for(f=Z.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||Z.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)Z.event.remove(e,d+t[l],n,r,!0);Z.isEmptyObject(u)&&(delete m.handle,ve.remove(e,"events"))}},trigger:function(t,n,r,i){var o,s,a,u,l,c,f,p=[r||J],d=G.call(t,"type")?t.type:t,h=G.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!De.test(d+Z.event.triggered)&&(d.indexOf(".")>=0&&(h=d.split("."),d=h.shift(),h.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[Z.expando]?t:new Z.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:Z.makeArray(n,[t]),f=Z.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!Z.isWindow(r)){for(u=f.delegateType||d,De.test(u+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||J)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,c=(ve.get(s,"events")||{})[t.type]&&ve.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&Z.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Z.acceptData(r)||l&&Z.isFunction(r[d])&&!Z.isWindow(r)&&(a=r[l],a&&(r[l]=null),Z.event.triggered=d,r[d](),Z.event.triggered=void 0,a&&(r[l]=a)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,r,i,o,s=[],a=_.call(arguments),u=(ve.get(this,"events")||{})[e.type]||[],l=Z.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;n<a;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(u)>=0:Z.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Se.test(i)?this.mouseHooks:Ee.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new Z.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===f()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&Z.nodeName(this,"input"))return this.click(),!1},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,t):Z.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||Z.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ve.access(r,t);i||r.addEventListener(e,n,!0),ve.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ve.access(r,t)-1;i?ve.access(r,t,i):(r.removeEventListener(e,n,!0),ve.remove(r,t))}}}),Z.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(e){return Z().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Z(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Z.event.trigger(e,t,n,!0)}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Le=/<([\w:]+)/,qe=/<|&#?\w+;/,He=/<(?:script|style|link)/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^$|\/(?:java|ecma)script/i,Pe=/^true\/(.*)/,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Me={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Me.optgroup=Me.option,Me.tbody=Me.tfoot=Me.colgroup=Me.caption=Me.thead,Me.th=Me.td,Z.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=Z.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=v(a),o=v(e),r=0,i=o.length;r<i;r++)y(o[r],s[r]);if(t)if(n)for(o=o||v(e),s=s||v(a),r=0,i=o.length;r<i;r++)m(o[r],s[r]);else m(e,a);return s=v(a,"script"),s.length>0&&g(s,!u&&v(e,"script")),a},buildFragment:function(e,t,n,r){for(var i,o,s,a,u,l,c=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if(i=e[p],i||0===i)if("object"===Z.type(i))Z.merge(f,i.nodeType?[i]:i);else if(qe.test(i)){for(o=o||c.appendChild(t.createElement("div")),s=(Le.exec(i)||["",""])[1].toLowerCase(),a=Me[s]||Me._default,o.innerHTML=a[1]+i.replace(Ae,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;Z.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(t.createTextNode(i));for(c.textContent="",p=0;i=f[p++];)if((!r||Z.inArray(i,r)===-1)&&(u=Z.contains(i.ownerDocument,i),o=v(c.appendChild(i),"script"),u&&g(o),n))for(l=0;i=o[l++];)Fe.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=Z.event.special,s=0;void 0!==(n=e[s]);s++){if(Z.acceptData(n)&&(i=n[ve.expando],i&&(t=ve.cache[i]))){if(t.events)for(r in t.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,t.handle);ve.cache[i]&&delete ve.cache[i]}delete ye.cache[n[ye.expando]]}}}),Z.fn.extend({text:function(e){return me(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?Z.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return me(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!Me[(Le.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ae,"<$1></$2>");try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=z.apply([],e);var n,r,i,o,s,a,u=0,l=this.length,c=this,f=l-1,p=e[0],g=Z.isFunction(p);if(g||l>1&&"string"==typeof p&&!Q.checkClone&&Oe.test(p))return this.each(function(n){var r=c.eq(n);g&&(e[0]=p.call(this,n,r.html())),r.domManip(e,t)});if(l&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(v(n,"script"),d),o=i.length;u<l;u++)s=n,u!==f&&(s=Z.clone(s,!0,!0),o&&Z.merge(i,v(s,"script"))),t.call(this[u],s,u);if(o)for(a=i[i.length-1].ownerDocument,Z.map(i,h),u=0;u<o;u++)s=i[u],Fe.test(s.type||"")&&!ve.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Re,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,r=[],i=Z(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),Z(i[s])[t](n),X.apply(r,n.get());return this.pushStack(r)}});var We,$e={},Ie=/^margin/,Be=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),_e=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),s.removeChild(n),t}}))}(),Z.swap=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i};var ze=/^(none|table(?!-c[ea]).+)/,Xe=new RegExp("^("+we+")(.*)$","i"),Ue=new RegExp("^([+-])=("+we+")","i"),Ve={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=Z.camelCase(t),u=e.style;return t=Z.cssProps[a]||(Z.cssProps[a]=C(u,a)),s=Z.cssHooks[t]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=Ue.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),Q.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,s,a=Z.camelCase(t);return t=Z.cssProps[a]||(Z.cssProps[a]=C(e.style,a)),s=Z.cssHooks[t]||Z.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=w(e,t,r)),"normal"===i&&t in Ye&&(i=Ye[t]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,r){if(n)return ze.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Ve,function(){return E(e,t,r)}):E(e,t,r)},set:function(e,n,r){var i=r&&_e(e);return N(e,n,r?k(e,t,r,"border-box"===Z.css(e,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=T(Q.reliableMarginRight,function(e,t){if(t)return Z.swap(e,{display:"inline-block"},w,[e,"marginRight"])}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Te[r]+t]=o[r]||o[r-2]||o[0];return i}},Ie.test(e)||(Z.cssHooks[e+t].set=N)}),Z.fn.extend({css:function(e,t){return me(this,function(e,t,n){var r,i,o={},s=0;if(Z.isArray(t)){for(r=_e(e),i=t.length;s<i;s++)o[t[s]]=Z.css(e,t[s],!1,r);return o}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ce(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=D,D.prototype={constructor:D,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.options.duration?this.pos=t=Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=D.prototype.init,Z.fx.step={};var Qe,Je,Ke=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[q],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ze.exec(t),o=i&&i[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==o&&+r)&&Ze.exec(Z.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,Z.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(O,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Z.speed=function(e,t,n){var r=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Z.isEmptyObject(e),o=Z.speed(t,n,r),s=function(){var t=O(this,Z.extend({},e),o);(i||ve.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Z.timers,s=ve.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&et.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Z.timers,s=r?r.length:0;for(n.finish=!0,Z.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));
for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(A(t,!0),e,r,i)}}),Z.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Qe=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Qe=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=n.selected,t.disabled=!0,Q.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var rt,it,ot=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return me(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===ke?Z.prop(e,t,n):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),r=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?it:rt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=Z.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(de);if(o&&1===e.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),it={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ot[t]||Z.find.attr;ot[t]=function(e,t,r){var i,o;return r||(o=ot[t],ot[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,ot[t]=o),i}});var st=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return me(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,i=Z.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||st.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var at=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,r,i,o,s,a="string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(de)||[];u<l;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=Z.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,r,i,o,s,a=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(de)||[];u<l;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=e?Z.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):Z.isFunction(e)?this.each(function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=Z(this),o=e.match(de)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else n!==ke&&"boolean"!==n||(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(at," ").indexOf(t)>=0)return!0;return!1}});var ut=/\r/g;Z.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=Z.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Z(this).val()):e,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ut,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,s=o?null:[],a=o?i+1:r.length,u=i<0?a:o?i:0;u<a;u++)if(n=r[u],(n.selected||u===i)&&(Q.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=Z.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){if(Z.isArray(t))return e.checked=Z.inArray(Z(e).val(),t)>=0}},Q.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var lt=Z.now(),ct=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||Z.error("Invalid XML: "+e),t};var ft=/#.*$/,pt=/([?&])_=[^&]*/,dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,mt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},xt={},bt="*/".concat("*"),wt=e.location.href,Tt=vt.exec(wt.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt,type:"GET",isLocal:ht.test(Tt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?R(R(e,Z.ajaxSettings),t):R(Z.ajaxSettings,e)},ajaxPrefilter:F(yt),ajaxTransport:F(xt),ajax:function(e,t){function n(e,t,n,s){var u,c,v,y,b,T=t;2!==x&&(x=2,a&&clearTimeout(a),r=void 0,o=s||"",w.readyState=e>0?4:0,u=e>=200&&e<300||304===e,n&&(y=M(f,w,n)),y=W(f,y,w,u),u?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[i]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[i]=b)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=y.state,c=y.data,v=y.error,u=!v)):(v=T,!e&&T||(T="error",e<0&&(e=0))),w.status=e,w.statusText=(t||T)+"",u?h.resolveWith(p,[c,T,w]):h.rejectWith(p,[w,T,v]),w.statusCode(m),m=void 0,l&&d.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?c:v]),g.fireWith(p,[w,T]),l&&(d.trigger("ajaxComplete",[w,f]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,a,u,l,c,f=Z.ajaxSetup({},t),p=f.context||f,d=f.context&&(p.nodeType||p.jquery)?Z(p):Z.event,h=Z.Deferred(),g=Z.Callbacks("once memory"),m=f.statusCode||{},v={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s)for(s={};t=dt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(x<2)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return r&&r.abort(t),n(0,t),this}};if(h.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||wt)+"").replace(ft,"").replace(mt,Tt[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=Z.trim(f.dataType||"*").toLowerCase().match(de)||[""],null==f.crossDomain&&(u=vt.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===Tt[1]&&u[2]===Tt[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Tt[3]||("http:"===Tt[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Z.param(f.data,f.traditional)),P(yt,f,t,w),2===x)return w;l=Z.event&&f.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!gt.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(ct.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=pt.test(i)?i.replace(pt,"$1_="+lt++):i+(ct.test(i)?"&":"?")+"_="+lt++)),f.ifModified&&(Z.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&w.setRequestHeader("If-None-Match",Z.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+bt+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(p,w,f)===!1||2===x))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=P(xt,f,t,w)){w.readyState=1,l&&d.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},f.timeout));try{x=1,r.send(v,n)}catch(T){if(!(x<2))throw T;n(-1,T)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return Z.isFunction(e)?this.each(function(t){Z(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Ct=/%20/g,Nt=/\[\]$/,kt=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,St=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,r=[],i=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){i(this.name,this.value)});else for(n in e)$(n,e[n],t,i);return r.join("&").replace(Ct,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&St.test(this.nodeName)&&!Et.test(e)&&(this.checked||!Ne.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Dt=0,jt={},At={0:200,1223:204},Lt=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in jt)jt[e]()}),Q.cors=!!Lt&&"withCredentials"in Lt,Q.ajax=Lt=!!Lt,Z.ajaxTransport(function(e){var t;if(Q.cors||Lt&&!e.crossDomain)return{send:function(n,r){var i,o=e.xhr(),s=++Dt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete jt[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(At[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=jt[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var qt=[],Ht=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||Z.expando+"_"+lt++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(Ht.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ht.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ht,"$1"+i):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||Z.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,qt.push(i)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=se.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=Z.buildFragment([e],t,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Ot=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Ot)return Ot.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=Z.trim(e.slice(a)),e=e.slice(0,a)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&Z.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?Z("<div>").append(Z.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Ft=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=Z.css(e,"position"),f=Z(e),p={};"static"===c&&(e.style.position="relative"),a=f.offset(),o=Z.css(e,"top"),u=Z.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):f.css(p)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,Z.contains(t,r)?(typeof r.getBoundingClientRect!==ke&&(i=r.getBoundingClientRect()),n=I(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(r=e.offset()),r.top+=Z.css(e[0],"borderTopWidth",!0),r.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-Z.css(n,"marginTop",!0),left:t.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Ft;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Ft})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;Z.fn[t]=function(i){return me(this,function(t,i,o){var s=I(t);return void 0===o?s?s[n]:t[i]:void(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=T(Q.pixelPosition,function(e,n){if(n)return n=w(e,t),Be.test(n)?Z(e).position()[t]+"px":n})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return me(this,function(t,n,r){var i;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?Z.css(t,n,s):Z.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Pt=e.jQuery,Rt=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Rt),t&&e.jQuery===Z&&(e.jQuery=Pt),Z},typeof t===ke&&(e.jQuery=e.$=Z),Z});
!function(a){a.fn.disappear=function(e,r){var p=a.extend({data:void 0},r);this.each(function(){var r=a(this);if(r.bind("disappear",e,p.data),!e)return void r.trigger("disappear",p.data)})},a.fn.appear=function(e,r){var p=a.extend({data:void 0,one:!0},r);return this.each(function(){var r=a(this);if(r.appeared=!1,!e)return void r.trigger("appear",p.data);var t=a(window),n=function(){if(!r.is(":visible"))return void(r.appeared=!1);var a=t.scrollLeft(),e=t.scrollTop(),n=r.offset(),i=n.left,o=n.top;o+r.height()>=e&&o<=e+t.height()&&i+r.width()>=a&&i<=a+t.width()?r.appeared||r.trigger("appear",p.data):(r.appeared&&r.trigger("disappear",p.data),r.appeared=!1)},i=function(){if(r.appeared=!0,p.one){t.unbind("scroll",n);var i=a.inArray(n,a.fn.appear.checks);i>=0&&a.fn.appear.checks.splice(i,1)}e.apply(this,arguments)};p.one?r.one("appear",p.data,i):r.bind("appear",p.data,i),t.scroll(n),a.fn.appear.checks.push(n),n()})},a.extend(a.fn.appear,{checks:[],timeout:null,checkAll:function(){var e=a.fn.appear.checks.length;if(e>0)for(;e--;)a.fn.appear.checks[e]()},run:function(){a.fn.appear.timeout&&clearTimeout(a.fn.appear.timeout),a.fn.appear.timeout=setTimeout(a.fn.appear.checkAll,20)}}),a.each(["append","prepend","after","before","attr","removeAttr","addClass","removeClass","toggleClass","remove","css","show","hide"],function(e,r){var p=a.fn[r];p&&(a.fn[r]=function(){var e=p.apply(this,arguments);return a.fn.appear.run(),e})})}(jQuery);
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function o(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(c," ")),u.json?JSON.parse(e):e}catch(n){}}function t(n,o){var i=u.raw?n:r(n);return e.isFunction(o)?o(i):i}var c=/\+/g,u=e.cookie=function(r,c,s){if(arguments.length>1&&!e.isFunction(c)){if(s=e.extend({},u.defaults,s),"number"==typeof s.expires){var a=s.expires,f=s.expires=new Date;f.setMilliseconds(f.getMilliseconds()+864e5*a)}return document.cookie=[s.raw?r:n(r),"=",s.raw?u.json?JSON.stringify(c):String(c):i(c),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var d=r?void 0:{},p=document.cookie?document.cookie.split("; "):[],l=0,m=p.length;l<m;l++){var x=p[l].split("="),g=o(x.shift()),j=x.join("=");if(r===g){d=t(j,c);break}r||void 0===(j=t(j))||(d[g]=j)}return d};u.defaults={},e.removeCookie=function(n,o){return e.cookie(n,"",e.extend({},o,{expires:-1})),!e.cookie(n)}});
!function(t,e){function n(t,e,n){var r=t.children(),o=!1;t.empty();for(var i=0,d=r.length;i<d;i++){var l=r.eq(i);if(t.append(l),n&&t.append(n),a(t,e)){l.remove(),o=!0;break}n&&n.detach()}return o}function r(e,n,i,d,l){var s=!1,c="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",u="script, .dotdotdot-keep";return e.contents().detach().each(function(){var h=this,f=t(h);if("undefined"==typeof h)return!0;if(f.is(u))e.append(f);else{if(s)return!0;e.append(f),!l||f.is(d.after)||f.find(d.after).length||e[e.is(c)?"after":"append"](l),a(i,d)&&(s=3==h.nodeType?o(f,n,i,d,l):r(f,n,i,d,l)),s||l&&l.detach()}}),n.addClass("is-truncated"),s}function o(e,n,r,o,d){var c=e[0];if(!c)return!1;var h=s(c),f=h.indexOf(" ")!==-1?" ":"",p="letter"==o.wrap?"":f,g=h.split(p),v=-1,w=-1,b=0,y=g.length-1;for(o.fallbackToLetter&&0==b&&0==y&&(p="",g=h.split(p),y=g.length-1);b<=y&&(0!=b||0!=y);){var m=Math.floor((b+y)/2);if(m==w)break;w=m,l(c,g.slice(0,w+1).join(p)+o.ellipsis),r.children().each(function(){t(this).toggle().toggle()}),a(r,o)?(y=w,o.fallbackToLetter&&0==b&&0==y&&(p="",g=g[0].split(p),v=-1,w=-1,b=0,y=g.length-1)):(v=w,b=w)}if(v==-1||1==g.length&&0==g[0].length){var x=e.parent();e.detach();var C=d&&d.closest(x).length?d.length:0;x.contents().length>C?c=u(x.contents().eq(-1-C),n):(c=u(x,n,!0),C||x.detach()),c&&(h=i(s(c),o),l(c,h),C&&d&&t(c).parent().append(d))}else h=i(g.slice(0,v+1).join(p),o),l(c,h);return!0}function a(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function l(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function s(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function c(t){do t=t.previousSibling;while(t&&1!==t.nodeType&&3!==t.nodeType);return t}function u(e,n,r){var o,a=e&&e[0];if(a){if(!r){if(3===a.nodeType)return a;if(t.trim(e.text()))return u(e.contents().last(),n)}for(o=c(a);!o;){if(e=e.parent(),e.is(n)||!e.length)return!1;o=c(e[0])}if(o)return u(t(o),n)}return!1}function h(e,n){return!!e&&("string"==typeof e?(e=t(e,n),!!e.length&&e):!!e.jquery&&e)}function f(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;r<o;r++){var a=parseInt(t.css(n[r]),10);isNaN(a)&&(a=0),e-=a}return e}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(e){if(0==this.length)return t.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(e)});var o=this,i=o.contents();o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(e,d){switch(o.removeClass("is-truncated"),e.preventDefault(),e.stopPropagation(),typeof l.height){case"number":l.maxHeight=l.height;break;case"function":l.maxHeight=l.height.call(o[0]);break;default:l.maxHeight=f(o)}l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||"nodeType"in d&&1===d.nodeType)&&(d=t("<div />").append(d).contents()),d instanceof t&&(i=d)),g=o.wrapInner('<div class="dotdotdot" />').children(),g.contents().detach().end().append(i.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,u=!1;return s.afterElement&&(c=s.afterElement.clone(!0),c.show(),s.afterElement.detach()),a(g,l)&&(u="children"==l.wrap?n(g,l,c):r(g,o,g,l,c)),g.replaceWith(g.contents()),g=null,t.isFunction(l.callback)&&l.callback.call(o[0],u,i),s.isTruncated=u,u}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],i),i}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(i).attr("style",o.data("dotdotdot-style")||"").removeClass("is-truncated").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),r=e.height();e.bind("resize.dot"+s.dotId,function(){n==e.width()&&r==e.height()&&l.windowResizeFix||(n=e.width(),r=e.height(),u&&clearInterval(u),u=setTimeout(function(){o.trigger("update.dot")},100))})}else c=d(o),u=setInterval(function(){if(o.is(":visible")){var t=d(o);c.width==t.width&&c.height==t.height||(o.trigger("update.dot"),c=t)}},500);return o},o.unwatch=function(){return t(window).unbind("resize.dot"+s.dotId),u&&clearInterval(u),o};var l=t.extend(!0,{},t.fn.dotdotdot.defaults,e),s={},c={},u=null,g=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=t.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),s.afterElement=h(l.after,o),s.isTruncated=!1,s.dotId=p++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},t.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","",",",";",".","!","?"],noEllipsis:[]}},t.fn.dotdotdot.debug=function(t){};var p=1,g=t.fn.html;t.fn.html=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):g.apply(this,arguments)};var v=t.fn.text;t.fn.text=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?(n=t("<div />").text(n).html(),this.trigger("update",[n])):v.apply(this,arguments)}}}(jQuery),jQuery(document).ready(function(t){t(".dot-ellipsis").each(function(){var e=t(this).hasClass("dot-resize-update"),n=t(this).hasClass("dot-timer-update"),r=0,o=t(this).attr("class").split(/\s+/);t.each(o,function(t,e){var n=e.match(/^dot-height-(\d+)$/);null!==n&&(r=Number(n[1]))});var a=new Object;n&&(a.watch=!0),e&&(a.watch="window"),r>0&&(a.height=r),t(this).dotdotdot(a)})}),jQuery(window).load(function(){jQuery(".dot-ellipsis.dot-load-update").trigger("update.dot")});
(function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||"undefined"==typeof n&&e)return 1;if(n<t||!e||"undefined"==typeof t&&r)return-1}return 0}function t(n,t,r){if(t!==t)return p(n,r);for(var e=(r||0)-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function r(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function e(n){return"string"==typeof n?n:null==n?"":n+""}function u(n){return n.charCodeAt(0)}function i(n,t){for(var r=-1,e=n.length;++r<e&&t.indexOf(n.charAt(r))>-1;);return r}function o(n,t){for(var r=n.length;r--&&t.indexOf(n.charAt(r))>-1;);return r}function f(t,r){return n(t.criteria,r.criteria)||t.index-r.index}function a(t,r){for(var e=-1,u=t.criteria,i=r.criteria,o=u.length;++e<o;){var f=n(u[e],i[e]);if(f)return f}return t.index-r.index}function c(n){return Bn[n]}function l(n){return Dn[n]}function s(n){return"\\"+qn[n]}function p(n,t,r){for(var e=n.length,u=r?t||e:(t||0)-1;r?u--:++u<e;){var i=n[u];if(i!==i)return u}return-1}function h(n){return n&&"object"==typeof n||!1}function v(n){return n<=160&&n>=9&&n<=13||32==n||160==n||5760==n||6158==n||n>=8192&&(n<=8202||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function g(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;)n[r]===t&&(n[r]=D,i[++u]=r);return i}function d(n,t){for(var r,e=-1,u=n.length,i=-1,o=[];++e<u;){var f=n[e],a=t?t(f,e,n):f;e&&r===a||(r=a,o[++i]=f)}return o}function y(n){for(var t=-1,r=n.length;++t<r&&v(n.charCodeAt(t)););return t}function _(n){for(var t=n.length;t--&&v(n.charCodeAt(t)););return t}function w(n){return zn[n]}function m(v){function Y(n){if(h(n)&&!Mo(n)){if(n instanceof Z)return n;if(Ki.call(n,"__wrapped__"))return new Z(n.__wrapped__,n.__chain__,Hn(n.__actions__))}return new Z(n)}function Z(n,t,r){this.__actions__=r||[],this.__chain__=!!t,this.__wrapped__=n}function Q(n){this.actions=null,this.dir=1,this.dropCount=0,this.filtered=!1,this.iteratees=null,this.takeCount=xo,this.views=null,this.wrapped=n}function Bn(){var n=this.actions,t=this.iteratees,r=this.views,e=new Q(this.wrapped);return e.actions=n?Hn(n):null,e.dir=this.dir,e.dropCount=this.dropCount,e.filtered=this.filtered,e.iteratees=t?Hn(t):null,e.takeCount=this.takeCount,e.views=r?Hn(r):null,e}function Dn(){var n=this.filtered,t=n?new Q(this):this.clone();return t.dir=this.dir*-1,t.filtered=n,t}function zn(){var n=this.wrapped.value();if(!Mo(n))return Yt(n,this.actions);var t=this.dir,r=t<0,e=n.length,u=dr(0,e,this.views),i=u.start,o=u.end,f=this.dropCount,a=go(o-i,this.takeCount-f),c=r?o:i-1,l=this.iteratees,s=l?l.length:0,p=0,h=[];n:for(;e--&&p<a;){c+=t;for(var v=-1,g=n[c];++v<s;){var d=l[v],y=d.iteratee,_=y(g,c,n),w=d.type;if(w==L)g=_;else if(!_){if(w==U)continue n;break n}}f?f--:h[p++]=g}return r?h.reverse():h}function Mn(){this.__data__={}}function qn(n){return this.has(n)&&delete this.__data__[n]}function Kn(n){return"__proto__"==n?b:this.__data__[n]}function Vn(n){return"__proto__"!=n&&Ki.call(this.__data__,n)}function Yn(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this}function Gn(n){var t=n?n.length:0;for(this.data={hash:so(null),set:new uo};t--;)this.push(n[t])}function Xn(n,t){var r=n.data,e="string"==typeof t||mu(t)?r.set.has(t):r.hash[t];return e?0:-1}function Zn(n){var t=this.data;"string"==typeof n||mu(n)?t.set.add(n):t.hash[n]=!0}function Hn(n,t){var r=-1,e=n.length;for(t||(t=Ci(e));++r<e;)t[r]=n[r];return t}function Qn(n,t){for(var r=-1,e=n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function nt(n,t){for(var r=n.length;r--&&t(n[r],r,n)!==!1;);return n}function tt(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function rt(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[++u]=o)}return i}function et(n,t){for(var r=-1,e=n.length,u=Ci(e);++r<e;)u[r]=t(n[r],r,n);return u}function ut(n){for(var t=-1,r=n.length,e=bo;++t<r;){var u=n[t];u>e&&(e=u)}return e}function it(n){for(var t=-1,r=n.length,e=xo;++t<r;){var u=n[t];u<e&&(e=u)}return e}function ot(n,t,r,e){var u=-1,i=n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function ft(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function at(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function ct(n,t){return"undefined"==typeof n?t:n}function lt(n,t,r,e){return"undefined"!=typeof n&&Ki.call(e,r)?n:t}function st(n,t,r){var e=Vo(t);if(!r)return ht(t,n,e);for(var u=-1,i=e.length;++u<i;){var o=e[u],f=n[o],a=r(f,t[o],o,n,t);(a===a?a===f:f!==f)&&("undefined"!=typeof f||o in n)||(n[o]=a)}return n}function pt(n,t){for(var r=-1,e=n.length,u=Ar(e),i=t.length,o=Ci(i);++r<i;){var f=t[r];u?(f=parseFloat(f),o[r]=br(f,e)?n[f]:b):o[r]=n[f]}return o}function ht(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var i=r[e];t[i]=n[i]}return t}function vt(n,t){for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=cr(n[u],A,n)}return n}function gt(n,t,r){var u=typeof n;return"function"==u?"undefined"!=typeof t&&mr(n)?Xt(n,t,r):n:null==n?mi:"object"==u?Ut(n,!r):Bt(r?e(n):n)}function dt(n,t,r,e,u,i,o){var f;if(r&&(f=u?r(n,e,u):r(n)),"undefined"!=typeof f)return f;if(!mu(n))return n;var a=Mo(n);if(a){if(f=yr(n),!t)return Hn(n,f)}else{var c=Yi.call(n),l=c==V;if(c!=J&&c!=z&&(!l||u))return Ln[c]?wr(n,c,t):u?n:{};if(f=_r(l?{}:n),!t)return ht(n,f,Vo(n))}i||(i=[]),o||(o=[]);for(var s=i.length;s--;)if(i[s]==n)return o[s];return i.push(n),o.push(f),(a?Qn:kt)(n,function(e,u){f[u]=dt(e,t,r,u,n,i,o)}),f}function yt(n,t,r,e){if(!wu(n))throw new Bi(B);return io(function(){n.apply(b,qt(r,e))},t)}function _t(n,r){var e=n?n.length:0,u=[];if(!e)return u;var i=-1,o=gr(),f=o==t,a=f&&r.length>=200&&So(r),c=r.length;a&&(o=Xn,f=!1,r=a);n:for(;++i<e;){var l=n[i];if(f&&l===l){for(var s=c;s--;)if(r[s]===l)continue n;u.push(l)}else o(r,l)<0&&u.push(l)}return u}function wt(n,t){var r=n?n.length:0;if(!Ar(r))return kt(n,t);for(var e=-1,u=Sr(n);++e<r&&t(u[e],e,u)!==!1;);return n}function mt(n,t){var r=n?n.length:0;if(!Ar(r))return Ot(n,t);for(var e=Sr(n);r--&&t(e[r],r,e)!==!1;);return n}function bt(n,t){var r=!0;return wt(n,function(n,e,u){return r=!!t(n,e,u)}),r}function xt(n,t){var r=[];return wt(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function At(n,t,r,e){var u;return r(n,function(n,r,i){if(t(n,r,i))return u=e?r:n,!1}),u}function jt(n,t,r,e){for(var u=(e||0)-1,i=n.length,o=-1,f=[];++u<i;){var a=n[u];if(h(a)&&Ar(a.length)&&(Mo(a)||pu(a))){t&&(a=jt(a,t,r));var c=-1,l=a.length;for(f.length+=l;++c<l;)f[++o]=a[c]}else r||(f[++o]=a)}return f}function Et(n,t,r){for(var e=-1,u=Sr(n),i=r(n),o=i.length;++e<o;){var f=i[e];if(t(u[f],f,u)===!1)break}return n}function Rt(n,t,r){for(var e=Sr(n),u=r(n),i=u.length;i--;){var o=u[i];if(t(e[o],o,e)===!1)break}return n}function It(n,t){return Et(n,t,qu)}function kt(n,t){return Et(n,t,Vo)}function Ot(n,t){return Rt(n,t,Vo)}function Ct(n,t){for(var r=-1,e=t.length,u=-1,i=[];++r<e;){var o=t[r];wu(n[o])&&(i[++u]=o)}return i}function Tt(n,t,r){var e=-1,u="function"==typeof t,i=n?n.length:0,o=Ar(i)?Ci(i):[];return wt(n,function(n){var i=u?t:null!=n&&n[t];o[++e]=i?i.apply(n,r):b}),o}function St(n,t,r,e,u,i){if(n===t)return 0!==n||1/n==1/t;var o=typeof n,f=typeof t;return"function"!=o&&"object"!=o&&"function"!=f&&"object"!=f||null==n||null==t?n!==n&&t!==t:Nt(n,t,St,r,e,u,i)}function Nt(n,t,r,e,u,i,o){var f=Mo(n),a=Mo(t),c=M,l=M;f||(c=Yi.call(n),c==z?c=J:c!=J&&(f=ku(n))),a||(l=Yi.call(t),l==z?l=J:l!=J&&(a=ku(t)));var s=c==J,p=l==J,h=c==l;if(h&&!f&&!s)return sr(n,t,c);var v=s&&Ki.call(n,"__wrapped__"),g=p&&Ki.call(t,"__wrapped__");if(v||g)return r(v?n.value():n,g?t.value():t,e,u,i,o);if(!h)return!1;i||(i=[]),o||(o=[]);for(var d=i.length;d--;)if(i[d]==n)return o[d]==t;i.push(n),o.push(t);var y=(f?lr:pr)(n,t,r,e,u,i,o);return i.pop(),o.pop(),y}function Wt(n,t,r,e,u){var i=t.length;if(null==n)return!i;for(var o=-1,f=!u;++o<i;)if(f&&e[o]?r[o]!==n[t[o]]:!Ki.call(n,t[o]))return!1;for(o=-1;++o<i;){var a=t[o];if(f&&e[o])var c=Ki.call(n,a);else{var l=n[a],s=r[o];c=u?u(l,s,a):b,"undefined"==typeof c&&(c=St(s,l,u,!0))}if(!c)return!1}return!0}function Ft(n,t){var r=[];return wt(n,function(n,e,u){r.push(t(n,e,u))}),r}function Ut(n,t){var r=Vo(n),e=r.length;if(1==e){var u=r[0],i=n[u];if(jr(i))return function(n){return null!=n&&i===n[u]&&Ki.call(n,u)}}t&&(n=dt(n,!0));for(var o=Ci(e),f=Ci(e);e--;)i=n[r[e]],o[e]=i,f[e]=jr(i);return function(n){return Wt(n,r,o,f)}}function Lt(n,t,r,e,u){var i=Ar(t.length)&&(Mo(t)||ku(t));return(i?Qn:kt)(t,function(t,o,f){if(h(t))return e||(e=[]),u||(u=[]),$t(n,f,o,Lt,r,e,u);var a=n[o],c=r?r(a,t,o,n,f):b,l="undefined"==typeof c;l&&(c=t),!i&&"undefined"==typeof c||!l&&(c===c?c===a:a!==a)||(n[o]=c)}),n}function $t(n,t,r,e,u,i,o){for(var f=i.length,a=t[r];f--;)if(i[f]==a)return void(n[r]=o[f]);var c=n[r],l=u?u(c,a,r,n,t):b,s="undefined"==typeof l;s&&(l=a,Ar(a.length)&&(Mo(a)||ku(a))?l=Mo(c)?c:c?Hn(c):[]:(Po(a)||pu(a))&&(l=pu(c)?Tu(c):Po(c)?c:{})),i.push(a),o.push(l),s?n[r]=e(l,a,u,i,o):(l===l?l!==c:c===c)&&(n[r]=l)}function Bt(n){return function(t){return null==t?b:t[n]}}function Dt(t,r){var e=r.length,u=pt(t,r);for(r.sort(n);e--;){var i=parseFloat(r[e]);if(i!=o&&br(i)){var o=i;oo.call(t,i,1)}}return u}function zt(n,t){return n+no(mo()*(t-n+1))}function Mt(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function qt(n,t,r){var e=-1,u=n.length;t=null==t?0:+t||0,t<0&&(t=-t>u?0:u+t),r="undefined"==typeof r||r>u?u:+r||0,r<0&&(r+=u),u=t>r?0:r-t;for(var i=Ci(u);++e<u;)i[e]=n[e+t];return i}function Pt(n,t){var r;return wt(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Kt(n,r){var e=-1,u=gr(),i=n.length,o=u==t,f=o&&i>=200,a=f&&So(),c=[];a?(u=Xn,o=!1):(f=!1,a=r?[]:c);n:for(;++e<i;){var l=n[e],s=r?r(l,e,n):l;if(o&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;r&&a.push(s),c.push(l)}else u(a,s)<0&&((r||f)&&a.push(s),c.push(l))}return c}function Vt(n,t){for(var r=-1,e=t.length,u=Ci(e);++r<e;)u[r]=n[t[r]];return u}function Yt(n,t){var r=n;r instanceof Q&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var i=[r],o=t[e];ro.apply(i,o.args),r=o.func.apply(o.thisArg,i)}return r}function Gt(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&u<=Eo){for(;e<u;){var i=e+u>>>1,o=n[i];(r?o<=t:o<t)?e=i+1:u=i}return u}return Jt(n,t,mi,r)}function Jt(n,t,r,e){t=r(t);for(var u=0,i=n?n.length:0,o=t!==t,f="undefined"==typeof t;u<i;){var a=no((u+i)/2),c=r(n[a]),l=c===c;if(o)var s=l||e;else s=f?l&&(e||"undefined"!=typeof c):e?c<=t:c<t;s?u=a+1:i=a}return go(i,jo)}function Xt(n,t,r){if("function"!=typeof n)return mi;if("undefined"==typeof t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)};case 5:return function(r,e,u,i,o){return n.call(t,r,e,u,i,o)}}return function(){return n.apply(t,arguments)}}function Zt(n){return Zi.call(n,0)}function Ht(n,t,r){for(var e=r.length,u=-1,i=vo(n.length-e,0),o=-1,f=t.length,a=Ci(i+f);++o<f;)a[o]=t[o];for(;++u<e;)a[r[u]]=n[u];for(;i--;)a[o++]=n[u++];return a}function Qt(n,t,r){for(var e=-1,u=r.length,i=-1,o=vo(n.length-u,0),f=-1,a=t.length,c=Ci(o+a);++i<o;)c[i]=n[i];for(var l=i;++f<a;)c[l+f]=t[f];for(;++e<u;)c[l+r[e]]=n[i++];return c}function nr(n,t){return function(r,e,u){var i=t?t():{};if(e=vr(e,u,3),Mo(r))for(var o=-1,f=r.length;++o<f;){var a=r[o];n(i,a,e(a,o,r),r)}else wt(r,function(t,r,u){n(i,t,e(t,r,u),u)});return i}}function tr(n){return function(){var t=arguments.length,r=arguments[0];if(t<2||null==r)return r;if(t>3&&xr(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var e=Xt(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(e=arguments[--t]);for(var u=0;++u<t;){var i=arguments[u];i&&n(r,i,e)}return r}}function rr(n,t){function r(){return(this instanceof r?e:n).apply(t,arguments)}var e=ur(n);return r}function er(n){return function(t){for(var r=-1,e=di(ni(t)),u=e.length,i="";++r<u;)i=n(i,e[r],r);return i}}function ur(n){return function(){var t=Co(n.prototype),r=n.apply(t,arguments);return mu(r)?r:t}}function ir(n,t){return function(r,e,i){i&&xr(r,e,i)&&(e=null);var o=vr(),f=null==e;if(o===gt&&f||(f=!1,e=o(e,i,3)),f){var a=Mo(r);if(a||!Iu(r))return n(a?r:Tr(r));e=u}return hr(r,e,t)}}function or(n,t,r,e,u,i,o,f,a,c){function l(){for(var m=arguments.length,b=m,x=Ci(m);b--;)x[b]=arguments[b];if(e&&(x=Ht(x,e,u)),i&&(x=Qt(x,i,o)),v||y){var E=l.placeholder,R=g(x,E);if(m-=R.length,m<c){var I=f?Hn(f):null,C=vo(c-m,0),T=v?R:null,S=v?null:R,N=v?x:null,W=v?null:x;t|=v?k:O,t&=~(v?O:k),d||(t&=~(A|j));var F=or(n,t,r,N,T,W,S,I,a,C);return F.placeholder=E,F}}var U=p?r:this;return h&&(n=U[w]),f&&(x=kr(x,f)),s&&a<x.length&&(x.length=a),(this instanceof l?_||ur(n):n).apply(U,x)}var s=t&T,p=t&A,h=t&j,v=t&R,d=t&E,y=t&I,_=!h&&ur(n),w=n;return l}function fr(n,t,r){var u=n.length;if(t=+t,u>=t||!po(t))return"";var i=t-u;return r=null==r?" ":e(r),ai(r,Hi(i/r.length)).slice(0,i)}function ar(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=Ci(f+c);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this instanceof u?o:n).apply(i?r:this,l)}var i=t&A,o=ur(n);return u}function cr(n,t,r,e,u,i,o,f){var a=t&j;if(!a&&!wu(n))throw new Bi(B);var c=e?e.length:0;if(c||(t&=~(k|O),e=u=null),c-=u?u.length:0,t&O){var l=e,s=u;e=u=null}var p=!a&&No(n),h=[n,t,r,e,u,l,s,i,o,f];if(p&&p!==!0&&(Er(h,p),t=h[1],f=h[9]),h[9]=null==f?a?0:n.length:vo(f-c,0)||0,t==A)var v=rr(h[0],h[2]);else v=t!=k&&t!=(A|k)||h[4].length?or.apply(null,h):ar.apply(null,h);var g=p?To:Wo;return g(v,h)}function lr(n,t,r,e,u,i,o){var f=-1,a=n.length,c=t.length,l=!0;if(a!=c&&!(u&&c>a))return!1;for(;l&&++f<a;){var s=n[f],p=t[f];if(l=b,e&&(l=u?e(p,s,f):e(s,p,f)),"undefined"==typeof l)if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,i,o))););else l=s&&s===p||r(s,p,e,u,i,o)}return!!l}function sr(n,t,r){switch(r){case q:case P:return+n==+t;case K:return n.name==t.name&&n.message==t.message;case G:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case X:case H:return n==e(t)}return!1}function pr(n,t,r,e,u,i,o){var f=Vo(n),a=f.length,c=Vo(t),l=c.length;if(a!=l&&!u)return!1;for(var s,p=-1;++p<a;){var h=f[p],v=Ki.call(t,h);if(v){var g=n[h],d=t[h];v=b,e&&(v=u?e(d,g,h):e(g,d,h)),"undefined"==typeof v&&(v=g&&g===d||r(g,d,e,u,i,o))}if(!v)return!1;s||(s="constructor"==h)}if(!s){var y=n.constructor,_=t.constructor;if(y!=_&&"constructor"in n&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _))return!1}return!0}function hr(n,t,r){var e=r?xo:bo,u=e,i=u;return wt(n,function(n,o,f){var a=t(n,o,f);((r?a<u:a>u)||a===e&&a===i)&&(u=a,i=n)}),i}function vr(n,t,r){var e=Y.callback||_i;return e=e===_i?gt:e,r?e(n,t,r):e}function gr(n,r,e){var u=Y.indexOf||Kr;return u=u===Kr?t:u,n?u(n,r,e):u}function dr(n,t,r){for(var e=-1,u=r?r.length:0;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=go(t,n+o);break;case"takeRight":n=vo(n,t-o)}}return{start:n,end:t}}function yr(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&Ki.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function _r(n){var t=n.constructor;return"function"==typeof t&&t instanceof t||(t=Ui),new t}function wr(n,t,r){var e=n.constructor;switch(t){case nn:return Zt(n);case q:case P:return new e((+n));case tn:case rn:case en:case un:case on:case fn:case an:case cn:case ln:var u=n.buffer;return new e(r?Zt(u):u,n.byteOffset,n.length);case G:case H:return new e(n);case X:var i=new e(n.source,xn.exec(n));i.lastIndex=n.lastIndex}return i}function mr(n){var t=Y.support,r=!(t.funcNames?n.name:t.funcDecomp);if(!r){var e=qi.call(n);t.funcNames||(r=!An.test(e)),r||(r=Cn.test(e)||Au(n),To(n,r))}return r}function br(n,t){return n=+n,t=null==t?Io:t,n>-1&&n%1==0&&n<t}function xr(n,t,r){if(!mu(r))return!1;var e=typeof t;if("number"==e)var u=r.length,i=Ar(u)&&br(t,u);else i="string"==e&&t in n;return i&&r[t]===n}function Ar(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=Io}function jr(n){return n===n&&(0===n?1/n>0:!mu(n))}function Er(n,t){var r=n[1],e=t[1],u=r|e,i=T|C,o=A|j,f=i|o|E|I,a=r&T&&!(e&T),c=r&C&&!(e&C),l=(c?n:t)[7],s=(a?n:t)[8],p=!(r>=C&&e>o||r>o&&e>=C),h=u>=i&&u<=f&&(r<C||(c||a)&&l.length<=s);if(!p&&!h)return n;e&A&&(n[2]=t[2],u|=r&A?0:E);var v=t[3];if(v){var d=n[3];n[3]=d?Ht(d,v,t[4]):Hn(v),n[4]=d?g(n[3],D):Hn(t[4])}return v=t[5],v&&(d=n[5],n[5]=d?Qt(d,v,t[6]):Hn(v),n[6]=d?g(n[5],D):Hn(t[6])),v=t[7],v&&(n[7]=Hn(v)),e&T&&(n[8]=null==n[8]?t[8]:go(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Rr(n,t){n=Sr(n);for(var r=-1,e=t.length,u={};++r<e;){var i=t[r];i in n&&(u[i]=n[i])}return u}function Ir(n,t){var r={};return It(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function kr(n,t){for(var r=n.length,e=go(t.length,r),u=Hn(n);e--;){var i=t[e];n[e]=br(i,r)?u[i]:b}return n}function Or(n){var t;Y.support;if(!h(n)||Yi.call(n)!=J||!Ki.call(n,"constructor")&&(t=n.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return It(n,function(n,t){r=t}),"undefined"==typeof r||Ki.call(n,r)}function Cr(n){for(var t=qu(n),r=t.length,e=r&&n.length,u=Y.support,i=e&&Ar(e)&&(Mo(n)||u.nonEnumArgs&&pu(n)),o=-1,f=[];++o<r;){var a=t[o];(i&&br(a,e)||Ki.call(n,a))&&f.push(a)}return f}function Tr(n){return null==n?[]:Ar(n.length)?mu(n)?n:Ui(n):Xu(n)}function Sr(n){return mu(n)?n:Ui(n)}function Nr(n,t,r){t=(r?xr(n,t,r):null==t)?1:vo(+t||1,1);for(var e=0,u=n?n.length:0,i=-1,o=Ci(Hi(u/t));e<u;)o[++i]=qt(n,e,e+=t);return o}function Wr(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var i=n[t];i&&(u[++e]=i)}return u}function Fr(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Mo(r)||pu(r))break}return _t(r,jt(arguments,!1,!0,++n))}function Ur(n,t,r){var e=n?n.length:0;return e?((r?xr(n,t,r):null==t)&&(t=1),qt(n,t<0?0:t)):[]}function Lr(n,t,r){var e=n?n.length:0;return e?((r?xr(n,t,r):null==t)&&(t=1),t=e-(+t||0),qt(n,0,t<0?0:t)):[]}function $r(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=vr(t,r,3);e--&&t(n[e],e,n););return qt(n,0,e+1)}function Br(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=vr(t,r,3);++u<e&&t(n[u],u,n););return qt(n,u)}function Dr(n,t,r){var e=-1,u=n?n.length:0;for(t=vr(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function zr(n,t,r){var e=n?n.length:0;for(t=vr(t,r,3);e--;)if(t(n[e],e,n))return e;return-1}function Mr(n){return n?n[0]:b}function qr(n,t,r){var e=n?n.length:0;return r&&xr(n,t,r)&&(t=!1),e?jt(n,t):[]}function Pr(n){var t=n?n.length:0;return t?jt(n,!0):[]}function Kr(n,r,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=e<0?vo(u+e,0):e||0;else if(e){var i=Gt(n,r),o=n[i];return(r===r?r===o:o!==o)?i:-1}return t(n,r,e)}function Vr(n){return Lr(n,1)}function Yr(){for(var n=[],r=-1,e=arguments.length,u=[],i=gr(),o=i==t;++r<e;){var f=arguments[r];(Mo(f)||pu(f))&&(n.push(f),u.push(o&&f.length>=120&&So(r&&f)))}e=n.length;var a=n[0],c=-1,l=a?a.length:0,s=[],p=u[0];n:for(;++c<l;)if(f=a[c],(p?Xn(p,f):i(s,f))<0){for(r=e;--r;){var h=u[r];if((h?Xn(h,f):i(n[r],f))<0)continue n}p&&p.push(f),s.push(f)}return s}function Gr(n){var t=n?n.length:0;return t?n[t-1]:b}function Jr(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(r<0?vo(e+r,0):go(r||0,e-1))+1;else if(r){u=Gt(n,t,!0)-1;var i=n[u];return(t===t?t===i:i!==i)?u:-1}if(t!==t)return p(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1}function Xr(){var n=arguments[0];if(!n||!n.length)return n;for(var t=0,r=gr(),e=arguments.length;++t<e;)for(var u=0,i=arguments[t];(u=r(n,i,u))>-1;)oo.call(n,u,1);return n}function Zr(n){return Dt(n||[],jt(arguments,!1,!1,1))}function Hr(n,t,r){var e=-1,u=n?n.length:0,i=[];for(t=vr(t,r,3);++e<u;){var o=n[e];t(o,e,n)&&(i.push(o),oo.call(n,e--,1),u--)}return i}function Qr(n){return Ur(n,1)}function ne(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&xr(n,t,r)&&(t=0,r=e),qt(n,t,r)):[]}function te(n,t,r,e){var u=vr(r);return u===gt&&null==r?Gt(n,t):Jt(n,t,u(r,e,1))}function re(n,t,r,e){var u=vr(r);return u===gt&&null==r?Gt(n,t,!0):Jt(n,t,u(r,e,1),!0)}function ee(n,t,r){var e=n?n.length:0;return e?((r?xr(n,t,r):null==t)&&(t=1),qt(n,0,t<0?0:t)):[]}function ue(n,t,r){var e=n?n.length:0;return e?((r?xr(n,t,r):null==t)&&(t=1),t=e-(+t||0),qt(n,t<0?0:t)):[]}function ie(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=vr(t,r,3);e--&&t(n[e],e,n););return qt(n,e+1)}function oe(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=vr(t,r,3);++u<e&&t(n[u],u,n););return qt(n,0,u)}function fe(){return Kt(jt(arguments,!1,!0))}function ae(n,r,e,u){var i=n?n.length:0;if(!i)return[];"boolean"!=typeof r&&null!=r&&(u=e,e=xr(n,r,u)?null:r,r=!1);var o=vr();return o===gt&&null==e||(e=o(e,u,3)),r&&gr()==t?d(n,e):Kt(n,e)}function ce(n){for(var t=-1,r=(n&&n.length&&ut(et(n,Pi)))>>>0,e=Ci(r);++t<r;)e[t]=et(n,Bt(t));return e}function le(n){return _t(n,qt(arguments,1))}function se(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Mo(r)||pu(r))var e=e?_t(e,r).concat(_t(r,e)):r}return e?Kt(e):[]}function pe(){for(var n=arguments.length,t=Ci(n);n--;)t[n]=arguments[n];return ce(t)}function he(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Mo(n[0])||(t=[]);++r<e;){var i=n[r];t?u[i]=t[r]:i&&(u[i[0]]=i[1])}return u}function ve(n){var t=Y(n);return t.__chain__=!0,t}function ge(n,t,r){return t.call(r,n),n}function de(n,t,r){return t.call(r,n)}function ye(){return ve(this)}function _e(){var n=this.__wrapped__;return n instanceof Q?new Z(n.reverse()):this.thru(function(n){return n.reverse()})}function we(){return this.value()+""}function me(){return Yt(this.__wrapped__,this.__actions__)}function be(n){var t=n?n.length:0;return Ar(t)&&(n=Tr(n)),pt(n,jt(arguments,!1,!1,1))}function xe(n,t,r){var e=n?n.length:0;return Ar(e)||(n=Xu(n),e=n.length),!!e&&(r="number"==typeof r?r<0?vo(e+r,0):r||0:0,"string"==typeof n||!Mo(n)&&Iu(n)?r<e&&n.indexOf(t,r)>-1:gr(n,t,r)>-1)}function Ae(n,t,r){var e=Mo(n)?tt:bt;return"function"==typeof t&&"undefined"==typeof r||(t=vr(t,r,3)),e(n,t)}function je(n,t,r){var e=Mo(n)?rt:xt;return t=vr(t,r,3),e(n,t)}function Ee(n,t,r){if(Mo(n)){var e=Dr(n,t,r);return e>-1?n[e]:b}return t=vr(t,r,3),At(n,t,wt)}function Re(n,t,r){return t=vr(t,r,3),At(n,t,mt)}function Ie(n,t){return Ee(n,bi(t))}function ke(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Mo(n)?Qn(n,t):wt(n,Xt(t,r,3))}function Oe(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Mo(n)?nt(n,t):mt(n,Xt(t,r,3))}function Ce(n,t){return Tt(n,t,qt(arguments,2))}function Te(n,t,r){var e=Mo(n)?et:Ft;return t=vr(t,r,3),e(n,t)}function Se(n,t){return Te(n,Ei(t))}function Ne(n,t,r,e){var u=Mo(n)?ot:Mt;return u(n,vr(t,e,4),r,arguments.length<3,wt)}function We(n,t,r,e){var u=Mo(n)?ft:Mt;return u(n,vr(t,e,4),r,arguments.length<3,mt)}function Fe(n,t,r){var e=Mo(n)?rt:xt;return t=vr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})}function Ue(n,t,r){if(r?xr(n,t,r):null==t){n=Tr(n);var e=n.length;return e>0?n[zt(0,e-1)]:b}var u=Le(n);return u.length=go(t<0?0:+t||0,u.length),u}function Le(n){n=Tr(n);for(var t=-1,r=n.length,e=Ci(r);++t<r;){var u=zt(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function $e(n){var t=n?n.length:0;return Ar(t)?t:Vo(n).length}function Be(n,t,r){var e=Mo(n)?at:Pt;return"function"==typeof t&&"undefined"==typeof r||(t=vr(t,r,3)),e(n,t)}function De(n,t,e){var u=-1,i=n?n.length:0,o=Ar(i)?Ci(i):[];return e&&xr(n,t,e)&&(t=null),t=vr(t,e,3),wt(n,function(n,r,e){o[++u]={criteria:t(n,r,e),index:u,value:n}}),r(o,f)}function ze(n){var t=arguments;t.length>3&&xr(t[1],t[2],t[3])&&(t=[n,t[1]]);var e=-1,u=n?n.length:0,i=jt(t,!1,!1,1),o=Ar(u)?Ci(u):[];return wt(n,function(n,t,r){for(var u=i.length,f=Ci(u);u--;)f[u]=null==n?b:n[i[u]];o[++e]={criteria:f,index:e,value:n}}),r(o,a)}function Me(n,t){return je(n,bi(t))}function qe(n,t){if(!wu(t)){if(!wu(n))throw new Bi(B);var r=n;n=t,t=r}return n=po(n=+n)?n:0,function(){if(--n<1)return t.apply(this,arguments)}}function Pe(n,t,r){return r&&xr(n,t,r)&&(t=null),t=n&&null==t?n.length:vo(+t||0,0),cr(n,T,null,null,null,null,t)}function Ke(n,t){var r;if(!wu(t)){if(!wu(n))throw new Bi(B);var e=n;n=t,t=e}return function(){return--n>0?r=t.apply(this,arguments):t=null,r}}function Ve(n,t){var r=A;if(arguments.length>2){var e=qt(arguments,2),u=g(e,Ve.placeholder);r|=k}return cr(n,r,t,e,u)}function Ye(n){return vt(n,arguments.length>1?jt(arguments,!1,!1,1):Du(n))}function Ge(n,t){var r=A|j;if(arguments.length>2){var e=qt(arguments,2),u=g(e,Ge.placeholder);r|=k}return cr(t,r,n,e,u)}function Je(n,t,r){r&&xr(n,t,r)&&(t=null);var e=cr(n,R,null,null,null,null,null,t);return e.placeholder=Je.placeholder,e}function Xe(n,t,r){r&&xr(n,t,r)&&(t=null);var e=cr(n,I,null,null,null,null,null,t);return e.placeholder=Xe.placeholder,e}function Ze(n,t,r){function e(){p&&Qi(p),a&&Qi(a),a=p=h=b}function u(){var r=t-(zo()-l);if(r<=0||r>t){a&&Qi(a);var e=h;a=p=h=b,e&&(v=zo(),c=n.apply(s,f),p||a||(f=s=null))}else p=io(u,r)}function i(){p&&Qi(p),a=p=h=b,(d||g!==t)&&(v=zo(),c=n.apply(s,f),p||a||(f=s=null))}function o(){if(f=arguments,l=zo(),s=this,h=d&&(p||!y),g===!1)var r=y&&!p;else{a||y||(v=l);var e=g-(l-v),o=e<=0||e>g;o?(a&&(a=Qi(a)),v=l,c=n.apply(s,f)):a||(a=io(i,e))}return o&&p?p=Qi(p):p||t===g||(p=io(u,t)),r&&(o=!0,c=n.apply(s,f)),!o||p||a||(f=s=null),c}var f,a,c,l,s,p,h,v=0,g=!1,d=!0;if(!wu(n))throw new Bi(B);if(t=t<0?0:t,r===!0){var y=!0;d=!1}else mu(r)&&(y=r.leading,g="maxWait"in r&&vo(+r.maxWait||0,t),d="trailing"in r?r.trailing:d);return o.cancel=e,o}function He(n){return yt(n,1,arguments,1)}function Qe(n,t){return yt(n,t,arguments,2)}function nu(){var n=arguments,t=n.length;if(!t)return function(){};if(!tt(n,wu))throw new Bi(B);return function(){for(var r=0,e=n[r].apply(this,arguments);++r<t;)e=n[r].call(this,e);return e}}function tu(){var n=arguments,t=n.length-1;if(t<0)return function(){};if(!tt(n,wu))throw new Bi(B);return function(){for(var r=t,e=n[r].apply(this,arguments);r--;)e=n[r].call(this,e);return e}}function ru(n,t){if(!wu(n)||t&&!wu(t))throw new Bi(B);var r=function(){var e=r.cache,u=t?t.apply(this,arguments):arguments[0];if(e.has(u))return e.get(u);var i=n.apply(this,arguments);return e.set(u,i),i};return r.cache=new ru.Cache,r}function eu(n){if(!wu(n))throw new Bi(B);return function(){return!n.apply(this,arguments)}}function uu(n){return Ke(n,2)}function iu(n){var t=qt(arguments,1),r=g(t,iu.placeholder);return cr(n,k,null,t,r)}function ou(n){var t=qt(arguments,1),r=g(t,ou.placeholder);return cr(n,O,null,t,r)}function fu(n){var t=jt(arguments,!1,!1,1);return cr(n,C,null,null,null,t)}function au(n,t,r){var e=!0,u=!0;if(!wu(n))throw new Bi(B);return r===!1?e=!1:mu(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),$n.leading=e,$n.maxWait=+t,$n.trailing=u,Ze(n,t,$n)}function cu(n,t){return t=null==t?mi:t,cr(t,k,null,[n],[])}function lu(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r=xr(n,t,e)?null:t,t=!1),r="function"==typeof r&&Xt(r,e,1),dt(n,t,r)}function su(n,t,r){return t="function"==typeof t&&Xt(t,r,1),dt(n,!0,t)}function pu(n){var t=h(n)?n.length:b;return Ar(t)&&Yi.call(n)==z||!1}function hu(n){return n===!0||n===!1||h(n)&&Yi.call(n)==q||!1}function vu(n){return h(n)&&Yi.call(n)==P||!1}function gu(n){return n&&1===n.nodeType&&h(n)&&Yi.call(n).indexOf("Element")>-1||!1}function du(n){if(null==n)return!0;var t=n.length;return Ar(t)&&(Mo(n)||Iu(n)||pu(n)||h(n)&&wu(n.splice))?!t:!Vo(n).length}function yu(n,t,r,e){if(r="function"==typeof r&&Xt(r,e,3),!r&&jr(n)&&jr(t))return n===t;var u=r?r(n,t):b;return"undefined"==typeof u?St(n,t,r):!!u}function _u(n){return h(n)&&"string"==typeof n.message&&Yi.call(n)==K||!1}function wu(n){return"function"==typeof n||!1}function mu(n){var t=typeof n;return"function"==t||n&&"object"==t||!1}function bu(n,t,r,e){var u=Vo(t),i=u.length;if(r="function"==typeof r&&Xt(r,e,3),!r&&1==i){var o=u[0],f=t[o];if(jr(f))return null!=n&&f===n[o]&&Ki.call(n,o)}for(var a=Ci(i),c=Ci(i);i--;)f=a[i]=t[u[i]],c[i]=jr(f);return Wt(n,u,a,c,r)}function xu(n){return Eu(n)&&n!=+n}function Au(n){return null!=n&&(Yi.call(n)==V?Ji.test(qi.call(n)):h(n)&&En.test(n)||!1)}function ju(n){return null===n}function Eu(n){return"number"==typeof n||h(n)&&Yi.call(n)==G||!1}function Ru(n){return h(n)&&Yi.call(n)==X||!1}function Iu(n){return"string"==typeof n||h(n)&&Yi.call(n)==H||!1}function ku(n){return h(n)&&Ar(n.length)&&Un[Yi.call(n)]||!1}function Ou(n){return"undefined"==typeof n}function Cu(n){var t=n?n.length:0;return Ar(t)?t?Hn(n):[]:Xu(n)}function Tu(n){return ht(n,qu(n))}function Su(n,t,r){var e=Co(n);return r&&xr(n,t,r)&&(t=null),t?ht(t,e,Vo(t)):e}function Nu(n){if(null==n)return n;var t=Hn(arguments);return t.push(ct),Ko.apply(b,t)}function Wu(n,t,r){return t=vr(t,r,3),At(n,t,kt,!0)}function Fu(n,t,r){return t=vr(t,r,3),At(n,t,Ot,!0)}function Uu(n,t,r){return"function"==typeof t&&"undefined"==typeof r||(t=Xt(t,r,3)),Et(n,t,qu)}function Lu(n,t,r){return t=Xt(t,r,3),Rt(n,t,qu)}function $u(n,t,r){return"function"==typeof t&&"undefined"==typeof r||(t=Xt(t,r,3)),kt(n,t)}function Bu(n,t,r){return t=Xt(t,r,3),Rt(n,t,Vo)}function Du(n){return Ct(n,qu(n))}function zu(n,t){return!!n&&Ki.call(n,t)}function Mu(n,t,r){r&&xr(n,t,r)&&(t=null);for(var e=-1,u=Vo(n),i=u.length,o={};++e<i;){var f=u[e],a=n[f];t?Ki.call(o,a)?o[a].push(f):o[a]=[f]:o[a]=f}return o}function qu(n){if(null==n)return[];mu(n)||(n=Ui(n));var t=n.length;t=t&&Ar(t)&&(Mo(n)||Oo.nonEnumArgs&&pu(n))&&t||0;for(var r=n.constructor,e=-1,u="function"==typeof r&&r.prototype==n,i=Ci(t),o=t>0;++e<t;)i[e]=e+"";for(var f in n)o&&br(f,t)||"constructor"==f&&(u||!Ki.call(n,f))||i.push(f);return i}function Pu(n,t,r){var e={};return t=vr(t,r,3),kt(n,function(n,r,u){e[r]=t(n,r,u)}),e}function Ku(n,t,r){if(null==n)return{};if("function"!=typeof t){var e=et(jt(arguments,!1,!1,1),$i);return Rr(n,_t(qu(n),e))}return t=Xt(t,r,3),Ir(n,function(n,r,e){return!t(n,r,e)})}function Vu(n){for(var t=-1,r=Vo(n),e=r.length,u=Ci(e);++t<e;){var i=r[t];u[t]=[i,n[i]]}return u}function Yu(n,t,r){return null==n?{}:"function"==typeof t?Ir(n,Xt(t,r,3)):Rr(n,jt(arguments,!1,!1,1))}function Gu(n,t,r){var e=null==n?b:n[t];return"undefined"==typeof e&&(e=r),wu(e)?e.call(n):e}function Ju(n,t,r,e){var u=Mo(n)||ku(n);if(t=vr(t,e,4),null==r)if(u||mu(n)){var i=n.constructor;r=u?Mo(n)?new i:[]:Co("function"==typeof i&&i.prototype)}else r={};return(u?Qn:kt)(n,function(n,e,u){return t(r,n,e,u)}),r}function Xu(n){return Vt(n,Vo(n))}function Zu(n){return Vt(n,qu(n))}function Hu(n,t,r){r&&xr(n,t,r)&&(t=r=null);var e=null==n,u=null==t;if(null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var i=mo();return go(n+i*(t-n+parseFloat("1e-"+((i+"").length-1))),t)}return zt(n,t)}function Qu(n){return n=e(n),n&&n.charAt(0).toUpperCase()+n.slice(1)}function ni(n){return n=e(n),n&&n.replace(Rn,c)}function ti(n,t,r){n=e(n),t+="";var u=n.length;return r=("undefined"==typeof r?u:go(r<0?0:+r||0,u))-t.length,r>=0&&n.indexOf(t,r)==r}function ri(n){return n=e(n),n&&yn.test(n)?n.replace(gn,l):n}function ei(n){return n=e(n),n&&On.test(n)?n.replace(kn,"\\$&"):n}function ui(n,t,r){n=e(n),t=+t;var u=n.length;if(u>=t||!po(t))return n;var i=(t-u)/2,o=no(i),f=Hi(i);return r=fr("",f,r),r.slice(0,o)+n+r}function ii(n,t,r){return n=e(n),n&&fr(n,t,r)+n}function oi(n,t,r){return n=e(n),n&&n+fr(n,t,r)}function fi(n,t,r){return r&&xr(n,t,r)&&(t=0),wo(n,t)}function ai(n,t){var r="";if(n=e(n),t=+t,t<1||!n||!po(t))return r;do t%2&&(r+=n),t=no(t/2),n+=n;while(t);return r}function ci(n,t,r){return n=e(n),r=null==r?0:go(r<0?0:+r||0,n.length),n.lastIndexOf(t,r)==r}function li(n,t,r){var u=Y.templateSettings;r&&xr(n,t,r)&&(t=r=null),n=e(n),t=st(st({},r||t),u,lt);var i,o,f=st(st({},t.imports),u.imports,lt),a=Vo(f),c=Vt(f,a),l=0,p=t.interpolate||In,h="__p += '",v=Li((t.escape||In).source+"|"+p.source+"|"+(p===mn?bn:In).source+"|"+(t.evaluate||In).source+"|$","g"),g="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Fn+"]")+"\n";n.replace(v,function(t,r,e,u,f,a){return e||(e=u),h+=n.slice(l,a).replace(Tn,s),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),f&&(o=!0,h+="';\n"+f+";\n__p += '"),e&&(h+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),
l=a+t.length,t}),h+="';\n";var d=t.variable;d||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(sn,""):h).replace(pn,"$1").replace(hn,"$1;"),h="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=yi(function(){return Ni(a,g+"return "+h).apply(b,c)});if(y.source=h,_u(y))throw y;return y}function si(n,t,r){var u=n;return(n=e(n))?(r?xr(u,t,r):null==t)?n.slice(y(n),_(n)+1):(t=e(t),n.slice(i(n,t),o(n,t)+1)):n}function pi(n,t,r){var u=n;return n=e(n),n?(r?xr(u,t,r):null==t)?n.slice(y(n)):n.slice(i(n,e(t))):n}function hi(n,t,r){var u=n;return n=e(n),n?(r?xr(u,t,r):null==t)?n.slice(0,_(n)+1):n.slice(0,o(n,e(t))+1):n}function vi(n,t,r){r&&xr(n,t,r)&&(t=null);var u=S,i=N;if(null!=t)if(mu(t)){var o="separator"in t?t.separator:o;u="length"in t?+t.length||0:u,i="omission"in t?e(t.omission):i}else u=+t||0;if(n=e(n),u>=n.length)return n;var f=u-i.length;if(f<1)return i;var a=n.slice(0,f);if(null==o)return a+i;if(Ru(o)){if(n.slice(f).search(o)){var c,l,s=n.slice(0,f);for(o.global||(o=Li(o.source,(xn.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(s);)l=c.index;a=a.slice(0,null==l?f:l)}}else if(n.indexOf(o,f)!=f){var p=a.lastIndexOf(o);p>-1&&(a=a.slice(0,p))}return a+i}function gi(n){return n=e(n),n&&dn.test(n)?n.replace(vn,w):n}function di(n,t,r){return r&&xr(n,t,r)&&(t=null),n=e(n),n.match(t||Sn)||[]}function yi(n){try{return n()}catch(t){return _u(t)?t:Si(t)}}function _i(n,t,r){return r&&xr(n,t,r)&&(t=null),gt(n,t)}function wi(n){return function(){return n}}function mi(n){return n}function bi(n){return Ut(n,!0)}function xi(n,t,r){if(null==r){var e=mu(t),u=e&&Vo(t),i=u&&u.length&&Ct(t,u);(i?i.length:e)||(i=!1,r=t,t=n,n=this)}i||(i=Ct(t,Vo(t)));var o=!0,f=-1,a=wu(n),c=i.length;r===!1?o=!1:mu(r)&&"chain"in r&&(o=r.chain);for(;++f<c;){var l=i[f],s=t[l];n[l]=s,a&&(n.prototype[l]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=Hn(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}var u=[this.value()];return ro.apply(u,arguments),t.apply(n,u)}}(s))}return n}function Ai(){return v._=Gi,this}function ji(){}function Ei(n){return Bt(n+"")}function Ri(n){return function(t){return null==n?b:n[t]}}function Ii(n,t,r){r&&xr(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;for(var e=-1,u=vo(Hi((t-n)/(r||1)),0),i=Ci(u);++e<u;)i[e]=n,n+=r;return i}function ki(n,t,r){if(n=+n,n<1||!po(n))return[];var e=-1,u=Ci(go(n,Ao));for(t=Xt(t,r,1);++e<n;)e<Ao?u[e]=t(e):t(e);return u}function Oi(n){var t=++Vi;return e(n)+t}v=v?Jn.defaults(Pn.Object(),v,Jn.pick(Pn,Wn)):Pn;var Ci=v.Array,Ti=v.Date,Si=v.Error,Ni=v.Function,Wi=v.Math,Fi=v.Number,Ui=v.Object,Li=v.RegExp,$i=v.String,Bi=v.TypeError,Di=Ci.prototype,zi=Ui.prototype,Mi=(Mi=v.window)&&Mi.document,qi=Ni.prototype.toString,Pi=Bt("length"),Ki=zi.hasOwnProperty,Vi=0,Yi=zi.toString,Gi=v._,Ji=Li("^"+ei(Yi).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xi=Au(Xi=v.ArrayBuffer)&&Xi,Zi=Au(Zi=Xi&&new Xi(0).slice)&&Zi,Hi=Wi.ceil,Qi=v.clearTimeout,no=Wi.floor,to=Au(to=Ui.getPrototypeOf)&&to,ro=Di.push,eo=zi.propertyIsEnumerable,uo=Au(uo=v.Set)&&uo,io=v.setTimeout,oo=Di.splice,fo=Au(fo=v.Uint8Array)&&fo,ao=(Di.unshift,Au(ao=v.WeakMap)&&ao),co=function(){try{var n=Au(n=v.Float64Array)&&n,t=new n(new Xi(10),0,1)&&n}catch(r){}return t}(),lo=Au(lo=Ci.isArray)&&lo,so=Au(so=Ui.create)&&so,po=v.isFinite,ho=Au(ho=Ui.keys)&&ho,vo=Wi.max,go=Wi.min,yo=Au(yo=Ti.now)&&yo,_o=Au(_o=Fi.isFinite)&&_o,wo=v.parseInt,mo=Wi.random,bo=Fi.NEGATIVE_INFINITY,xo=Fi.POSITIVE_INFINITY,Ao=Wi.pow(2,32)-1,jo=Ao-1,Eo=Ao>>>1,Ro=co?co.BYTES_PER_ELEMENT:0,Io=Wi.pow(2,53)-1,ko=ao&&new ao,Oo=Y.support={};!function(n){Oo.funcDecomp=!Au(v.WinRTError)&&Cn.test(m),Oo.funcNames="string"==typeof Ni.name;try{Oo.dom=11===Mi.createDocumentFragment().nodeType}catch(t){Oo.dom=!1}try{Oo.nonEnumArgs=!eo.call(arguments,1)}catch(t){Oo.nonEnumArgs=!0}}(0,0),Y.templateSettings={escape:_n,evaluate:wn,interpolate:mn,variable:"",imports:{_:Y}};var Co=function(){function n(){}return function(t){if(mu(t)){n.prototype=t;var r=new n;n.prototype=null}return r||v.Object()}}(),To=ko?function(n,t){return ko.set(n,t),n}:mi;Zi||(Zt=Xi&&fo?function(n){var t=n.byteLength,r=co?no(t/Ro):0,e=r*Ro,u=new Xi(t);if(r){var i=new co(u,0,r);i.set(new co(n,0,r))}return t!=e&&(i=new fo(u,e),i.set(new fo(n,e))),u}:wi(null));var So=so&&uo?function(n){return new Gn(n)}:wi(null),No=ko?function(n){return ko.get(n)}:ji,Wo=function(){var n=0,t=0;return function(r,e){var u=zo(),i=F-(u-t);if(t=u,i>0){if(++n>=W)return r}else n=0;return To(r,e)}}(),Fo=nr(function(n,t,r){Ki.call(n,r)?++n[r]:n[r]=1}),Uo=nr(function(n,t,r){Ki.call(n,r)?n[r].push(t):n[r]=[t]}),Lo=nr(function(n,t,r){n[r]=t}),$o=ir(ut),Bo=ir(it,!0),Do=nr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),zo=yo||function(){return(new Ti).getTime()},Mo=lo||function(n){return h(n)&&Ar(n.length)&&Yi.call(n)==M||!1};Oo.dom||(gu=function(n){return n&&1===n.nodeType&&h(n)&&!Po(n)||!1});var qo=_o||function(n){return"number"==typeof n&&po(n)};(wu(/x/)||fo&&!wu(fo))&&(wu=function(n){return Yi.call(n)==V});var Po=to?function(n){if(!n||Yi.call(n)!=J)return!1;var t=n.valueOf,r=Au(t)&&(r=to(t))&&to(r);return r?n==r||to(n)==r:Or(n)}:Or,Ko=tr(st),Vo=ho?function(n){if(n)var t=n.constructor,r=n.length;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&r&&Ar(r)?Cr(n):mu(n)?ho(n):[]}:Cr,Yo=tr(Lt),Go=er(function(n,t,r){return t=t.toLowerCase(),r?n+t.charAt(0).toUpperCase()+t.slice(1):t}),Jo=er(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()});8!=wo(Nn+"08")&&(fi=function(n,t,r){return(r?xr(n,t,r):null==t)?t=0:t&&(t=+t),n=si(n),wo(n,t||(jn.test(n)?16:10))});var Xo=er(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()});return Z.prototype=Y.prototype,Mn.prototype["delete"]=qn,Mn.prototype.get=Kn,Mn.prototype.has=Vn,Mn.prototype.set=Yn,Gn.prototype.push=Zn,ru.Cache=Mn,Y.after=qe,Y.ary=Pe,Y.assign=Ko,Y.at=be,Y.before=Ke,Y.bind=Ve,Y.bindAll=Ye,Y.bindKey=Ge,Y.callback=_i,Y.chain=ve,Y.chunk=Nr,Y.compact=Wr,Y.constant=wi,Y.countBy=Fo,Y.create=Su,Y.curry=Je,Y.curryRight=Xe,Y.debounce=Ze,Y.defaults=Nu,Y.defer=He,Y.delay=Qe,Y.difference=Fr,Y.drop=Ur,Y.dropRight=Lr,Y.dropRightWhile=$r,Y.dropWhile=Br,Y.filter=je,Y.flatten=qr,Y.flattenDeep=Pr,Y.flow=nu,Y.flowRight=tu,Y.forEach=ke,Y.forEachRight=Oe,Y.forIn=Uu,Y.forInRight=Lu,Y.forOwn=$u,Y.forOwnRight=Bu,Y.functions=Du,Y.groupBy=Uo,Y.indexBy=Lo,Y.initial=Vr,Y.intersection=Yr,Y.invert=Mu,Y.invoke=Ce,Y.keys=Vo,Y.keysIn=qu,Y.map=Te,Y.mapValues=Pu,Y.matches=bi,Y.memoize=ru,Y.merge=Yo,Y.mixin=xi,Y.negate=eu,Y.omit=Ku,Y.once=uu,Y.pairs=Vu,Y.partial=iu,Y.partialRight=ou,Y.partition=Do,Y.pick=Yu,Y.pluck=Se,Y.property=Ei,Y.propertyOf=Ri,Y.pull=Xr,Y.pullAt=Zr,Y.range=Ii,Y.rearg=fu,Y.reject=Fe,Y.remove=Hr,Y.rest=Qr,Y.shuffle=Le,Y.slice=ne,Y.sortBy=De,Y.sortByAll=ze,Y.take=ee,Y.takeRight=ue,Y.takeRightWhile=ie,Y.takeWhile=oe,Y.tap=ge,Y.throttle=au,Y.thru=de,Y.times=ki,Y.toArray=Cu,Y.toPlainObject=Tu,Y.transform=Ju,Y.union=fe,Y.uniq=ae,Y.unzip=ce,Y.values=Xu,Y.valuesIn=Zu,Y.where=Me,Y.without=le,Y.wrap=cu,Y.xor=se,Y.zip=pe,Y.zipObject=he,Y.backflow=tu,Y.collect=Te,Y.compose=tu,Y.each=ke,Y.eachRight=Oe,Y.extend=Ko,Y.iteratee=_i,Y.methods=Du,Y.object=he,Y.select=je,Y.tail=Qr,Y.unique=ae,xi(Y,Y),Y.attempt=yi,Y.camelCase=Go,Y.capitalize=Qu,Y.clone=lu,Y.cloneDeep=su,Y.deburr=ni,Y.endsWith=ti,Y.escape=ri,Y.escapeRegExp=ei,Y.every=Ae,Y.find=Ee,Y.findIndex=Dr,Y.findKey=Wu,Y.findLast=Re,Y.findLastIndex=zr,Y.findLastKey=Fu,Y.findWhere=Ie,Y.first=Mr,Y.has=zu,Y.identity=mi,Y.includes=xe,Y.indexOf=Kr,Y.isArguments=pu,Y.isArray=Mo,Y.isBoolean=hu,Y.isDate=vu,Y.isElement=gu,Y.isEmpty=du,Y.isEqual=yu,Y.isError=_u,Y.isFinite=qo,Y.isFunction=wu,Y.isMatch=bu,Y.isNaN=xu,Y.isNative=Au,Y.isNull=ju,Y.isNumber=Eu,Y.isObject=mu,Y.isPlainObject=Po,Y.isRegExp=Ru,Y.isString=Iu,Y.isTypedArray=ku,Y.isUndefined=Ou,Y.kebabCase=Jo,Y.last=Gr,Y.lastIndexOf=Jr,Y.max=$o,Y.min=Bo,Y.noConflict=Ai,Y.noop=ji,Y.now=zo,Y.pad=ui,Y.padLeft=ii,Y.padRight=oi,Y.parseInt=fi,Y.random=Hu,Y.reduce=Ne,Y.reduceRight=We,Y.repeat=ai,Y.result=Gu,Y.runInContext=m,Y.size=$e,Y.snakeCase=Xo,Y.some=Be,Y.sortedIndex=te,Y.sortedLastIndex=re,Y.startsWith=ci,Y.template=li,Y.trim=si,Y.trimLeft=pi,Y.trimRight=hi,Y.trunc=vi,Y.unescape=gi,Y.uniqueId=Oi,Y.words=di,Y.all=Ae,Y.any=Be,Y.contains=xe,Y.detect=Ee,Y.foldl=Ne,Y.foldr=We,Y.head=Mr,Y.include=xe,Y.inject=Ne,xi(Y,function(){var n={};return kt(Y,function(t,r){Y.prototype[r]||(n[r]=t)}),n}(),!1),Y.sample=Ue,Y.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Ue(t,n)}):Ue(this.value())},Y.VERSION=x,Qn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){Y[n].placeholder=Y}),Qn(["filter","map","takeWhile"],function(n,t){var r=t==U;Q.prototype[n]=function(n,e){var u=this.clone(),i=u.filtered,o=u.iteratees||(u.iteratees=[]);return u.filtered=i||r||t==$&&u.dir<0,o.push({iteratee:vr(n,e,3),type:t}),u}}),Qn(["drop","take"],function(n,t){var r=n+"Count",e=n+"While";Q.prototype[n]=function(e){e=null==e?1:vo(+e||0,0);var u=this.clone();if(u.filtered){var i=u[r];u[r]=t?go(i,e):i+e}else{var o=u.views||(u.views=[]);o.push({size:e,type:n+(u.dir<0?"Right":"")})}return u},Q.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Q.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[e](n,t).reverse()}}),Qn(["first","last"],function(n,t){var r="take"+(t?"Right":"");Q.prototype[n]=function(){return this[r](1).value()[0]}}),Qn(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");Q.prototype[n]=function(){return this[r](1)}}),Qn(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?bi:Ei;Q.prototype[n]=function(n){return this[r](e(n))}}),Q.prototype.dropWhile=function(n,t){var r,e,u=this.dir<0;return n=vr(n,t,3),this.filter(function(t,i,o){return r=r&&(u?i<e:i>e),e=i,r||(r=!n(t,i,o))})},Q.prototype.reject=function(n,t){return n=vr(n,t,3),this.filter(function(t,r,e){return!n(t,r,e)})},Q.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=n<0?this.takeRight(-n):this.drop(n);return"undefined"!=typeof t&&(t=+t||0,r=t<0?r.dropRight(-t):r.take(t-n)),r},kt(Q.prototype,function(n,t){var r=/^(?:first|last)$/.test(t);Y.prototype[t]=function(){var e=this.__wrapped__,u=arguments,i=this.__chain__,o=!!this.__actions__.length,f=e instanceof Q,a=f&&!o;if(r&&!i)return a?n.call(e):Y[t](this.value());var c=function(n){var r=[n];return ro.apply(r,u),Y[t].apply(Y,r)};if(f||Mo(e)){var l=a?e:new Q(this),s=n.apply(l,u);if(!r&&(o||s.actions)){var p=s.actions||(s.actions=[]);p.push({func:de,args:[c],thisArg:Y})}return new Z(s,i)}return this.thru(c)}}),Qn(["concat","join","pop","push","shift","sort","splice","unshift"],function(n){var t=Di[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(n);Y.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Q.prototype.clone=Bn,Q.prototype.reverse=Dn,Q.prototype.value=zn,Y.prototype.chain=ye,Y.prototype.reverse=_e,Y.prototype.toString=we,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=me,Y.prototype.collect=Y.prototype.map,Y.prototype.head=Y.prototype.first,Y.prototype.select=Y.prototype.filter,Y.prototype.tail=Y.prototype.rest,Y}var b,x="3.0.0",A=1,j=2,E=4,R=8,I=16,k=32,O=64,C=128,T=256,S=30,N="...",W=150,F=16,U=0,L=1,$=2,B="Expected a function",D="__lodash_placeholder__",z="[object Arguments]",M="[object Array]",q="[object Boolean]",P="[object Date]",K="[object Error]",V="[object Function]",Y="[object Map]",G="[object Number]",J="[object Object]",X="[object RegExp]",Z="[object Set]",H="[object String]",Q="[object WeakMap]",nn="[object ArrayBuffer]",tn="[object Float32Array]",rn="[object Float64Array]",en="[object Int8Array]",un="[object Int16Array]",on="[object Int32Array]",fn="[object Uint8Array]",an="[object Uint8ClampedArray]",cn="[object Uint16Array]",ln="[object Uint32Array]",sn=/\b__p \+= '';/g,pn=/\b(__p \+=) '' \+/g,hn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vn=/&(?:amp|lt|gt|quot|#39|#96);/g,gn=/[&<>"'`]/g,dn=RegExp(vn.source),yn=RegExp(gn.source),_n=/<%-([\s\S]+?)%>/g,wn=/<%([\s\S]+?)%>/g,mn=/<%=([\s\S]+?)%>/g,bn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xn=/\w*$/,An=/^\s*function[ \n\r\t]+\w/,jn=/^0[xX]/,En=/^\[object .+?Constructor\]$/,Rn=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,In=/($^)/,kn=/[.*+?^${}()|[\]\/\\]/g,On=RegExp(kn.source),Cn=/\bthis\b/,Tn=/['\n\r\u2028\u2029\\]/g,Sn=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"{2,}(?="+n+t+")|"+n+"?"+t+"|"+n+"+|[0-9]+","g")}(),Nn=" \t\x0B\f\ufeff\n\r\u2028\u2029",Wn=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Fn=-1,Un={};Un[tn]=Un[rn]=Un[en]=Un[un]=Un[on]=Un[fn]=Un[an]=Un[cn]=Un[ln]=!0,Un[z]=Un[M]=Un[nn]=Un[q]=Un[P]=Un[K]=Un[V]=Un[Y]=Un[G]=Un[J]=Un[X]=Un[Z]=Un[H]=Un[Q]=!1;var Ln={};Ln[z]=Ln[M]=Ln[nn]=Ln[q]=Ln[P]=Ln[tn]=Ln[rn]=Ln[en]=Ln[un]=Ln[on]=Ln[G]=Ln[J]=Ln[X]=Ln[H]=Ln[fn]=Ln[an]=Ln[cn]=Ln[ln]=!0,Ln[K]=Ln[V]=Ln[Y]=Ln[Z]=Ln[Q]=!1;var $n={leading:!1,maxWait:0,trailing:!1},Bn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Dn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},zn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Mn={"function":!0,object:!0},qn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pn=Mn[typeof window]&&window!==(this&&this.window)?window:this,Kn=Mn[typeof exports]&&exports&&!exports.nodeType&&exports,Vn=Mn[typeof module]&&module&&!module.nodeType&&module,Yn=Kn&&Vn&&"object"==typeof global&&global;!Yn||Yn.global!==Yn&&Yn.window!==Yn&&Yn.self!==Yn||(Pn=Yn);var Gn=Vn&&Vn.exports===Kn&&Kn,Jn=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Pn._=Jn,define(function(){return Jn})):Kn&&Vn?Gn?(Vn.exports=Jn)._=Jn:Kn._=Jn:Pn._=Jn}).call(this);
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new o(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.3.1",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var s=t(this),n=s.attr("data-target");n||(n=s.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,""));var a=t(n);e&&e.preventDefault(),a.length||(a=s.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.button"),n="object"==typeof e&&e;s||o.data("bs.button",s=new i(this,n)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.3.1",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,s=o.is("input")?"val":"html",n=o.data();e+="Text",null==n.resetText&&o.data("resetText",o[s]()),setTimeout(t.proxy(function(){o[s](null==n[e]?this.options[e]:n[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.carousel"),n=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:n.slide;s||o.data("bs.carousel",s=new i(this,n)),"number"==typeof e?s.to(e):a?s[a]():n.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.1",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i="prev"==t?-1:1,o=this.getItemIndex(e),s=(o+i)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,o){var s=this.$element.find(".item.active"),n=o||this.getItemForDirection(e,s),a=this.interval,r="next"==e?"left":"right",l="next"==e?"first":"last",h=this;if(!n.length){if(!this.options.wrap)return;n=this.$element.find(".item")[l]()}if(n.hasClass("active"))return this.sliding=!1;var d=n[0],p=t.Event("slide.bs.carousel",{relatedTarget:d,direction:r});if(this.$element.trigger(p),!p.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=t(this.$indicators.children()[this.getItemIndex(n)]);c&&c.addClass("active")}var f=t.Event("slid.bs.carousel",{relatedTarget:d,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(n.addClass(e),n[0].offsetWidth,s.addClass(r),n.addClass(r),s.one("bsTransitionEnd",function(){n.removeClass([e,r].join(" ")).addClass("active"),s.removeClass(["active",r].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger(f)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(f)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var s=function(i){var o,s=t(this),n=t(s.attr("data-target")||(o=s.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var a=t.extend({},n.data(),s.data()),r=s.attr("data-slide-to");r&&(a.interval=!1),e.call(n,a),r&&n.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function i(e){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),n=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!s&&n.toggle&&"show"==e&&(n.toggle=!1),s||i.data("bs.collapse",s=new o(this,n)),"string"==typeof e&&s[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.1",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"),e&&e.transitioning))){var n=t.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),e||s.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(o.TRANSITION_DURATION):s.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var s=t(o);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var s=t(this);s.attr("data-target")||o.preventDefault();var n=e(s),a=n.data("bs.collapse"),r=a?"toggle":t.extend({},s.data(),{trigger:this});i.call(n,r)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(n).each(function(){var o=t(this),s=i(o),n={relatedTarget:this};s.hasClass("open")&&(s.trigger(e=t.Event("hide.bs.dropdown",n)),e.isDefaultPrevented()||(o.attr("aria-expanded","false"),s.removeClass("open").trigger("hidden.bs.dropdown",n)))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var s=".dropdown-backdrop",n='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.1",a.prototype.toggle=function(o){var s=t(this);if(!s.is(".disabled, :disabled")){var n=i(s),a=n.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var r={relatedTarget:this};if(n.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var o=t(this);if(e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled")){var s=i(o),a=s.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&s.find(n).trigger("focus"),o.trigger("click");var r=" li:not(.divider):visible a",l=s.find('[role="menu"]'+r+', [role="listbox"]'+r);if(l.length){var h=l.index(e.target);38==e.which&&h>0&&h--,40==e.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,a.prototype.toggle).on("keydown.bs.dropdown.data-api",n,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var s=t(this),n=s.data("bs.modal"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);n||s.data("bs.modal",n=new i(this,a)),"string"==typeof e?n[e](o):a.show&&n.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.1",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var s=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.options.backdrop&&o.adjustBackdrop(),o.adjustDialog(),s&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.enforceFocus();var n=t.Event("shown.bs.modal",{relatedTarget:e});s?o.$element.find(".modal-dialog").one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(n)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(n)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&s;if(this.$backdrop=t('<div class="modal-backdrop '+s+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},i.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),s=o.attr("href"),n=t(o.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},n.data(),o.data());o.is("a")&&i.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(n,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tooltip"),n="object"==typeof e&&e,a=n&&n.selector;(s||"destroy"!=e)&&(a?(s||o.data("bs.tooltip",s={}),s[a]||(s[a]=new i(this,n))):s||o.data("bs.tooltip",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.3.1",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),n=s.length;n--;){var a=s[n];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var s=this,n=this.tip(),a=this.getUID(this.type);this.setContent(),n.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&n.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(r);h&&(r=r.replace(l,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var d=this.getPosition(),p=n[0].offsetWidth,c=n[0].offsetHeight;if(h){var f=r,u=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(u);r="bottom"==r&&d.bottom+c>g.bottom?"top":"top"==r&&d.top-c<g.top?"bottom":"right"==r&&d.right+p>g.width?"left":"left"==r&&d.left-p<g.left?"right":r,n.removeClass(f).addClass(r)}var v=this.getCalculatedOffset(r,d,p,c);this.applyPlacement(v,r);var m=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),s=o[0].offsetWidth,n=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top=e.top+a,e.left=e.left+r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=n&&(e.top=e.top+n-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-s+l:2*d.top-n+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function o(){"in"!=s.hoverState&&n.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),e&&e()}var s=this,n=this.tip(),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),this.hoverState=null,this},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var n=o?{top:0,left:0}:e.offset(),a={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,a,r,n)},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var s={top:0,left:0};if(!this.$viewport)return s;var n=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-n-a.scroll,l=e.top+n-a.scroll+o;r<a.top?s.top=a.top-r:l>a.top+a.height&&(s.top=a.top+a.height-l)}else{var h=e.left-n,d=e.left+n+i;h<a.left?s.left=a.left-h:d>a.width&&(s.left=a.left+a.width-d)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.popover"),n="object"==typeof e&&e,a=n&&n.selector;(s||"destroy"!=e)&&(a?(s||o.data("bs.popover",s={}),s[a]||(s[a]=new i(this,n))):s||o.data("bs.popover",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.1",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(i,o){var s=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),s=o.data("bs.scrollspy"),n="object"==typeof i&&i;s||o.data("bs.scrollspy",s=new e(this,n)),"string"==typeof i&&s[i]()})}e.VERSION="3.3.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var o=this;this.$body.find(this.selector).map(function(){var o=t(this),s=o.data("target")||o.attr("href"),n=/^#./.test(s)&&t(s);return n&&n.length&&n.is(":visible")&&[[n[e]().top+i,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){o.offsets.push(this[0]),o.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,n=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return a!=(t=n[n.length-1])&&this.activate(t);if(a&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)a!=n[t]&&e>=s[t]&&(!s[t+1]||e<=s[t+1])&&this.activate(n[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tab");s||o.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.1",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),n=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(n),e.trigger(a),!a.isDefaultPrevented()&&!n.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]
}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,o,s){function n(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var a=o.find("> .active"),r=s&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.affix"),n="object"==typeof e&&e;s||o.data("bs.affix",s=new i(this,n)),"string"==typeof e&&s[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.1",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var s=this.$target.scrollTop(),n=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return s<i&&"top";if("bottom"==this.affixed)return null!=i?!(s+this.unpin<=n.top)&&"bottom":!(s+a<=t-o)&&"bottom";var r=null==this.affixed,l=r?s:n.top,h=r?a:e;return null!=i&&l<=i?"top":null!=o&&l+h>=t-o&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,s=o.top,n=o.bottom,a=t("body").height();"object"!=typeof o&&(n=s=o),"function"==typeof s&&(s=o.top(this.$element)),"function"==typeof n&&(n=o.bottom(this.$element));var r=this.getState(a,e,s,n);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-n})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery);
+function(t){"use strict";function e(e){return this.each(function(){var a=t(this),i=t.extend({},r.DEFAULTS,a.data(),"object"==typeof e&&e),o=a.data("bs.validator");(o||"destroy"!=e)&&(o||a.data("bs.validator",o=new r(this,i)),"string"==typeof e&&o[e]())})}var a=':input:not([type="submit"], button):enabled:visible',r=function(e,a){this.$element=t(e),this.options=a,a.errors=t.extend({},r.DEFAULTS.errors,a.errors);for(var i in a.custom)if(!a.errors[i])throw new Error("Missing default error message for custom validator: "+i);t.extend(r.VALIDATORS,a.custom),this.$element.attr("novalidate",!0),this.toggleSubmit(),this.$element.on("input.bs.validator change.bs.validator focusout.bs.validator",t.proxy(this.validateInput,this)),this.$element.on("submit.bs.validator",t.proxy(this.onSubmit,this)),this.$element.find("[data-match]").each(function(){var e=t(this),a=e.data("match");t(a).on("input.bs.validator",function(t){e.val()&&e.trigger("input.bs.validator")})})};r.DEFAULTS={delay:500,html:!1,disable:!0,custom:{},errors:{match:"Does not match",minlength:"Not long enough"},feedback:{success:"glyphicon-ok",error:"glyphicon-warning-sign"}},r.VALIDATORS={"native":function(t){var e=t[0];return!e.checkValidity||e.checkValidity()},match:function(e){var a=e.data("match");return!e.val()||e.val()===t(a).val()},minlength:function(t){var e=t.data("minlength");return!t.val()||t.val().length>=e}},r.prototype.validateInput=function(e){var a=t(e.target),r=a.data("bs.validator.errors");if(a.is('[type="radio"]')&&(a=this.$element.find('input[name="'+a.attr("name")+'"]')),this.$element.trigger(e=t.Event("validate.bs.validator",{relatedTarget:a[0]})),!e.isDefaultPrevented()){var i=this;this.runValidators(a).done(function(o){a.data("bs.validator.errors",o),o.length?i.showErrors(a):i.clearErrors(a),r&&o.toString()===r.toString()||(e=o.length?t.Event("invalid.bs.validator",{relatedTarget:a[0],detail:o}):t.Event("valid.bs.validator",{relatedTarget:a[0],detail:r}),i.$element.trigger(e)),i.toggleSubmit(),i.$element.trigger(t.Event("validated.bs.validator",{relatedTarget:a[0]}))})}},r.prototype.runValidators=function(e){function a(t){return e.data(t+"-error")||e.data("error")||"native"==t&&e[0].validationMessage||n.errors[t]}var i=[],o=t.Deferred(),n=this.options;return e.data("bs.validator.deferred")&&e.data("bs.validator.deferred").reject(),e.data("bs.validator.deferred",o),t.each(r.VALIDATORS,t.proxy(function(t,r){if((e.data(t)||"native"==t)&&!r.call(this,e)){var o=a(t);!~i.indexOf(o)&&i.push(o)}},this)),!i.length&&e.val()&&e.data("remote")?this.defer(e,function(){var r={};r[e.attr("name")]=e.val(),t.get(e.data("remote"),r).fail(function(t,e,r){i.push(a("remote")||r)}).always(function(){o.resolve(i)})}):o.resolve(i),o.promise()},r.prototype.validate=function(){var t=this.options.delay;return this.options.delay=0,this.$element.find(a).trigger("input.bs.validator"),this.options.delay=t,this},r.prototype.showErrors=function(e){var a=this.options.html?"html":"text";this.defer(e,function(){var r=e.closest(".form-group"),i=r.find(".help-block.with-errors"),o=r.find(".form-control-feedback"),n=e.data("bs.validator.errors");n&&n.length&&(n=t("<ul/>").addClass("list-unstyled").append(t.map(n,function(e){return t("<li/>")[a](e)})),void 0===i.data("bs.validator.originalContent")&&i.data("bs.validator.originalContent",i.html()),i.empty().append(n),r.addClass("has-error"),o.length&&o.removeClass(this.options.feedback.success)&&o.addClass(this.options.feedback.error)&&r.removeClass("has-success"))})},r.prototype.clearErrors=function(t){var e=t.closest(".form-group"),a=e.find(".help-block.with-errors"),r=e.find(".form-control-feedback");a.html(a.data("bs.validator.originalContent")),e.removeClass("has-error"),r.length&&r.removeClass(this.options.feedback.error)&&r.addClass(this.options.feedback.success)&&e.addClass("has-success")},r.prototype.hasErrors=function(){function e(){return!!(t(this).data("bs.validator.errors")||[]).length}return!!this.$element.find(a).filter(e).length},r.prototype.isIncomplete=function(){function e(){return"checkbox"===this.type?!this.checked:"radio"===this.type?!t('[name="'+this.name+'"]:checked').length:""===t.trim(this.value)}return!!this.$element.find(a).filter("[required]").filter(e).length},r.prototype.onSubmit=function(t){this.validate(),(this.isIncomplete()||this.hasErrors())&&t.preventDefault()},r.prototype.toggleSubmit=function(){if(this.options.disable){var e=t('button[type="submit"], input[type="submit"]').filter('[form="'+this.$element.attr("id")+'"]').add(this.$element.find('input[type="submit"], button[type="submit"]'));e.toggleClass("disabled",this.isIncomplete()||this.hasErrors()).css({"pointer-events":"all",cursor:"pointer"})}},r.prototype.defer=function(e,a){return a=t.proxy(a,this),this.options.delay?(window.clearTimeout(e.data("bs.validator.timeout")),void e.data("bs.validator.timeout",window.setTimeout(a,this.options.delay))):a()},r.prototype.destroy=function(){return this.$element.removeAttr("novalidate").removeData("bs.validator").off(".bs.validator"),this.$element.find(a).off(".bs.validator").removeData(["bs.validator.errors","bs.validator.deferred"]).each(function(){var e=t(this),a=e.data("bs.validator.timeout");window.clearTimeout(a)&&e.removeData("bs.validator.timeout")}),this.$element.find(".help-block.with-errors").each(function(){var e=t(this),a=e.data("bs.validator.originalContent");e.removeData("bs.validator.originalContent").html(a)}),this.$element.find('input[type="submit"], button[type="submit"]').removeClass("disabled"),this.$element.find(".has-error").removeClass("has-error"),this};var i=t.fn.validator;t.fn.validator=e,t.fn.validator.Constructor=r,t.fn.validator.noConflict=function(){return t.fn.validator=i,this},t(window).on("load",function(){t('form[data-toggle="validator"]').each(function(){var a=t(this);e.call(a,a.data())})})}(jQuery);
!function(e){function t(t){var n=e(this),i=null,o=[],u=null,r=null,c=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),l=3,f=300,a=function(e){o.push({x:e.pageX,y:e.pageY}),o.length>l&&o.shift()},s=function(){r&&clearTimeout(r),c.exitMenu(this)&&(i&&c.deactivate(i),i=null)},h=function(){r&&clearTimeout(r),c.enter(this),v(this)},m=function(){c.exit(this)},x=function(){y(this)},y=function(e){e!=i&&(i&&c.deactivate(i),c.activate(e),i=e)},v=function(e){var t=p();t?r=setTimeout(function(){v(e)},t):y(e)},p=function(){function t(e,t){return(t.y-e.y)/(t.x-e.x)}if(!i||!e(i).is(c.submenuSelector))return 0;var r=n.offset(),l={x:r.left,y:r.top-c.tolerance},a={x:r.left+n.outerWidth(),y:l.y},s={x:r.left,y:r.top+n.outerHeight()+c.tolerance},h={x:r.left+n.outerWidth(),y:s.y},m=o[o.length-1],x=o[0];if(!m)return 0;if(x||(x=m),x.x<r.left||x.x>h.x||x.y<r.top||x.y>h.y)return 0;if(u&&m.x==u.x&&m.y==u.y)return 0;var y=a,v=h;"left"==c.submenuDirection?(y=s,v=l):"below"==c.submenuDirection?(y=h,v=s):"above"==c.submenuDirection&&(y=l,v=a);var p=t(m,y),b=t(m,v),d=t(x,y),g=t(x,v);return p<d&&b>g?(u=m,f):(u=null,0)};n.mouseleave(s).find(c.rowSelector).mouseenter(h).mouseleave(m).click(x),e(document).mousemove(a)}e.fn.menuAim=function(e){return this.each(function(){t.call(this,e)}),this}}(jQuery);
var mejs=mejs||{};mejs.version="2.18.1",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube","video/dailymotion","video/x-dailymotion","application/x-mpegURL"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},mejs.Utility={encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return e.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},getScriptPath:function(e){for(var t,i,n,s,o,a,r=0,l="",u="",d=document.getElementsByTagName("script"),c=d.length,m=e.length;r<c;r++){for(s=d[r].src,i=s.lastIndexOf("/"),i>-1?(a=s.substring(i+1),o=s.substring(0,i+1)):(a=s,o=""),t=0;t<m;t++)if(u=e[t],n=a.indexOf(u),n>-1){l=o;break}if(""!==l)break}return l},calculateTimeFormat:function(e,t,i){e<0&&(e=0),"undefined"==typeof i&&(i=25);var n=t.timeFormat,s=n[0],o=n[1]==n[0],a=o?2:1,r=":",l=Math.floor(e/3600)%24,u=Math.floor(e/60)%60,d=Math.floor(e%60),c=Math.floor((e%1*i).toFixed(3)),m=[[c,"f"],[d,"s"],[u,"m"],[l,"h"]];n.length<a&&(r=n[a]);for(var p=!1,h=0,f=m.length;h<f;h++)if(n.indexOf(m[h][1])!==-1)p=!0;else if(p){for(var v=!1,g=h;g<f;g++)if(m[g][0]>0){v=!0;break}if(!v)break;o||(n=s+n),n=m[h][1]+r+n,o&&(n=m[h][1]+n),s=m[h][1]}t.currentTimeFormat=n},twoDigitsString:function(e){return e<10?"0"+e:String(e)},secondsToTimeCode:function(e,t){e<0&&(e=0);var n=t.framesPerSecond;"undefined"==typeof n&&(n=25);var s=t.currentTimeFormat,o=Math.floor(e/3600)%24,a=Math.floor(e/60)%60,r=Math.floor(e%60),l=Math.floor((e%1*n).toFixed(3));lis=[[l,"f"],[r,"s"],[a,"m"],[o,"h"]];var u=s;for(i=0,len=lis.length;i<len;i++)u=u.replace(lis[i][1]+lis[i][1],this.twoDigitsString(lis[i][0])),u=u.replace(lis[i][1],lis[i][0]);return u},timeCodeToSeconds:function(e,t,i,n){"undefined"==typeof i?i=!1:"undefined"==typeof n&&(n=25);var s=e.split(":"),o=parseInt(s[0],10),a=parseInt(s[1],10),r=parseInt(s[2],10),l=0,u=0;return i&&(l=parseInt(s[3])/n),u=3600*o+60*a+r+l},convertSMPTEtoSeconds:function(e){if("string"!=typeof e)return!1;e=e.replace(",",".");var t=0,i=e.indexOf(".")!=-1?e.split(".")[1].length:0,n=1;e=e.split(":").reverse();for(var s=0;s<e.length;s++)n=1,s>0&&(n=Math.pow(60,s)),t+=Number(e[s])*n;return Number(t.toFixed(i))},removeSwf:function(e){var t=document.getElementById(e);t&&/object|embed/i.test(t.nodeName)&&(mejs.MediaFeatures.isIE?(t.style.display="none",function(){4==t.readyState?mejs.Utility.removeObjectInIE(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},removeObjectInIE:function(e){var t=document.getElementById(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}},mejs.PluginDetector={hasPluginVersion:function(e,t){var i=this.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,i[0]>t[0]||i[0]==t[0]&&i[1]>t[1]||i[0]==t[0]&&i[1]==t[1]&&i[2]>=t[2]},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(e,t,i,n,s){this.plugins[e]=this.detectPlugin(t,i,n,s)},detectPlugin:function(e,t,i,n){var s,o,a,r=[0,0,0];if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[e]){if(s=this.nav.plugins[e].description,s&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[t]||this.nav.mimeTypes[t].enabledPlugin))for(r=s.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),o=0;o<r.length;o++)r[o]=parseInt(r[o].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{a=new ActiveXObject(i),a&&(r=n(a))}catch(l){}return r}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[],i=e.GetVariable("$version");return i&&(i=i.split(" ")[1].split(","),t=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]),t}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(e){var t=[0,0,0,0],i=function(e,t,i,n){for(;e.isVersionSupported(t[0]+"."+t[1]+"."+t[2]+"."+t[3]);)t[i]+=n;t[i]-=n};return i(e,t,0,1),i(e,t,1,1),i(e,t,2,1e4),i(e,t,2,1e3),i(e,t,2,100),i(e,t,2,10),i(e,t,2,1),i(e,t,3,1),t}),mejs.MediaFeatures={init:function(){var e,t,i=this,n=document,s=mejs.PluginDetector.nav,o=mejs.PluginDetector.ua.toLowerCase(),a=["source","track","audio","video"];i.isiPad=null!==o.match(/ipad/i),i.isiPhone=null!==o.match(/iphone/i),i.isiOS=i.isiPhone||i.isiPad,i.isAndroid=null!==o.match(/android/i),i.isBustedAndroid=null!==o.match(/android 2\.[12]/),i.isBustedNativeHTTPS="https:"===location.protocol&&(null!==o.match(/android [12]\./)||null!==o.match(/macintosh.* version.* safari/)),i.isIE=s.appName.toLowerCase().indexOf("microsoft")!=-1||null!==s.appName.toLowerCase().match(/trident/gi),i.isChrome=null!==o.match(/chrome/gi),i.isChromium=null!==o.match(/chromium/gi),i.isFirefox=null!==o.match(/firefox/gi),i.isWebkit=null!==o.match(/webkit/gi),i.isGecko=null!==o.match(/gecko/gi)&&!i.isWebkit&&!i.isIE,i.isOpera=null!==o.match(/opera/gi),i.hasTouch="ontouchstart"in window,i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;for(e=0;e<a.length;e++)t=document.createElement(a[e]);i.supportsMediaTag="undefined"!=typeof t.canPlayType||i.isBustedAndroid;try{t.canPlayType("video/mp4")}catch(r){i.supportsMediaTag=!1}i.hasSemiNativeFullScreen="undefined"!=typeof t.webkitEnterFullscreen,i.hasNativeFullscreen="undefined"!=typeof t.requestFullscreen,i.hasWebkitNativeFullScreen="undefined"!=typeof t.webkitRequestFullScreen,i.hasMozNativeFullScreen="undefined"!=typeof t.mozRequestFullScreen,i.hasMsNativeFullScreen="undefined"!=typeof t.msRequestFullscreen,i.hasTrueNativeFullScreen=i.hasWebkitNativeFullScreen||i.hasMozNativeFullScreen||i.hasMsNativeFullScreen,i.nativeFullScreenEnabled=i.hasTrueNativeFullScreen,i.hasMozNativeFullScreen?i.nativeFullScreenEnabled=document.mozFullScreenEnabled:i.hasMsNativeFullScreen&&(i.nativeFullScreenEnabled=document.msFullscreenEnabled),i.isChrome&&(i.hasSemiNativeFullScreen=!1),i.hasTrueNativeFullScreen&&(i.fullScreenEventName="",i.hasWebkitNativeFullScreen?i.fullScreenEventName="webkitfullscreenchange":i.hasMozNativeFullScreen?i.fullScreenEventName="mozfullscreenchange":i.hasMsNativeFullScreen&&(i.fullScreenEventName="MSFullscreenChange"),i.isFullScreen=function(){return i.hasMozNativeFullScreen?n.mozFullScreen:i.hasWebkitNativeFullScreen?n.webkitIsFullScreen:i.hasMsNativeFullScreen?null!==n.msFullscreenElement:void 0},i.requestFullScreen=function(e){i.hasWebkitNativeFullScreen?e.webkitRequestFullScreen():i.hasMozNativeFullScreen?e.mozRequestFullScreen():i.hasMsNativeFullScreen&&e.msRequestFullscreen()},i.cancelFullScreen=function(){i.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():i.hasMozNativeFullScreen?document.mozCancelFullScreen():i.hasMsNativeFullScreen&&document.msExitFullscreen()}),i.hasSemiNativeFullScreen&&o.match(/mac os x 10_5/i)&&(i.hasNativeFullScreen=!1,i.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(e){this.currentTime=e},setMuted:function(e){this.muted=e},setVolume:function(e){this.volume=e},stop:function(){this.pause()},setSrc:function(e){for(var t=this.getElementsByTagName("source");t.length>0;)this.removeChild(t[0]);if("string"==typeof e)this.src=e;else{var i,n;for(i=0;i<e.length;i++)if(n=e[i],this.canPlayType(n.type)){this.src=n.src;break}}},setVideoSize:function(e,t){this.width=e,this.height=t}},mejs.PluginMediaElement=function(e,t,i){this.id=e,this.pluginType=t,this.src=i,this.events={},this.attributes={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(e){var t,i,n,s=mejs.plugins[this.pluginType];for(t=0;t<s.length;t++)if(n=s[t],mejs.PluginDetector.hasPluginVersion(this.pluginType,n.version))for(i=0;i<n.types.length;i++)if(e==n.types[i])return"probably";return""},positionFullscreenButton:function(e,t,i){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(e),Math.floor(t),i)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(e){if("string"==typeof e)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(e)),this.src=mejs.Utility.absolutizeUrl(e);else{var t,i;for(t=0;t<e.length;t++)if(i=e[t],this.canPlayType(i.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(i.src)),this.src=mejs.Utility.absolutizeUrl(i.src);break}}},setCurrentTime:function(e){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.seekTo(e):this.pluginApi.setCurrentTime(e),this.currentTime=e)},setVolume:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*e):this.pluginApi.setVolume(e),this.volume=e)},setMuted:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?(e?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=e,this.dispatchEvent({type:"volumechange"})):this.pluginApi.setMuted(e),this.muted=e)},setVideoSize:function(e,t){this.pluginElement&&this.pluginElement.style&&(this.pluginElement.style.width=e+"px",this.pluginElement.style.height=t+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(e,t)},setFullscreen:function(e){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(e)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(e,t,i){this.events[e]=this.events[e]||[],this.events[e].push(t)},removeEventListener:function(e,t){if(!e)return this.events={},!0;var i=this.events[e];if(!i)return!0;if(!t)return this.events[e]=[],!0;for(var n=0;n<i.length;n++)if(i[n]===t)return this.events[e].splice(n,1),!0;return!1},dispatchEvent:function(e){var t,i=this.events[e.type];if(i)for(t=0;t<i.length;t++)i[t].apply(this,[e])},hasAttribute:function(e){return e in this.attributes},removeAttribute:function(e){delete this.attributes[e]},getAttribute:function(e){return this.hasAttribute(e)?this.attributes[e]:""},setAttribute:function(e,t){this.attributes[e]=t},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id),mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(e,t,i){this.pluginMediaElements[e]=t,this.htmlMediaElements[e]=i},unregisterPluginElement:function(e){delete this.pluginMediaElements[e],delete this.htmlMediaElements[e]},initPlugin:function(e){var t=this.pluginMediaElements[e],i=this.htmlMediaElements[e];if(t){switch(t.pluginType){case"flash":t.pluginElement=t.pluginApi=document.getElementById(e);break;case"silverlight":t.pluginElement=document.getElementById(t.id),t.pluginApi=t.pluginElement.Content.MediaElementJS}null!=t.pluginApi&&t.success&&t.success(t,i)}},fireEvent:function(e,t,i){var n,s,o,a=this.pluginMediaElements[e];if(a){n={type:t,target:a};for(s in i)a[s]=i[s],n[s]=i[s];o=i.bufferedTime||0,n.target.buffered=n.buffered={start:function(e){return 0},end:function(e){return o},length:1},a.dispatchEvent(n)}}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,httpsBasicAuthSite:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",flashScriptAccess:"sameDomain",enablePluginSmoothing:!1,enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(e,t){return mejs.HtmlMediaElementShim.create(e,t)},mejs.HtmlMediaElementShim={create:function(e,t){var i,n,s=mejs.MediaElementDefaults,o="string"==typeof e?document.getElementById(e):e,a=o.tagName.toLowerCase(),r="audio"===a||"video"===a,l=r?o.getAttribute("src"):o.getAttribute("href"),u=o.getAttribute("poster"),d=o.getAttribute("autoplay"),c=o.getAttribute("preload"),m=o.getAttribute("controls");for(n in t)s[n]=t[n];return l="undefined"==typeof l||null===l||""==l?null:l,u="undefined"==typeof u||null===u?"":u,c="undefined"==typeof c||null===c||"false"===c?"none":c,d=!("undefined"==typeof d||null===d||"false"===d),m=!("undefined"==typeof m||null===m||"false"===m),i=this.determinePlayback(o,s,mejs.MediaFeatures.supportsMediaTag,r,l),i.url=null!==i.url?mejs.Utility.absolutizeUrl(i.url):"","native"==i.method?(mejs.MediaFeatures.isBustedAndroid&&(o.src=i.url,o.addEventListener("click",function(){o.play()},!1)),this.updateNative(i,s,d,c)):""!==i.method?this.createPlugin(i,s,u,d,c,m):(this.createErrorMessage(i,s,u),this)},determinePlayback:function(e,t,i,n,s){var o,a,r,l,u,d,c,m,p,h,f,v=[],g={method:"",url:"",htmlMediaElement:e,isVideo:"audio"!=e.tagName.toLowerCase()};if("undefined"!=typeof t.type&&""!==t.type)if("string"==typeof t.type)v.push({type:t.type,url:s});else for(o=0;o<t.type.length;o++)v.push({type:t.type[o],url:s});else if(null!==s)d=this.formatType(s,e.getAttribute("type")),v.push({type:d,url:s});else for(o=0;o<e.childNodes.length;o++)u=e.childNodes[o],1==u.nodeType&&"source"==u.tagName.toLowerCase()&&(s=u.getAttribute("src"),d=this.formatType(s,u.getAttribute("type")),f=u.getAttribute("media"),(!f||!window.matchMedia||window.matchMedia&&window.matchMedia(f).matches)&&v.push({type:d,url:s}));if(!n&&v.length>0&&null!==v[0].url&&this.getTypeFromFile(v[0].url).indexOf("audio")>-1&&(g.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(e.canPlayType=function(e){return null!==e.match(/video\/(mp4|m4v)/gi)?"maybe":""}),mejs.MediaFeatures.isChromium&&(e.canPlayType=function(e){return null!==e.match(/video\/(webm|ogv|ogg)/gi)?"maybe":""}),i&&("auto"===t.mode||"auto_plugin"===t.mode||"native"===t.mode)&&(!mejs.MediaFeatures.isBustedNativeHTTPS||t.httpsBasicAuthSite!==!0)){for(n||(h=document.createElement(g.isVideo?"video":"audio"),e.parentNode.insertBefore(h,e),e.style.display="none",g.htmlMediaElement=e=h),o=0;o<v.length;o++)if("video/m3u8"==v[o].type||""!==e.canPlayType(v[o].type).replace(/no/,"")||""!==e.canPlayType(v[o].type.replace(/mp3/,"mpeg")).replace(/no/,"")||""!==e.canPlayType(v[o].type.replace(/m4a/,"mp4")).replace(/no/,"")){g.method="native",g.url=v[o].url;break}if("native"===g.method&&(null!==g.url&&(e.src=g.url),"auto_plugin"!==t.mode))return g}if("auto"===t.mode||"auto_plugin"===t.mode||"shim"===t.mode)for(o=0;o<v.length;o++)for(d=v[o].type,a=0;a<t.plugins.length;a++)for(c=t.plugins[a],m=mejs.plugins[c],r=0;r<m.length;r++)if(p=m[r],null==p.version||mejs.PluginDetector.hasPluginVersion(c,p.version))for(l=0;l<p.types.length;l++)if(d.toLowerCase()==p.types[l].toLowerCase())return g.method=c,g.url=v[o].url,g;return"auto_plugin"===t.mode&&"native"===g.method?g:(""===g.method&&v.length>0&&(g.url=v[0].url),g)},formatType:function(e,t){return e&&!t?this.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){e=e.split("?")[0];var t=e.substring(e.lastIndexOf(".")+1).toLowerCase(),i=/(mp4|m4v|ogg|ogv|m3u8|webm|webmv|flv|wmv|mpeg|mov)/gi.test(t)?"video/":"audio/";return this.getTypeFromExtension(t,i)},getTypeFromExtension:function(e,t){switch(t=t||"",e){case"mp4":case"m4v":case"m4a":case"f4v":case"f4a":return t+"mp4";case"flv":return t+"x-flv";case"webm":case"webma":case"webmv":return t+"webm";case"ogg":case"oga":case"ogv":return t+"ogg";case"m3u8":return"application/x-mpegurl";case"ts":return t+"mp2t";default:return t+e}},createErrorMessage:function(e,t,i){var n=e.htmlMediaElement,s=document.createElement("div"),o=t.customError;s.className="me-cannotplay";try{s.style.width=n.width+"px",s.style.height=n.height+"px"}catch(a){}o||(o='<a href="'+e.url+'">',""!==i&&(o+='<img src="'+i+'" width="100%" height="100%" alt="" />'),o+="<span>"+mejs.i18n.t("Download File")+"</span></a>"),s.innerHTML=o,n.parentNode.insertBefore(s,n),n.style.display="none",t.error(n)},createPlugin:function(e,t,i,n,s,o){var a,r,l,u=e.htmlMediaElement,d=1,c=1,m="me_"+e.method+"_"+mejs.meIndex++,p=new mejs.PluginMediaElement(m,e.method,e.url),h=document.createElement("div");p.tagName=u.tagName;for(var f=0;f<u.attributes.length;f++){var v=u.attributes[f];v.specified&&p.setAttribute(v.name,v.value)}for(r=u.parentNode;null!==r&&null!=r.tagName&&"body"!==r.tagName.toLowerCase()&&null!=r.parentNode&&null!=r.parentNode.tagName&&null!=r.parentNode.constructor&&"ShadowRoot"===r.parentNode.constructor.name;){if("p"===r.parentNode.tagName.toLowerCase()){r.parentNode.parentNode.insertBefore(r,r.parentNode);break}r=r.parentNode}switch(e.isVideo?(d=t.pluginWidth>0?t.pluginWidth:t.videoWidth>0?t.videoWidth:null!==u.getAttribute("width")?u.getAttribute("width"):t.defaultVideoWidth,c=t.pluginHeight>0?t.pluginHeight:t.videoHeight>0?t.videoHeight:null!==u.getAttribute("height")?u.getAttribute("height"):t.defaultVideoHeight,d=mejs.Utility.encodeUrl(d),c=mejs.Utility.encodeUrl(c)):t.enablePluginDebug&&(d=320,c=240),p.success=t.success,mejs.MediaPluginBridge.registerPluginElement(m,p,u),h.className="me-plugin",h.id=m+"_container",e.isVideo?u.parentNode.insertBefore(h,u):document.body.insertBefore(h,document.body.childNodes[0]),l=["id="+m,"jsinitfunction=mejs.MediaPluginBridge.initPlugin","jscallbackfunction=mejs.MediaPluginBridge.fireEvent","isvideo="+(e.isVideo?"true":"false"),"autoplay="+(n?"true":"false"),"preload="+s,"width="+d,"startvolume="+t.startVolume,"timerrate="+t.timerRate,"flashstreamer="+t.flashStreamer,"height="+c,"pseudostreamstart="+t.pseudoStreamingStartQueryParam],null!==e.url&&("flash"==e.method?l.push("file="+mejs.Utility.encodeUrl(e.url)):l.push("file="+e.url)),t.enablePluginDebug&&l.push("debug=true"),t.enablePluginSmoothing&&l.push("smoothing=true"),t.enablePseudoStreaming&&l.push("pseudostreaming=true"),o&&l.push("controls=true"),t.pluginVars&&(l=l.concat(t.pluginVars)),e.method){case"silverlight":h.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+m+'" name="'+m+'" width="'+d+'" height="'+c+'" class="mejs-shim"><param name="initParams" value="'+l.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+t.pluginPath+t.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(a=document.createElement("div"),h.appendChild(a),a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+m+'" width="'+d+'" height="'+c+'" class="mejs-shim"><param name="movie" value="'+t.pluginPath+t.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+l.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+t.flashScriptAccess+'" /><param name="allowFullScreen" value="true" /><param name="scale" value="default" /></object>'):h.innerHTML='<embed id="'+m+'" name="'+m+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="'+t.flashScriptAccess+'" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+t.pluginPath+t.flashName+'" flashvars="'+l.join("&")+'" width="'+d+'" height="'+c+'" scale="default"class="mejs-shim"></embed>';break;case"youtube":var g;e.url.lastIndexOf("youtu.be")!=-1?(g=e.url.substr(e.url.lastIndexOf("/")+1),g.indexOf("?")!=-1&&(g=g.substr(0,g.indexOf("?")))):g=e.url.substr(e.url.lastIndexOf("=")+1),youtubeSettings={container:h,containerId:h.id,pluginMediaElement:p,pluginId:m,videoId:g,height:c,width:d},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings,t):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":var y=m+"_player";if(p.vimeoid=e.url.substr(e.url.lastIndexOf("/")+1),h.innerHTML='<iframe src="//player.vimeo.com/video/'+p.vimeoid+"?api=1&portrait=0&byline=0&title=0&player_id="+y+'" width="'+d+'" height="'+c+'" frameborder="0" class="mejs-shim" id="'+y+'" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',"function"==typeof $f){var b=$f(h.childNodes[0]);b.addEvent("ready",function(){function e(e,t,i,n){var s={type:i,target:t};"timeupdate"==i&&(t.currentTime=s.currentTime=n.seconds,t.duration=s.duration=n.duration),t.dispatchEvent(s)}b.playVideo=function(){b.api("play")},b.stopVideo=function(){b.api("unload")},b.pauseVideo=function(){b.api("pause")},b.seekTo=function(e){b.api("seekTo",e)},b.setVolume=function(e){b.api("setVolume",e)},b.setMuted=function(e){e?(b.lastVolume=b.api("getVolume"),b.api("setVolume",0)):(b.api("setVolume",b.lastVolume),delete b.lastVolume)},b.addEvent("play",function(){e(b,p,"play"),e(b,p,"playing")}),b.addEvent("pause",function(){e(b,p,"pause")}),b.addEvent("finish",function(){e(b,p,"ended")}),b.addEvent("playProgress",function(t){e(b,p,"timeupdate",t)}),p.pluginElement=h,p.pluginApi=b,mejs.MediaPluginBridge.initPlugin(m)})}else console.warn("You need to include froogaloop for vimeo to work")}return u.style.display="none",u.removeAttribute("autoplay"),p},updateNative:function(e,t,i,n){var s,o=e.htmlMediaElement;for(s in mejs.HtmlMediaElement)o[s]=mejs.HtmlMediaElement[s];return t.success(o,o),o}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var e=document.createElement("script");e.src="//www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(e){this.isLoaded?this.createIframe(e):(this.loadIframeApi(),this.iframeQueue.push(e))},createIframe:function(e){var t=e.pluginMediaElement,i=new YT.Player(e.containerId,{height:e.height,width:e.width,videoId:e.videoId,playerVars:{controls:0},events:{onReady:function(){e.pluginMediaElement.pluginApi=i,mejs.MediaPluginBridge.initPlugin(e.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(i,t,"timeupdate")},250)},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,i,t)}}})},createEvent:function(e,t,i){var n={type:i,target:t};if(e&&e.getDuration){t.currentTime=n.currentTime=e.getCurrentTime(),t.duration=n.duration=e.getDuration(),n.paused=t.paused,n.ended=t.ended,n.muted=e.isMuted(),n.volume=e.getVolume()/100,n.bytesTotal=e.getVideoBytesTotal(),n.bufferedBytes=e.getVideoBytesLoaded();var s=n.bufferedBytes/n.bytesTotal*n.duration;n.target.buffered=n.buffered={start:function(e){return 0},end:function(e){return s},length:1}}t.dispatchEvent(n)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var e=this.iframeQueue.pop();this.createIframe(e)}},flashPlayers:{},createFlash:function(e){this.flashPlayers[e.pluginId]=e;var t,i="//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+e.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(t=document.createElement("div"),e.container.appendChild(t),t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e.pluginId+'" width="'+e.width+'" height="'+e.height+'" class="mejs-shim"><param name="movie" value="'+i+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+options.flashScriptAccess+'" /><param name="allowFullScreen" value="true" /></object>'):e.container.innerHTML='<object type="application/x-shockwave-flash" id="'+e.pluginId+'" data="'+i+'" width="'+e.width+'" height="'+e.height+'" style="visibility: visible; " class="mejs-shim"><param name="allowScriptAccess" value="'+options.flashScriptAccess+'"><param name="wmode" value="transparent"></object>'},flashReady:function(e){var t=this.flashPlayers[e],i=document.getElementById(e),n=t.pluginMediaElement;n.pluginApi=n.pluginElement=i,mejs.MediaPluginBridge.initPlugin(e),i.cueVideoById(t.videoId);var s=t.containerId+"_callback";window[s]=function(e){mejs.YouTubeApi.handleStateChange(e,i,n)},i.addEventListener("onStateChange",s),setInterval(function(){mejs.YouTubeApi.createEvent(i,n,"timeupdate")},250),mejs.YouTubeApi.createEvent(i,n,"canplay")},handleStateChange:function(e,t,i){switch(e){case-1:i.paused=!0,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"loadedmetadata");break;case 0:i.paused=!1,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"ended");break;case 1:i.paused=!1,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"play"),mejs.YouTubeApi.createEvent(t,i,"playing");break;case 2:i.paused=!0,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"pause");break;case 3:mejs.YouTubeApi.createEvent(t,i,"progress");break;case 5:}}},window.onYouTubePlayerAPIReady=function(){mejs.YouTubeApi.iFrameReady()},window.onYouTubePlayerReady=function(e){mejs.YouTubeApi.flashReady(e)},window.mejs=mejs,window.MediaElement=mejs.MediaElement,function(e,t,i){"use strict";var n={locale:{language:t.i18n&&t.i18n.locale.language||"",strings:t.i18n&&t.i18n.locale.strings||{}},ietf_lang_regex:/^(x\-)?[a-z]{2,}(\-\w{2,})?(\-\w{2,})?$/,methods:{}};n.getLanguage=function(){var e=n.locale.language||window.navigator.userLanguage||window.navigator.language;return n.ietf_lang_regex.exec(e)?e:null},"undefined"!=typeof mejsL10n&&(n.locale.language=mejsL10n.language),n.methods.checkPlain=function(e){var t,i,n={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};e=String(e);for(t in n)n.hasOwnProperty(t)&&(i=new RegExp(t,"g"),e=e.replace(i,n[t]));return e},n.methods.t=function(e,t){return n.locale.strings&&n.locale.strings[t.context]&&n.locale.strings[t.context][e]&&(e=n.locale.strings[t.context][e]),n.methods.checkPlain(e)},n.t=function(e,t){if("string"==typeof e&&e.length>0){var i=n.getLanguage();return t=t||{context:i},n.methods.t(e,t)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."}},t.i18n=n}(document,mejs),function(e,t){"use strict";"undefined"!=typeof mejsL10n&&(e[mejsL10n.language]=mejsL10n.strings)}(mejs.i18n.locale.strings),"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof Zepto?(mejs.$=Zepto,Zepto.fn.outerWidth=function(e){var t=$(this).width();return e&&(t+=parseInt($(this).css("margin-right"),10),t+=parseInt($(this).css("margin-left"),10)),t}):"undefined"!=typeof ender&&(mejs.$=ender),function(e){mejs.MepDefaults={poster:"",showPosterWhenEnded:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(e){return.05*e.duration},defaultSeekForwardInterval:function(e){return.05*e.duration},setDimensions:!0,audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!0,timeFormat:"",alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(e,t){t.paused||t.ended?t.play():t.pause()}},{keys:[38],action:function(e,t){e.container.find(".mejs-volume-slider").css("display","block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.min(t.volume+.1,1);t.setVolume(i)}},{keys:[40],action:function(e,t){e.container.find(".mejs-volume-slider").css("display","block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.max(t.volume-.1,0);t.setVolume(i)}},{keys:[37,227],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.max(t.currentTime-e.options.defaultSeekBackwardInterval(t),0);t.setCurrentTime(i)}}},{keys:[39,228],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.min(t.currentTime+e.options.defaultSeekForwardInterval(t),t.duration);t.setCurrentTime(i)}}},{keys:[70],action:function(e,t){"undefined"!=typeof e.enterFullScreen&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}},{keys:[77],action:function(e,t){e.container.find(".mejs-volume-slider").css("display","block"),e.isVideo&&(e.showControls(),e.startControlsTimer()),e.media.muted?e.setMuted(!1):e.setMuted(!0)}}]},mejs.mepIndex=0,mejs.players={},mejs.MediaElementPlayer=function(t,i){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(t,i);var n=this;return n.$media=n.$node=e(t),n.node=n.media=n.$media[0],n.node?"undefined"!=typeof n.node.player?n.node.player:("undefined"==typeof i&&(i=n.$node.data("mejsoptions")),n.options=e.extend({},mejs.MepDefaults,i),n.options.timeFormat||(n.options.timeFormat="mm:ss",n.options.alwaysShowHours&&(n.options.timeFormat="hh:mm:ss"),n.options.showTimecodeFrameCount&&(n.options.timeFormat+=":ff")),mejs.Utility.calculateTimeFormat(0,n.options,n.options.framesPerSecond||25),n.id="mep_"+mejs.mepIndex++,mejs.players[n.id]=n,n.init(),n):void 0},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var t=this,i=mejs.MediaFeatures,n=e.extend(!0,{},t.options,{success:function(e,i){t.meReady(e,i)},error:function(e){t.handleError(e)}}),s=t.media.tagName.toLowerCase();if(t.isDynamic="audio"!==s&&"video"!==s,t.isDynamic?t.isVideo=t.options.isVideo:t.isVideo="audio"!==s&&t.options.isVideo,i.isiPad&&t.options.iPadUseNativeControls||i.isiPhone&&t.options.iPhoneUseNativeControls)t.$media.attr("controls","controls"),i.isiPad&&null!==t.media.getAttribute("autoplay")&&t.play();else if(i.isAndroid&&t.options.AndroidUseNativeControls);else{t.$media.removeAttr("controls");var o=t.isVideo?mejs.i18n.t("Video Player"):mejs.i18n.t("Audio Player");if(e('<span class="mejs-offscreen">'+o+"</span>").insertBefore(t.$media),t.container=e('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?"svg":"no-svg")+'" tabindex="0" role="application" aria-label="'+o+'"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(t.$media[0].className).insertBefore(t.$media).focus(function(e){
if(!t.controlsAreVisible){t.showControls(!0);var i=t.container.find(".mejs-playpause-button > button");i.focus()}}),t.container.addClass((i.isAndroid?"mejs-android ":"")+(i.isiOS?"mejs-ios ":"")+(i.isiPad?"mejs-ipad ":"")+(i.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio ")),i.isiOS){var a=t.$media.clone();t.container.find(".mejs-mediaelement").append(a),t.$media.remove(),t.$node=t.$media=a,t.node=t.media=a[0]}else t.container.find(".mejs-mediaelement").append(t.$media);t.node.player=t,t.controls=t.container.find(".mejs-controls"),t.layers=t.container.find(".mejs-layers");var r=t.isVideo?"video":"audio",l=r.substring(0,1).toUpperCase()+r.substring(1);t.options[r+"Width"]>0||t.options[r+"Width"].toString().indexOf("%")>-1?t.width=t.options[r+"Width"]:""!==t.media.style.width&&null!==t.media.style.width?t.width=t.media.style.width:null!==t.media.getAttribute("width")?t.width=t.$media.attr("width"):t.width=t.options["default"+l+"Width"],t.options[r+"Height"]>0||t.options[r+"Height"].toString().indexOf("%")>-1?t.height=t.options[r+"Height"]:""!==t.media.style.height&&null!==t.media.style.height?t.height=t.media.style.height:null!==t.$media[0].getAttribute("height")?t.height=t.$media.attr("height"):t.height=t.options["default"+l+"Height"],t.setPlayerSize(t.width,t.height),n.pluginWidth=t.width,n.pluginHeight=t.height}mejs.MediaElement(t.$media[0],n),"undefined"!=typeof t.container&&t.controlsAreVisible&&t.container.trigger("controlsshown")},showControls:function(e){var t=this;e="undefined"==typeof e||e,t.controlsAreVisible||(e?(t.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0,t.container.trigger("controlsshown")}),t.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0})):(t.controls.css("visibility","visible").css("display","block"),t.container.find(".mejs-control").css("visibility","visible").css("display","block"),t.controlsAreVisible=!0,t.container.trigger("controlsshown")),t.setControlsSize())},hideControls:function(t){var i=this;t="undefined"==typeof t||t,!i.controlsAreVisible||i.options.alwaysShowControls||i.keyboardAction||(t?(i.controls.stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1,i.container.trigger("controlshidden")}),i.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block")})):(i.controls.css("visibility","hidden").css("display","block"),i.container.find(".mejs-control").css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1,i.container.trigger("controlshidden")))},controlsTimer:null,startControlsTimer:function(e){var t=this;e="undefined"!=typeof e?e:1500,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)},killControlsTimer:function(e){var t=this;null!==t.controlsTimer&&(clearTimeout(t.controlsTimer),delete t.controlsTimer,t.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){var e=this;e.killControlsTimer(),e.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){var e=this;e.showControls(!1),e.controlsEnabled=!0},meReady:function(t,i){var n,s,o=this,a=mejs.MediaFeatures,r=i.getAttribute("autoplay"),l=!("undefined"==typeof r||null===r||"false"===r);if(!o.created){if(o.created=!0,o.media=t,o.domNode=i,!(a.isAndroid&&o.options.AndroidUseNativeControls||a.isiPad&&o.options.iPadUseNativeControls||a.isiPhone&&o.options.iPhoneUseNativeControls)){o.buildposter(o,o.controls,o.layers,o.media),o.buildkeyboard(o,o.controls,o.layers,o.media),o.buildoverlays(o,o.controls,o.layers,o.media),o.findTracks();for(n in o.options.features)if(s=o.options.features[n],o["build"+s])try{o["build"+s](o,o.controls,o.layers,o.media)}catch(u){}o.container.trigger("controlsready"),o.setPlayerSize(o.width,o.height),o.setControlsSize(),o.isVideo&&(mejs.MediaFeatures.hasTouch?o.$media.bind("touchstart",function(){o.controlsAreVisible?o.hideControls(!1):o.controlsEnabled&&o.showControls(!1)}):(o.clickToPlayPauseCallback=function(){o.options.clickToPlayPause&&(o.media.paused?o.play():o.pause())},o.media.addEventListener("click",o.clickToPlayPauseCallback,!1),o.container.bind("mouseenter mouseover",function(){o.controlsEnabled&&(o.options.alwaysShowControls||(o.killControlsTimer("enter"),o.showControls(),o.startControlsTimer(2500)))}).bind("mousemove",function(){o.controlsEnabled&&(o.controlsAreVisible||o.showControls(),o.options.alwaysShowControls||o.startControlsTimer(2500))}).bind("mouseleave",function(){o.controlsEnabled&&(o.media.paused||o.options.alwaysShowControls||o.startControlsTimer(1e3))})),o.options.hideVideoControlsOnLoad&&o.hideControls(!1),l&&!o.options.alwaysShowControls&&o.hideControls(),o.options.enableAutosize&&o.media.addEventListener("loadedmetadata",function(e){o.options.videoHeight<=0&&null===o.domNode.getAttribute("height")&&!isNaN(e.target.videoHeight)&&(o.setPlayerSize(e.target.videoWidth,e.target.videoHeight),o.setControlsSize(),o.media.setVideoSize(e.target.videoWidth,e.target.videoHeight))},!1)),t.addEventListener("play",function(){var e;for(e in mejs.players){var t=mejs.players[e];t.id==o.id||!o.options.pauseOtherPlayers||t.paused||t.ended||t.pause(),t.hasFocus=!1}o.hasFocus=!0},!1),o.media.addEventListener("ended",function(t){if(o.options.autoRewind)try{o.media.setCurrentTime(0),window.setTimeout(function(){e(o.container).find(".mejs-overlay-loading").parent().hide()},20)}catch(i){}o.media.pause(),o.setProgressRail&&o.setProgressRail(),o.setCurrentRail&&o.setCurrentRail(),o.options.loop?o.play():!o.options.alwaysShowControls&&o.controlsEnabled&&o.showControls()},!1),o.media.addEventListener("loadedmetadata",function(e){o.updateDuration&&o.updateDuration(),o.updateCurrent&&o.updateCurrent(),o.isFullScreen||(o.setPlayerSize(o.width,o.height),o.setControlsSize())},!1);var d=null;o.media.addEventListener("timeupdate",function(){d!==this.duration&&(d=this.duration,mejs.Utility.calculateTimeFormat(d,o.options,o.options.framesPerSecond||25))},!1),o.container.focusout(function(t){if(t.relatedTarget){var i=e(t.relatedTarget);o.keyboardAction&&0===i.parents(".mejs-container").length&&(o.keyboardAction=!1,o.hideControls(!0))}}),setTimeout(function(){o.setPlayerSize(o.width,o.height),o.setControlsSize()},50),o.globalBind("resize",function(){o.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||o.setPlayerSize(o.width,o.height),o.setControlsSize()}),"youtube"==o.media.pluginType&&(a.isiOS||a.isAndroid)&&o.container.find(".mejs-overlay-play").hide()}l&&"native"==t.pluginType&&o.play(),o.options.success&&("string"==typeof o.options.success?window[o.options.success](o.media,o.domNode,o):o.options.success(o.media,o.domNode,o))}},handleError:function(e){var t=this;t.controls.hide(),t.options.error&&t.options.error(e)},setPlayerSize:function(t,i){var n=this;if(!n.options.setDimensions)return!1;if("undefined"!=typeof t&&(n.width=t),"undefined"!=typeof i&&(n.height=i),n.height.toString().indexOf("%")>0||"none"!==n.$node.css("max-width")&&"t.width"!==n.$node.css("max-width")||n.$node[0].currentStyle&&"100%"===n.$node[0].currentStyle.maxWidth){var s=function(){return n.isVideo?n.media.videoWidth&&n.media.videoWidth>0?n.media.videoWidth:null!==n.media.getAttribute("width")?n.media.getAttribute("width"):n.options.defaultVideoWidth:n.options.defaultAudioWidth}(),o=function(){return n.isVideo?n.media.videoHeight&&n.media.videoHeight>0?n.media.videoHeight:null!==n.media.getAttribute("height")?n.media.getAttribute("height"):n.options.defaultVideoHeight:n.options.defaultAudioHeight}(),a=n.container.parent().closest(":visible").width(),r=n.container.parent().closest(":visible").height(),l=n.isVideo||!n.options.autosizeProgress?parseInt(a*o/s,10):o;isNaN(l)&&(l=r),n.container.parent().length>0&&"body"===n.container.parent()[0].tagName.toLowerCase()&&(a=e(window).width(),l=e(window).height()),l&&a&&(n.container.width(a).height(l),n.$media.add(n.container.find(".mejs-shim")).width("100%").height("100%"),n.isVideo&&n.media.setVideoSize&&n.media.setVideoSize(a,l),n.layers.children(".mejs-layer").width("100%").height("100%"))}else n.container.width(n.width).height(n.height),n.layers.children(".mejs-layer").width(n.width).height(n.height)},setControlsSize:function(){var t=this,i=0,n=0,s=t.controls.find(".mejs-time-rail"),o=t.controls.find(".mejs-time-total"),a=s.siblings(),r=a.last(),l=null;if(t.container.is(":visible")&&s.length&&s.is(":visible")){t.options&&!t.options.autosizeProgress&&(n=parseInt(s.css("width"),10)),0!==n&&n||(a.each(function(){var t=e(this);"absolute"!=t.css("position")&&t.is(":visible")&&(i+=e(this).outerWidth(!0))}),n=t.controls.width()-i-(s.outerWidth(!0)-s.width()));do s.width(n),o.width(n-(o.outerWidth(!0)-o.width())),"absolute"!=r.css("position")&&(l=r.length?r.position():null,n--);while(null!==l&&l.top>0&&n>0);t.container.trigger("controlsresize")}},buildposter:function(t,i,n,s){var o=this,a=e('<div class="mejs-poster mejs-layer"></div>').appendTo(n),r=t.$media.attr("poster");""!==t.options.poster&&(r=t.options.poster),r?o.setPoster(r):a.hide(),s.addEventListener("play",function(){a.hide()},!1),t.options.showPosterWhenEnded&&t.options.autoRewind&&s.addEventListener("ended",function(){a.show()},!1)},setPoster:function(t){var i=this,n=i.container.find(".mejs-poster"),s=n.find("img");0===s.length&&(s=e('<img width="100%" height="100%" alt="" />').appendTo(n)),s.attr("src",t),n.css({"background-image":"url("+t+")"})},buildoverlays:function(t,i,n,s){var o=this;if(t.isVideo){var a=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(n),r=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(n),l=e('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(n).bind("click",function(){o.options.clickToPlayPause&&s.paused&&s.play()});s.addEventListener("play",function(){l.hide(),a.hide(),i.find(".mejs-time-buffering").hide(),r.hide()},!1),s.addEventListener("playing",function(){l.hide(),a.hide(),i.find(".mejs-time-buffering").hide(),r.hide()},!1),s.addEventListener("seeking",function(){a.show(),i.find(".mejs-time-buffering").show()},!1),s.addEventListener("seeked",function(){a.hide(),i.find(".mejs-time-buffering").hide()},!1),s.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||l.show()},!1),s.addEventListener("waiting",function(){a.show(),i.find(".mejs-time-buffering").show()},!1),s.addEventListener("loadeddata",function(){a.show(),i.find(".mejs-time-buffering").show(),mejs.MediaFeatures.isAndroid&&(s.canplayTimeout=window.setTimeout(function(){if(document.createEvent){var e=document.createEvent("HTMLEvents");return e.initEvent("canplay",!0,!0),s.dispatchEvent(e)}},300))},!1),s.addEventListener("canplay",function(){a.hide(),i.find(".mejs-time-buffering").hide(),clearTimeout(s.canplayTimeout)},!1),s.addEventListener("error",function(e){o.handleError(e),a.hide(),l.hide(),r.show(),r.find(".mejs-overlay-error").html("Error loading this resource")},!1),s.addEventListener("keydown",function(e){o.onkeydown(t,s,e)},!1)}},buildkeyboard:function(t,i,n,s){var o=this;o.container.keydown(function(){o.keyboardAction=!0}),o.globalBind("keydown",function(e){return o.onkeydown(t,s,e)}),o.globalBind("click",function(i){t.hasFocus=0!==e(i.target).closest(".mejs-container").length})},onkeydown:function(e,t,i){if(e.hasFocus&&e.options.enableKeyboard)for(var n=0,s=e.options.keyActions.length;n<s;n++)for(var o=e.options.keyActions[n],a=0,r=o.keys.length;a<r;a++)if(i.keyCode==o.keys[a])return"function"==typeof i.preventDefault&&i.preventDefault(),o.action(e,t,i.keyCode),!1;return!0},findTracks:function(){var t=this,i=t.$media.find("track");t.tracks=[],i.each(function(i,n){n=e(n),t.tracks.push({srclang:n.attr("srclang")?n.attr("srclang").toLowerCase():"",src:n.attr("src"),kind:n.attr("kind"),label:n.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(e){this.container[0].className="mejs-container "+e,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.load(),this.media.play()},pause:function(){try{this.media.pause()}catch(e){}},load:function(){this.isLoaded||this.media.load(),this.isLoaded=!0},setMuted:function(e){this.media.setMuted(e)},setCurrentTime:function(e){this.media.setCurrentTime(e)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(e){this.media.setVolume(e)},getVolume:function(){return this.media.volume},setSrc:function(e){this.media.setSrc(e)},remove:function(){var e,t,i=this;i.container.prev(".mejs-offscreen").remove();for(e in i.options.features)if(t=i.options.features[e],i["clean"+t])try{i["clean"+t](i)}catch(n){}i.isDynamic?i.$node.insertBefore(i.container):(i.$media.prop("controls",!0),i.$node.clone().insertBefore(i.container).show(),i.$node.remove()),"native"!==i.media.pluginType&&i.media.remove(),delete mejs.players[i.id],"object"==typeof i.container&&i.container.remove(),i.globalUnbind(),delete i.node.player},rebuildtracks:function(){var e=this;e.findTracks(),e.buildtracks(e,e.controls,e.layers,e.media)},resetSize:function(){var e=this;setTimeout(function(){e.setPlayerSize(e.width,e.height),e.setControlsSize()},50)}},function(){function t(t,n){var s={d:[],w:[]};return e.each((t||"").split(" "),function(e,t){var o=t+"."+n;0===o.indexOf(".")?(s.d.push(o),s.w.push(o)):s[i.test(t)?"w":"d"].push(o)}),s.d=s.d.join(" "),s.w=s.w.join(" "),s}var i=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;mejs.MediaElementPlayer.prototype.globalBind=function(i,n,s){var o=this;i=t(i,o.id),i.d&&e(document).bind(i.d,n,s),i.w&&e(window).bind(i.w,n,s)},mejs.MediaElementPlayer.prototype.globalUnbind=function(i,n){var s=this;i=t(i,s.id),i.d&&e(document).unbind(i.d,n),i.w&&e(window).unbind(i.w,n)}}(),"undefined"!=typeof e&&(e.fn.mediaelementplayer=function(t){return t===!1?this.each(function(){var t=e(this).data("mediaelementplayer");t&&t.remove(),e(this).removeData("mediaelementplayer")}):this.each(function(){e(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,t))}),this},e(document).ready(function(){e(".mejs-player").mediaelementplayer()})),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function(e){e.extend(mejs.MepDefaults,{playText:mejs.i18n.t("Play"),pauseText:mejs.i18n.t("Pause")}),e.extend(MediaElementPlayer.prototype,{buildplaypause:function(t,i,n,s){function o(e){"play"===e?(l.removeClass("mejs-play").addClass("mejs-pause"),u.attr({title:r.pauseText,"aria-label":r.pauseText})):(l.removeClass("mejs-pause").addClass("mejs-play"),u.attr({title:r.playText,"aria-label":r.playText}))}var a=this,r=a.options,l=e('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+a.id+'" title="'+r.playText+'" aria-label="'+r.playText+'"></button></div>').appendTo(i).click(function(e){return e.preventDefault(),s.paused?s.play():s.pause(),!1}),u=l.find("button");o("pse"),s.addEventListener("play",function(){o("play")},!1),s.addEventListener("playing",function(){o("play")},!1),s.addEventListener("pause",function(){o("pse")},!1),s.addEventListener("paused",function(){o("pse")},!1)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{stopText:"Stop"}),e.extend(MediaElementPlayer.prototype,{buildstop:function(t,i,n,s){var o=this;e('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+o.id+'" title="'+o.options.stopText+'" aria-label="'+o.options.stopText+'"></button></div>').appendTo(i).click(function(){s.paused||s.pause(),s.currentTime>0&&(s.setCurrentTime(0),s.pause(),i.find(".mejs-time-current").width("0px"),i.find(".mejs-time-handle").css("left","0px"),i.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0,t.options)),i.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0,t.options)),n.find(".mejs-poster").show())})}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{progessHelpText:mejs.i18n.t("Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.")}),e.extend(MediaElementPlayer.prototype,{buildprogress:function(t,i,n,s){e('<div class="mejs-time-rail"><span  class="mejs-time-total mejs-time-slider"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(i),i.find(".mejs-time-buffering").hide();var o=this,a=i.find(".mejs-time-total"),r=i.find(".mejs-time-loaded"),l=i.find(".mejs-time-current"),u=i.find(".mejs-time-handle"),d=i.find(".mejs-time-float"),c=i.find(".mejs-time-float-current"),m=i.find(".mejs-time-slider"),p=function(e){var i,n=a.offset(),o=a.width(),r=0,l=0,u=0;i=e.originalEvent&&e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.changedTouches?e.changedTouches[0].pageX:e.pageX,s.duration&&(i<n.left?i=n.left:i>o+n.left&&(i=o+n.left),u=i-n.left,r=u/o,l=r<=.02?0:r*s.duration,h&&l!==s.currentTime&&s.setCurrentTime(l),mejs.MediaFeatures.hasTouch||(d.css("left",u),c.html(mejs.Utility.secondsToTimeCode(l,t.options)),d.show()))},h=!1,f=!1,v=0,g=!1,y=t.options.autoRewind,b=function(e){var i=s.currentTime,n=mejs.i18n.t("Time Slider"),o=mejs.Utility.secondsToTimeCode(i,t.options),a=s.duration;m.attr({"aria-label":n,"aria-valuemin":0,"aria-valuemax":a,"aria-valuenow":i,"aria-valuetext":o,role:"slider",tabindex:0})},j=function(){var e=new Date;e-v>=1e3&&s.play()};m.bind("focus",function(e){t.options.autoRewind=!1}),m.bind("blur",function(e){t.options.autoRewind=y}),m.bind("keydown",function(e){new Date-v>=1e3&&(g=s.paused);var t=e.keyCode,i=s.duration,n=s.currentTime;switch(t){case 37:n-=1;break;case 39:n+=1;break;case 38:n+=Math.floor(.1*i);break;case 40:n-=Math.floor(.1*i);break;case 36:n=0;break;case 35:n=i;break;case 10:return void(s.paused?s.play():s.pause());case 13:return void(s.paused?s.play():s.pause());default:return}return n=n<0?0:n>=i?i:Math.floor(n),v=new Date,g||s.pause(),n<s.duration&&!g&&setTimeout(j,1100),s.setCurrentTime(n),e.preventDefault(),e.stopPropagation(),!1}),a.bind("mousedown touchstart",function(e){1!==e.which&&0!==e.which||(h=!0,p(e),o.globalBind("mousemove.dur touchmove.dur",function(e){p(e)}),o.globalBind("mouseup.dur touchend.dur",function(e){h=!1,d.hide(),o.globalUnbind(".dur")}))}).bind("mouseenter",function(e){f=!0,o.globalBind("mousemove.dur",function(e){p(e)}),mejs.MediaFeatures.hasTouch||d.show()}).bind("mouseleave",function(e){f=!1,h||(o.globalUnbind(".dur"),d.hide())}),s.addEventListener("progress",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),s.addEventListener("timeupdate",function(e){t.setProgressRail(e),t.setCurrentRail(e),b(e)},!1),o.container.on("controlsresize",function(){t.setProgressRail(),t.setCurrentRail()}),o.loaded=r,o.total=a,o.current=l,o.handle=u},setProgressRail:function(e){var t=this,i=void 0!==e?e.target:t.media,n=null;i&&i.buffered&&i.buffered.length>0&&i.buffered.end&&i.duration?n=i.buffered.end(i.buffered.length-1)/i.duration:i&&void 0!==i.bytesTotal&&i.bytesTotal>0&&void 0!==i.bufferedBytes?n=i.bufferedBytes/i.bytesTotal:e&&e.lengthComputable&&0!==e.total&&(n=e.loaded/e.total),null!==n&&(n=Math.min(1,Math.max(0,n)),t.loaded&&t.total&&t.loaded.width(t.total.width()*n))},setCurrentRail:function(){var e=this;if(void 0!==e.media.currentTime&&e.media.duration&&e.total&&e.handle){var t=Math.round(e.total.width()*e.media.currentTime/e.media.duration),i=t-Math.round(e.handle.outerWidth(!0)/2);e.current.width(t),e.handle.css("left",i)}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:"<span> | </span>"}),e.extend(MediaElementPlayer.prototype,{buildcurrent:function(t,i,n,s){var o=this;e('<div class="mejs-time" role="timer" aria-live="off"><span class="mejs-currenttime">'+mejs.Utility.secondsToTimeCode(0,t.options)+"</span></div>").appendTo(i),o.currenttime=o.controls.find(".mejs-currenttime"),s.addEventListener("timeupdate",function(){t.updateCurrent()},!1)},buildduration:function(t,i,n,s){var o=this;i.children().last().find(".mejs-currenttime").length>0?e(o.options.timeAndDurationSeparator+'<span class="mejs-duration">'+mejs.Utility.secondsToTimeCode(o.options.duration,o.options)+"</span>").appendTo(i.find(".mejs-time")):(i.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),e('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+mejs.Utility.secondsToTimeCode(o.options.duration,o.options)+"</span></div>").appendTo(i)),o.durationD=o.controls.find(".mejs-duration"),s.addEventListener("timeupdate",function(){t.updateDuration()},!1)},updateCurrent:function(){var e=this;e.currenttime&&e.currenttime.html(mejs.Utility.secondsToTimeCode(e.media.currentTime,e.options))},updateDuration:function(){var e=this;e.container.toggleClass("mejs-long-video",e.media.duration>3600),e.durationD&&(e.options.duration>0||e.media.duration)&&e.durationD.html(mejs.Utility.secondsToTimeCode(e.options.duration>0?e.options.duration:e.media.duration,e.options))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{muteText:mejs.i18n.t("Mute Toggle"),allyVolumeControlText:mejs.i18n.t("Use Up/Down Arrow keys to increase or decrease volume."),hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(t,i,n,s){if(!mejs.MediaFeatures.isAndroid&&!mejs.MediaFeatures.isiOS||!this.options.hideVolumeOnTouchDevices){var o=this,a=o.isVideo?o.options.videoVolume:o.options.audioVolume,r="horizontal"==a?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+o.id+'" title="'+o.options.muteText+'" aria-label="'+o.options.muteText+'"></button></div><a href="javascript:void(0);" class="mejs-horizontal-volume-slider"><span class="mejs-offscreen">'+o.options.allyVolumeControlText+'</span><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></a>').appendTo(i):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+o.id+'" title="'+o.options.muteText+'" aria-label="'+o.options.muteText+'"></button><a href="javascript:void(0);" class="mejs-volume-slider"><span class="mejs-offscreen">'+o.options.allyVolumeControlText+'</span><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></a></div>').appendTo(i),l=o.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),u=o.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),d=o.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),c=o.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),m=function(e,t){if(!l.is(":visible")&&"undefined"==typeof t)return l.show(),m(e,!0),void l.hide();e=Math.max(0,e),e=Math.min(e,1),0===e?(r.removeClass("mejs-mute").addClass("mejs-unmute"),r.children("button").attr("title",mejs.i18n.t("Unmute")).attr("aria-label",mejs.i18n.t("Unmute"))):(r.removeClass("mejs-unmute").addClass("mejs-mute"),r.children("button").attr("title",mejs.i18n.t("Mute")).attr("aria-label",mejs.i18n.t("Mute")));var i=u.position();if("vertical"==a){var n=u.height(),s=n-n*e;c.css("top",Math.round(i.top+s-c.height()/2)),d.height(n-s),d.css("top",i.top+s)}else{var o=u.width(),p=o*e;c.css("left",Math.round(i.left+p-c.width()/2)),d.width(Math.round(p))}},p=function(e){var t=null,i=u.offset();if("vertical"===a){var n=u.height(),o=e.pageY-i.top;if(t=(n-o)/n,0===i.top||0===i.left)return}else{var r=u.width(),l=e.pageX-i.left;t=l/r}t=Math.max(0,t),t=Math.min(t,1),m(t),0===t?s.setMuted(!0):s.setMuted(!1),s.setVolume(t)},h=!1,f=!1;r.hover(function(){l.show(),f=!0},function(){f=!1,h||"vertical"!=a||l.hide()});var v=function(e){var t=Math.floor(100*s.volume);l.attr({"aria-label":mejs.i18n.t("volumeSlider"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t,"aria-valuetext":t+"%",role:"slider",tabindex:0})};l.bind("mouseover",function(){f=!0}).bind("mousedown",function(e){return p(e),o.globalBind("mousemove.vol",function(e){p(e)}),o.globalBind("mouseup.vol",function(){h=!1,o.globalUnbind(".vol"),f||"vertical"!=a||l.hide()}),h=!0,!1}).bind("keydown",function(e){var t=e.keyCode,i=s.volume;switch(t){case 38:i+=.1;break;case 40:i-=.1;break;default:return!0}return h=!1,m(i),s.setVolume(i),!1}).bind("blur",function(){l.hide()}),r.find("button").click(function(){s.setMuted(!s.muted)}),r.find("button").bind("focus",function(){l.show()}),s.addEventListener("volumechange",function(e){h||(s.muted?(m(0),r.removeClass("mejs-mute").addClass("mejs-unmute")):(m(s.volume),r.removeClass("mejs-unmute").addClass("mejs-mute"))),v(e)},!1),0===t.options.startVolume&&s.setMuted(!0),"native"===s.pluginType&&s.setVolume(t.options.startVolume),o.container.on("controlsresize",function(){m(s.volume)})}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")}),e.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,buildfullscreen:function(t,i,n,s){if(t.isVideo){if(t.isInIframe=window.location!=window.parent.location,mejs.MediaFeatures.hasTrueNativeFullScreen){var o=function(e){t.isFullScreen&&(mejs.MediaFeatures.isFullScreen()?(t.isNativeFullScreen=!0,t.setControlsSize()):(t.isNativeFullScreen=!1,t.exitFullScreen()))};t.globalBind(mejs.MediaFeatures.fullScreenEventName,o)}var a=this,r=e('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+a.id+'" title="'+a.options.fullscreenText+'" aria-label="'+a.options.fullscreenText+'"></button></div>').appendTo(i);if("native"===a.media.pluginType||!a.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)r.click(function(){var e=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen;e?t.exitFullScreen():t.enterFullScreen()});else{var l=null,u=function(){var e,t=document.createElement("x"),i=document.documentElement,n=window.getComputedStyle;return"pointerEvents"in t.style&&(t.style.pointerEvents="auto",t.style.pointerEvents="x",i.appendChild(t),e=n&&"auto"===n(t,"").pointerEvents,i.removeChild(t),!!e)}();if(u&&!mejs.MediaFeatures.isOpera){var d,c,m=!1,p=function(){if(m){for(var e in h)h[e].hide();r.css("pointer-events",""),a.controls.css("pointer-events",""),a.media.removeEventListener("click",a.clickToPlayPauseCallback),m=!1}},h={},f=["top","left","right","bottom"],v=function(){var e=r.offset().left-a.container.offset().left,t=r.offset().top-a.container.offset().top,i=r.outerWidth(!0),n=r.outerHeight(!0),s=a.container.width(),o=a.container.height();for(d in h)h[d].css({position:"absolute",top:0,left:0});h.top.width(s).height(t),h.left.width(e).height(n).css({top:t}),h.right.width(s-e-i).height(n).css({top:t,left:e+i}),h.bottom.width(s).height(o-n-t).css({top:t+n})};for(a.globalBind("resize",function(){v()}),d=0,c=f.length;d<c;d++)h[f[d]]=e('<div class="mejs-fullscreen-hover" />').appendTo(a.container).mouseover(p).hide();r.on("mouseover",function(){if(!a.isFullScreen){var e=r.offset(),i=t.container.offset();s.positionFullscreenButton(e.left-i.left,e.top-i.top,!1),r.css("pointer-events","none"),a.controls.css("pointer-events","none"),a.media.addEventListener("click",a.clickToPlayPauseCallback);for(d in h)h[d].show();v(),m=!0}}),s.addEventListener("fullscreenchange",function(e){a.isFullScreen=!a.isFullScreen,a.isFullScreen?a.media.removeEventListener("click",a.clickToPlayPauseCallback):a.media.addEventListener("click",a.clickToPlayPauseCallback),p()}),a.globalBind("mousemove",function(e){if(m){var t=r.offset();(e.pageY<t.top||e.pageY>t.top+r.outerHeight(!0)||e.pageX<t.left||e.pageX>t.left+r.outerWidth(!0))&&(r.css("pointer-events",""),a.controls.css("pointer-events",""),m=!1)}})}else r.on("mouseover",function(){null!==l&&(clearTimeout(l),delete l);var e=r.offset(),i=t.container.offset();s.positionFullscreenButton(e.left-i.left,e.top-i.top,!0)}).on("mouseout",function(){null!==l&&(clearTimeout(l),delete l),l=setTimeout(function(){s.hideFullscreenButton()},1500)})}t.fullscreenBtn=r,a.globalBind("keydown",function(e){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||a.isFullScreen)&&27==e.keyCode&&t.exitFullScreen()}),a.normalHeight=0,a.normalWidth=0}},cleanfullscreen:function(e){e.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var t=this;if("native"===t.media.pluginType||!mejs.MediaFeatures.isFirefox&&!t.options.usePluginFullScreen){if(e(document.documentElement).addClass("mejs-fullscreen"),t.normalHeight=t.container.height(),t.normalWidth=t.container.width(),"native"===t.media.pluginType)if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(t.container[0]),t.isInIframe&&setTimeout(function n(){if(t.isNativeFullScreen){var i=window.devicePixelRatio||1,s=.002,o=i*e(window).width(),a=screen.width,r=i*o;Math.abs(a-o)>Math.abs(a-r)&&(o=r);var l=Math.abs(a-o),u=a*s;l>u?t.exitFullScreen():setTimeout(n,500)}},1e3);else if(mejs.MediaFeatures.hasSemiNativeFullScreen)return void t.media.webkitEnterFullscreen();if(t.isInIframe){var i=t.options.newWindowCallback(this);if(""!==i){if(!mejs.MediaFeatures.hasTrueNativeFullScreen)return t.pause(),void window.open(i,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no");setTimeout(function(){t.isNativeFullScreen||(t.pause(),window.open(i,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),t.containerSizeTimeout=setTimeout(function(){t.container.css({width:"100%",height:"100%"}),t.setControlsSize()},500),"native"===t.media.pluginType?t.$media.width("100%").height("100%"):(t.container.find(".mejs-shim").width("100%").height("100%"),t.media.setVideoSize(e(window).width(),e(window).height())),t.layers.children("div").width("100%").height("100%"),t.fullscreenBtn&&t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),t.setControlsSize(),t.isFullScreen=!0,t.container.find(".mejs-captions-text").css("font-size",screen.width/t.width*1*100+"%"),t.container.find(".mejs-captions-position").css("bottom","45px"),t.container.trigger("enteredfullscreen")}},exitFullScreen:function(){var t=this;return clearTimeout(t.containerSizeTimeout),"native"!==t.media.pluginType&&mejs.MediaFeatures.isFirefox?void t.media.setFullscreen(!1):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||t.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),e(document.documentElement).removeClass("mejs-fullscreen"),t.container.removeClass("mejs-container-fullscreen").width(t.normalWidth).height(t.normalHeight),"native"===t.media.pluginType?t.$media.width(t.normalWidth).height(t.normalHeight):(t.container.find(".mejs-shim").width(t.normalWidth).height(t.normalHeight),t.media.setVideoSize(t.normalWidth,t.normalHeight)),t.layers.children("div").width(t.normalWidth).height(t.normalHeight),t.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),t.setControlsSize(),t.isFullScreen=!1,t.container.find(".mejs-captions-text").css("font-size",""),t.container.find(".mejs-captions-position").css("bottom",""),void t.container.trigger("exitedfullscreen"))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{speeds:["2.00","1.50","1.25","1.00","0.75"],defaultSpeed:"1.00",speedChar:"x"}),e.extend(MediaElementPlayer.prototype,{
buildspeed:function(t,i,n,s){var o=this;if("native"==o.media.pluginType){for(var a=null,r=null,l=null,u=null,d=[],c=!1,m=0,p=o.options.speeds.length;m<p;m++){var h=o.options.speeds[m];"string"==typeof h?(d.push({name:h+o.options.speedChar,value:h}),h===o.options.defaultSpeed&&(c=!0)):(d.push(h),h.value===o.options.defaultSpeed&&(c=!0))}c||d.push({name:o.options.defaultSpeed+o.options.speedChar,value:o.options.defaultSpeed}),d.sort(function(e,t){return parseFloat(t.value)-parseFloat(e.value)});var f=function(e){for(m=0,p=d.length;m<p;m++)if(d[m].value===e)return d[m].name},v='<div class="mejs-button mejs-speed-button"><button type="button">'+f(o.options.defaultSpeed)+'</button><div class="mejs-speed-selector"><ul>';for(m=0,il=d.length;m<il;m++)u=o.id+"-speed-"+d[m].value,v+='<li><input type="radio" name="speed" value="'+d[m].value+'" id="'+u+'" '+(d[m].value===o.options.defaultSpeed?" checked":"")+' /><label for="'+u+'" '+(d[m].value===o.options.defaultSpeed?' class="mejs-speed-selected"':"")+">"+d[m].name+"</label></li>";v+="</ul></div></div>",a=e(v).appendTo(i),r=a.find(".mejs-speed-selector"),l=o.options.defaultSpeed,r.on("click",'input[type="radio"]',function(){var t=e(this).attr("value");l=t,s.playbackRate=parseFloat(t),a.find("button").html(f(t)),a.find(".mejs-speed-selected").removeClass("mejs-speed-selected"),a.find('input[type="radio"]:checked').next().addClass("mejs-speed-selected")}),a.one("mouseenter focusin",function(){r.height(a.find(".mejs-speed-selector ul").outerHeight(!0)+a.find(".mejs-speed-translations").outerHeight(!0)).css("top",-1*r.height()+"px")})}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{startLanguage:"",tracksText:mejs.i18n.t("Captions/Subtitles"),tracksAriaLive:!1,hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),e.extend(MediaElementPlayer.prototype,{hasChapters:!1,cleartracks:function(e,t,i,n){e&&(e.captions&&e.captions.remove(),e.chapters&&e.chapters.remove(),e.captionsText&&e.captionsText.remove(),e.captionsButton&&e.captionsButton.remove())},buildtracks:function(t,i,n,s){if(0!==t.tracks.length){var o,a=this,r=a.options.tracksAriaLive?'role="log" aria-live="assertive" aria-atomic="false"':"";if(a.domNode.textTracks)for(o=a.domNode.textTracks.length-1;o>=0;o--)a.domNode.textTracks[o].mode="hidden";a.cleartracks(t,i,n,s),t.chapters=e('<div class="mejs-chapters mejs-layer"></div>').prependTo(n).hide(),t.captions=e('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover" '+r+'><span class="mejs-captions-text"></span></div></div>').prependTo(n).hide(),t.captionsText=t.captions.find(".mejs-captions-text"),t.captionsButton=e('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+a.id+'" title="'+a.options.tracksText+'" aria-label="'+a.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_none" value="none" checked="checked" /><label for="'+t.id+'_captions_none">'+mejs.i18n.t("None")+"</label></li></ul></div></div>").appendTo(i);var l=0;for(o=0;o<t.tracks.length;o++)"subtitles"==t.tracks[o].kind&&l++;for(a.options.toggleCaptionsButtonWhenOnlyOne&&1==l?t.captionsButton.on("click",function(){null===t.selectedTrack?lang=t.tracks[0].srclang:lang="none",t.setTrack(lang)}):(t.captionsButton.on("mouseenter focusin",function(){e(this).find(".mejs-captions-selector").css("visibility","visible")}).on("click","input[type=radio]",function(){lang=this.value,t.setTrack(lang)}),t.captionsButton.on("mouseleave focusout",function(){e(this).find(".mejs-captions-selector").css("visibility","hidden")})),t.options.alwaysShowControls?t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):t.container.bind("controlsshown",function(){t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){s.paused||t.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),t.trackToLoad=-1,t.selectedTrack=null,t.isLoadingTrack=!1,o=0;o<t.tracks.length;o++)"subtitles"==t.tracks[o].kind&&t.addTrackButton(t.tracks[o].srclang,t.tracks[o].label);t.loadNextTrack(),s.addEventListener("timeupdate",function(e){t.displayCaptions()},!1),""!==t.options.slidesSelector&&(t.slidesContainer=e(t.options.slidesSelector),s.addEventListener("timeupdate",function(e){t.displaySlides()},!1)),s.addEventListener("loadedmetadata",function(e){t.displayChapters()},!1),t.container.hover(function(){t.hasChapters&&(t.chapters.css("visibility","visible"),t.chapters.fadeIn(200).height(t.chapters.find(".mejs-chapter").outerHeight()))},function(){t.hasChapters&&!s.paused&&t.chapters.fadeOut(200,function(){e(this).css("visibility","hidden"),e(this).css("display","block")})}),a.container.on("controlsresize",function(){a.adjustLanguageBox()}),null!==t.node.getAttribute("autoplay")&&t.chapters.css("visibility","hidden")}},setTrack:function(e){var t,i=this;if("none"==e)i.selectedTrack=null,i.captionsButton.removeClass("mejs-captions-enabled");else for(t=0;t<i.tracks.length;t++)if(i.tracks[t].srclang==e){null===i.selectedTrack&&i.captionsButton.addClass("mejs-captions-enabled"),i.selectedTrack=i.tracks[t],i.captions.attr("lang",i.selectedTrack.srclang),i.displayCaptions();break}},loadNextTrack:function(){var e=this;e.trackToLoad++,e.trackToLoad<e.tracks.length?(e.isLoadingTrack=!0,e.loadTrack(e.trackToLoad)):(e.isLoadingTrack=!1,e.checkForTracks())},loadTrack:function(t){var i=this,n=i.tracks[t],s=function(){n.isLoaded=!0,i.enableTrackButton(n.srclang,n.label),i.loadNextTrack()};e.ajax({url:n.src,dataType:"text",success:function(e){"string"==typeof e&&/<tt\s+xml/gi.exec(e)?n.entries=mejs.TrackFormatParser.dfxp.parse(e):n.entries=mejs.TrackFormatParser.webvtt.parse(e),s(),"chapters"==n.kind&&i.media.addEventListener("play",function(e){i.media.duration>0&&i.displayChapters(n)},!1),"slides"==n.kind&&i.setupSlides(n)},error:function(){i.removeTrackButton(n.srclang),i.loadNextTrack()}})},enableTrackButton:function(t,i){var n=this;""===i&&(i=mejs.language.codes[t]||t),n.captionsButton.find("input[value="+t+"]").prop("disabled",!1).siblings("label").html(i),n.options.startLanguage==t&&e("#"+n.id+"_captions_"+t).prop("checked",!0).trigger("click"),n.adjustLanguageBox()},removeTrackButton:function(e){var t=this;t.captionsButton.find("input[value="+e+"]").closest("li").remove(),t.adjustLanguageBox()},addTrackButton:function(t,i){var n=this;""===i&&(i=mejs.language.codes[t]||t),n.captionsButton.find("ul").append(e('<li><input type="radio" name="'+n.id+'_captions" id="'+n.id+"_captions_"+t+'" value="'+t+'" disabled="disabled" /><label for="'+n.id+"_captions_"+t+'">'+i+" (loading)</label></li>")),n.adjustLanguageBox(),n.container.find(".mejs-captions-translations option[value="+t+"]").remove()},adjustLanguageBox:function(){var e=this;e.captionsButton.find(".mejs-captions-selector").height(e.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+e.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},checkForTracks:function(){var e=this,t=!1;if(e.options.hideCaptionsButtonWhenEmpty){for(i=0;i<e.tracks.length;i++)if("subtitles"==e.tracks[i].kind&&e.tracks[i].isLoaded){t=!0;break}t||(e.captionsButton.hide(),e.setControlsSize())}},displayCaptions:function(){if("undefined"!=typeof this.tracks){var e,t=this,i=t.selectedTrack;if(null!==i&&i.isLoaded){for(e=0;e<i.entries.times.length;e++)if(t.media.currentTime>=i.entries.times[e].start&&t.media.currentTime<=i.entries.times[e].stop)return t.captionsText.html(i.entries.text[e]).attr("class","mejs-captions-text "+(i.entries.times[e].identifier||"")),void t.captions.show().height(0);t.captions.hide()}else t.captions.hide()}},setupSlides:function(e){var t=this;t.slides=e,t.slides.entries.imgs=[t.slides.entries.text.length],t.showSlide(0)},showSlide:function(t){if("undefined"!=typeof this.tracks&&"undefined"!=typeof this.slidesContainer){var i=this,n=i.slides.entries.text[t],s=i.slides.entries.imgs[t];"undefined"==typeof s||"undefined"==typeof s.fadeIn?i.slides.entries.imgs[t]=s=e('<img src="'+n+'">').on("load",function(){s.appendTo(i.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()}):s.is(":visible")||s.is(":animated")||s.fadeIn().siblings(":visible").fadeOut()}},displaySlides:function(){if("undefined"!=typeof this.slides){var e,t=this,i=t.slides;for(e=0;e<i.entries.times.length;e++)if(t.media.currentTime>=i.entries.times[e].start&&t.media.currentTime<=i.entries.times[e].stop)return void t.showSlide(e)}},displayChapters:function(){var e,t=this;for(e=0;e<t.tracks.length;e++)if("chapters"==t.tracks[e].kind&&t.tracks[e].isLoaded){t.drawChapters(t.tracks[e]),t.hasChapters=!0;break}},drawChapters:function(t){var i,n,s=this,o=0,a=0;for(s.chapters.empty(),i=0;i<t.entries.times.length;i++)n=t.entries.times[i].stop-t.entries.times[i].start,o=Math.floor(n/s.media.duration*100),(o+a>100||i==t.entries.times.length-1&&o+a<100)&&(o=100-a),s.chapters.append(e('<div class="mejs-chapter" rel="'+t.entries.times[i].start+'" style="left: '+a.toString()+"%;width: "+o.toString()+'%;"><div class="mejs-chapter-block'+(i==t.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+t.entries.text[i]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(t.entries.times[i].start,s.options)+"&ndash;"+mejs.Utility.secondsToTimeCode(t.entries.times[i].stop,s.options)+"</span></div></div>")),a+=o;s.chapters.find("div.mejs-chapter").click(function(){s.media.setCurrentTime(parseFloat(e(this).attr("rel"))),s.media.paused&&s.media.play()}),s.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvtt:{pattern_timecode:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(t){for(var i,n,s,o=0,a=mejs.TrackFormatParser.split2(t,/\r?\n/),r={text:[],times:[]};o<a.length;o++){if(i=this.pattern_timecode.exec(a[o]),i&&o<a.length){for(o-1>=0&&""!==a[o-1]&&(s=a[o-1]),o++,n=a[o],o++;""!==a[o]&&o<a.length;)n=n+"\n"+a[o],o++;n=e.trim(n).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),r.text.push(n),r.times.push({identifier:s,start:0===mejs.Utility.convertSMPTEtoSeconds(i[1])?.2:mejs.Utility.convertSMPTEtoSeconds(i[1]),stop:mejs.Utility.convertSMPTEtoSeconds(i[3]),settings:i[5]})}s=""}return r}},dfxp:{parse:function(t){t=e(t).filter("tt");var i,n,s=0,o=t.children("div").eq(0),a=o.find("p"),r=t.find("#"+o.attr("style")),l={text:[],times:[]};if(r.length){var u=r.removeAttr("id").get(0).attributes;if(u.length)for(i={},s=0;s<u.length;s++)i[u[s].name.split(":")[1]]=u[s].value}for(s=0;s<a.length;s++){var d,c={start:null,stop:null,style:null};if(a.eq(s).attr("begin")&&(c.start=mejs.Utility.convertSMPTEtoSeconds(a.eq(s).attr("begin"))),!c.start&&a.eq(s-1).attr("end")&&(c.start=mejs.Utility.convertSMPTEtoSeconds(a.eq(s-1).attr("end"))),a.eq(s).attr("end")&&(c.stop=mejs.Utility.convertSMPTEtoSeconds(a.eq(s).attr("end"))),!c.stop&&a.eq(s+1).attr("begin")&&(c.stop=mejs.Utility.convertSMPTEtoSeconds(a.eq(s+1).attr("begin"))),i){d="";for(var m in i)d+=m+":"+i[m]+";"}d&&(c.style=d),0===c.start&&(c.start=.2),l.times.push(c),n=e.trim(a.eq(s).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),l.text.push(n),0===l.times.start&&(l.times.start=2)}return l}},split2:function(e,t){return e.split(t)}},3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(e,t){var i,n=[],s="";for(i=0;i<e.length;i++)s+=e.substring(i,i+1),t.test(s)&&(n.push(s.replace(t,"")),s="");return n.push(s),n})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(e){return"undefined"==typeof e.enterFullScreen?null:e.isFullScreen?mejs.i18n.t("Turn off Fullscreen"):mejs.i18n.t("Go Fullscreen")},click:function(e){e.isFullScreen?e.exitFullScreen():e.enterFullScreen()}},{render:function(e){return e.media.muted?mejs.i18n.t("Unmute"):mejs.i18n.t("Mute")},click:function(e){e.media.muted?e.setMuted(!1):e.setMuted(!0)}},{isSeparator:!0},{render:function(e){return mejs.i18n.t("Download Video")},click:function(e){window.location.href=e.media.currentSrc}}]}),e.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(t,i,n,s){t.contextMenu=e('<div class="mejs-contextmenu"></div>').appendTo(e("body")).hide(),t.container.bind("contextmenu",function(e){if(t.isContextMenuEnabled)return e.preventDefault(),t.renderContextMenu(e.clientX-1,e.clientY-1),!1}),t.container.bind("click",function(){t.contextMenu.hide()}),t.contextMenu.bind("mouseleave",function(){t.startContextMenuTimer()})},cleancontextmenu:function(e){e.contextMenu.remove()},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var e=this;e.killContextMenuTimer(),e.contextMenuTimer=setTimeout(function(){e.hideContextMenu(),e.killContextMenuTimer()},750)},killContextMenuTimer:function(){var e=this.contextMenuTimer;null!=e&&(clearTimeout(e),delete e,e=null)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(t,i){for(var n=this,s="",o=n.options.contextMenuItems,a=0,r=o.length;a<r;a++)if(o[a].isSeparator)s+='<div class="mejs-contextmenu-separator"></div>';else{var l=o[a].render(n);null!=l&&(s+='<div class="mejs-contextmenu-item" data-itemindex="'+a+'" id="element-'+1e6*Math.random()+'">'+l+"</div>")}n.contextMenu.empty().append(e(s)).css({top:i,left:t}).show(),n.contextMenu.find(".mejs-contextmenu-item").each(function(){var t=e(this),i=parseInt(t.data("itemindex"),10),s=n.options.contextMenuItems[i];"undefined"!=typeof s.show&&s.show(t,n),t.click(function(){"undefined"!=typeof s.click&&s.click(n),n.contextMenu.hide()})}),setTimeout(function(){n.killControlsTimer("rev3")},100)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{skipBackInterval:30,skipBackText:mejs.i18n.t("Skip back %1 seconds")}),e.extend(MediaElementPlayer.prototype,{buildskipback:function(t,i,n,s){var o=this,a=o.options.skipBackText.replace("%1",o.options.skipBackInterval);e('<div class="mejs-button mejs-skip-back-button"><button type="button" aria-controls="'+o.id+'" title="'+a+'" aria-label="'+a+'">'+o.options.skipBackInterval+"</button></div>").appendTo(i).click(function(){s.setCurrentTime(Math.max(s.currentTime-o.options.skipBackInterval,0)),e(this).find("button").blur()})}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t("Close")}),e.extend(MediaElementPlayer.prototype,{buildpostroll:function(t,i,n,s){var o=this,a=o.container.find('link[rel="postroll"]').attr("href");"undefined"!=typeof a&&(t.postroll=e('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+o.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(n).hide(),o.media.addEventListener("ended",function(i){e.ajax({dataType:"html",url:a,success:function(e,t){n.find(".mejs-postroll-layer-content").html(e)}}),t.postroll.show()},!1))}})}(mejs.$);
!function(e,t){if("function"==typeof define&&define.amd?define(t):"object"==typeof exports&&(module.exports=t()),"undefined"!=typeof e){if(void 0!==e.Conviva)return;if(e.ConvivaLoading)return;e.ConvivaLoading=!0,e.Conviva=t(),delete e.ConvivaLoading}}(this,function(){var e={};return function(){"use strict";var t={};!function(){var n=e.Constants={};n.version="4.0.12",n.CUSTOMER_KEY="customerKey",n.GATEWAY_URL="gatewayUrl",n.LOG_LEVEL="logLevel",n.ASSET_NAME="Conviva.assetName",n.PLAYER_NAME="Conviva.applicationName",n.IS_LIVE="Conviva.streamType",n.ENCODED_FRAMERATE="Conviva.encodedFrameRate",n.DEFAULT_RESOURCE="Conviva.defaultResource",n.STREAM_URL="Conviva.streamUrl",n.VIEWER_ID="Conviva.viewerId",n.DURATION="Conviva.duration",n.POD_INDEX="podIndex",n.POD_POSITION="podPosition",n.POD_DURATION="podDuration",n.MODULE_NAME="Conviva.moduleName",n.MODULE_VERSION="Conviva.moduleVersion",n.FRAMEWORK_NAME="Conviva.frameworkName",n.FRAMEWORK_VERSION="Conviva.frameworkVersion",n.CLIENT_CONFIGURATION_FAILED="Constants not yet configured",n.INVALID_PLAYER_MONITOR="Invalid : Did you report playback ended?",n.INVALID_AD_PLAYER_MONITOR="Invalid : Did you report ad playback ended?",n.PLAYER_UNAVAILABLE_ERROR="Player cannot be null",n.PLAYBACK_ANALYTICS_AVAILABLE="PlaybackAnlytics already built",n.PLAYBACK_ANALYTICS_NOT_AVAILABLE="PlaybackAnlytics not yet built",n.Playback={BITRATE:"BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP"},n.Network={SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},n.ErrorSeverity={FATAL:1,WARNING:0},n.NO_SESSION_KEY=-2,n.AdPosition={PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},n.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},n.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},n.AdType={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},n.AdSlates={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},n.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},n.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},n.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},n.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},n.Events={USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},n.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},n.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},n.CallbackFunctions={CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer"},n.DeviceMetadata={BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory"},n.AD_PRELOAD_FEATURE="adPreloading",n.AD_TAG_URL="adTagUrl",n.IMASDK_CONTENT_PLAYER="imaMainContentPlayer",n.CONVIVA_AD_MODULE="convivaModule";var r=e.Client=function(t,n){function s(e,t){if(!(e instanceof i))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(t instanceof o))throw new Error("systemFactory parameter should be an instance of SystemFactory.");(e.gatewayUrl==i._httpsProtocol+i.defaultProductionGatewayDNS||e.gatewayUrl==i._httpProtocol+i.defaultProductionGatewayDNS)&&(this.defaultGatewayURLError=!0),this._settings=e.clone(),this._systemFactory=t,this._systemFactory.configure("SDK",this._settings),this._exceptionCatcher=this._systemFactory.buildExceptionCatcher(),this._exceptionCatcher.runProtected("Client.init",function(){_._id=Y.uinteger32(),_._logger=_._systemFactory.buildLogger(),_._logger.setModuleName("Client"),_.defaultGatewayURLError&&_._logger.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),_._logger.info("init(): url="+_._settings.gatewayUrl+" customerKey="+_._settings.customerKey),_._config=_._systemFactory.buildConfig(),_._config.load(),_._sessionFactory=_._systemFactory.buildSessionFactory(_,_._settings,_._config),_._logger.info("init(): done.")},function(e){throw new Error("Client constructor failed: "+e.message)})}var _=this;this.defaultGatewayURLError=!1,this.version=r.version,this._logger=null,this._sessionFactory=null,this._systemFactory=null,this._globalSessionKey=-1,this._settings=null,this._systemSettings=null,this._exceptionCatcher=null,this._config=null,this._id=-1,this._released=!1,this._uniqueIdentifiers={},this._uniqueIdentifierCallback=function(e){_._logger.info(" Client:: uniqueIdentifierCallback(): "+e)},this._userPrefForData={},s.apply(this,arguments),this.release=function(){this._released||this._exceptionCatcher.runProtected("Client.release",function(){_._logger.info("release()"),_._sessionFactory.cleanup(),_._sessionFactory=null,_._globalSessionKey=-1,_._logger=null,_._id=-1,_._exceptionCatcher=null,_._settings=null,_._systemSettings=null,_._systemFactory=null,_._released=!0})},this.createSession=function(e,t){var n=r.NO_SESSION_KEY;return this._released?n:null==e||e instanceof a?(this._exceptionCatcher.runProtected("Client.createSession",function(){n=_._sessionFactory.makeVideoSession(e,M.SESSION_TYPE.VIDEO,t)}),n):(_._logger.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter"),n)},this.createAdSession=function(e,t,n){var i=r.NO_SESSION_KEY;return this._released?i:null==t||t instanceof a?(this._exceptionCatcher.runProtected("Client.createAdSession",function(){if(null==t&&(t=new a),F.isInteger(e)&&e!=r.NO_SESSION_KEY){var o=_._sessionFactory.getVideoSession(e);(null==t.applicationName||null==t.viewerId)&&null!=o&&null!=o._cwsSession&&null!=o._cwsSession._contentMetadata&&(null==t.viewerId&&null!=o._cwsSession._contentMetadata.viewerId&&(t.viewerId=o._cwsSession._contentMetadata.viewerId),null==t.applicationName&&null!=o._cwsSession._contentMetadata.applicationName&&(t.applicationName=o._cwsSession._contentMetadata.applicationName)),t.custom["c3.csid"]=F.ToString(o._id)}i=_._sessionFactory.makeVideoSession(t,M.SESSION_TYPE.AD,n)}),i):(_._logger.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter"),i)},this.reportError=function(t,n,r){return this._released?void 0:F.isValidString(n)?r!==e.Client.ErrorSeverity.FATAL&&r!==e.Client.ErrorSeverity.WARNING?void this._logger.error("reportError(): invalid error severity: "+r):void this._exceptionCatcher.runProtected("Client.reportError",function(){var e=_._sessionFactory.getVideoSession(t);null!=e&&e.reportError(n,r)}):void this._logger.error("reportError(): invalid error message string: "+n)},this.updateContentMetadata=function(e,t){return this._released?void 0:t instanceof a?void this._exceptionCatcher.runProtected("Client.updateContentMetadata",function(){var n=_._sessionFactory.getVideoSession(e);if(null!=n){var r=t.clone();n.updateContentMetadata(r)}}):void _._logger.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter")},this.detachPlayer=function(e){this._released||this._exceptionCatcher.runProtected("Client.detachPlayer",function(){var t=_._sessionFactory.getVideoSession(e);null!=t&&t.detachPlayer()})},this.offFocus=function(e){this._released||this._exceptionCatcher.runProtected("Client.offFocus",function(){var t=_._sessionFactory.getVideoSession(e);null!=t&&t.offFocus()})},this.attachPlayer=function(e,t){return this._released?void 0:t instanceof l?void this._exceptionCatcher.runProtected("Client.attachPlayer",function(){var n=_._sessionFactory.getVideoSession(e);null!=n&&n.attachPlayer(t)}):void _._logger.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter")},this.onFocus=function(e){this._released||this._exceptionCatcher.runProtected("Client.onFocus",function(){var t=_._sessionFactory.getVideoSession(e);null!=t&&t.onFocus()})},this.contentPreload=function(e){this._released||this._exceptionCatcher.runProtected("Client.contentPreload",function(){var t=_._sessionFactory.getVideoSession(e);null!=t&&t.contentPreload()})},this.contentStart=function(e){this._released||this._exceptionCatcher.runProtected("Client.contentStart",function(){var t=_._sessionFactory.getVideoSession(e);null!=t&&t.contentStart()})},this.sendCustomEvent=function(e,t,n){if(!this._released){if(!F.isValidString(t))return void _._logger.error("sendCustomEvent(): eventName parameter must be a valid string.");F.dictCount(n)<=0&&_._logger.warning("eventAttributes(): should have proper data."),this._exceptionCatcher.runProtected("Client.sendCustomEvent",function(){if(e==r.NO_SESSION_KEY){if(_._globalSessionKey<0){var i=new a;_._globalSessionKey=_._sessionFactory.makeGlobalSession(i,null)}e=_._globalSessionKey}var o=F.sanitizeStringToStringObject(n),s=_._sessionFactory.getSession(e);null!=s&&s.sendCustomEvent(t,o)})}},this.adStart=function(e,t,n,i){if(!this._released){if(t!==r.AdStream.CONTENT&&t!==r.AdStream.SEPARATE)return void this._logger.error("adStart(): ignored, invalid value for adStream parameter: "+t);if(n!==r.AdPlayer.CONTENT&&n!==r.AdPlayer.SEPARATE)return void this._logger.error("adStart(): ignored, invalid value for adPlayer parameter: "+n);i!==r.AdPosition.PREROLL&&i!==r.AdPosition.MIDROLL&&i!==r.AdPosition.POSTROLL&&this._logger.info("adStart(): ignored, invalid value for adPosition parameter: "+i),this._exceptionCatcher.runProtected("Client.adStart",function(){var r=_._sessionFactory.getVideoSession(e);null!=r&&r.adStart(t,n,i)})}},this.adEnd=function(e){this._released||this._exceptionCatcher.runProtected("Client.adEnd",function(){var t=_._sessionFactory.getVideoSession(e);null!=t&&t.adEnd()})},this.cleanupSession=function(e){return this._released?void 0:e===r.NO_SESSION_KEY?void this._logger.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):void this._exceptionCatcher.runProtected("Client.cleanupSession",function(){var t=_._sessionFactory.getVideoSession(e);null!=t&&_._sessionFactory.cleanupSession(e)})},this.getAttachedPlayer=function(e){var t=null;return this._released?t:e===r.NO_SESSION_KEY?(this._logger.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"),t):(this._exceptionCatcher.runProtected("Client.getAttachedPlayer",function(){var n=_._sessionFactory.getVideoSession(e);null!=n&&(t=n.getPlayerStateManager())}),t)},this.isPlayerAttached=function(e){return!this._released&&null!==this.getAttachedPlayer(e)},this.getPlayerStateManager=function(){if(this._released)throw new Error("This instance of Conviva.Client has been released.");return new l(this._systemFactory)},this.releasePlayerStateManager=function(e){if(this._released)throw new Error("This instance of Conviva.Client has been released.");this._exceptionCatcher.runProtected("Client.releasePlayerStateManager",function(){e instanceof l&&e.release()})},this.getSettings=function(){return this._settings},this.getId=function(){return this._id},this.getSessionId=function(e){if(!this._released){var t=null;return this._exceptionCatcher.runProtected("Client.getSessionId",function(){var n=_._sessionFactory.getVideoSession(e);t=n.getSessionId()}),t}},this.getClientId=function(e){if(!this._released){var t=null;return this._exceptionCatcher.runProtected("Client.getClientId",function(){var n=_._sessionFactory.getVideoSession(e);t=n.getClientId()}),t}},this.updateCustomMetric=function(e,t,n){this._released||this._exceptionCatcher.runProtected("Client.updateCustomMetric",function(){var r=_._sessionFactory.getVideoSession(e);r.updateCustomMetric(t,n)})},this.setUniqueIdentifier=function(e,t){if(this._released)throw new Error("This instance of Conviva.Client has been released.");if(null==e||"undefined"==typeof e||"{}"==JSON.stringify(e))throw new Error("Identifiers are not set. No action taken !!");for(var n in e)this._uniqueIdentifiers[n]=e[n];t&&(this._uniqueIdentifierCallback=t)},this.setUserPreferenceForDataCollection=function(e,t){if(this._released)throw new Error("This instance of Conviva.Client has been released.");if(null==e||"undefined"==typeof e||"{}"==JSON.stringify(e))throw new Error("Identifiers are not set. No action taken !!");for(var n in e)"false"==e[n]?t?this._userPrefForData[n]=L.ConvivaIdErrorCodes.CONVIVAID_PRIVACY_RESTRICTION:this._userPrefForData[n]=L.ConvivaIdErrorCodes.CONVIVAID_USER_OPTOUT:this._userPrefForData[n]=L.ConvivaIdErrorCodes.CONVIVAID_USER_NO_RESTRICTION},this.setUserPreferenceForDataDeletion=function(e){if(this._released)throw new Error("This instance of Conviva.Client has been released.");if(null==e||"undefined"==typeof e||"{}"==JSON.stringify(e))throw new Error("Identifiers are not set. No action taken !!");for(var t in e)"true"==e[t]?this._userPrefForData[t]=L.ConvivaIdErrorCodes.CONVIVAID_USER_OPT_DELETE:this._userPrefForData[t]=L.ConvivaIdErrorCodes.CONVIVAID_USER_NO_RESTRICTION}};r.version="2.151.0.37032",r.NO_SESSION_KEY=n.NO_SESSION_KEY,r.AdPosition={PREROLL:n.AdPosition.PREROLL,MIDROLL:n.AdPosition.MIDROLL,POSTROLL:n.AdPosition.POSTROLL},r.AdStream={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},r.AdPlayer={CONTENT:n.AdPlayer.CONTENT,SEPARATE:n.AdPlayer.SEPARATE},r.ErrorSeverity={FATAL:n.ErrorSeverity.FATAL,WARNING:n.ErrorSeverity.WARNING},r.DeviceType={DESKTOP:n.DeviceType.DESKTOP,CONSOLE:n.DeviceType.CONSOLE,SETTOP:n.DeviceType.SETTOP,MOBILE:n.DeviceType.MOBILE,TABLET:n.DeviceType.TABLET,SMARTTV:n.DeviceType.SMARTTV},r.AdTechnology={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},r.AdType={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},r.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},r.DeviceCategory={ANDROID_DEVICE:n.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:n.DeviceCategory.APPLE_DEVICE,CHROMECAST:n.DeviceCategory.CHROMECAST,DESKTOP_APP:n.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:n.DeviceCategory.DEVICE_SIMULATOR,LG_TV:n.DeviceCategory.LG_TV,NINTENDO:n.DeviceCategory.NINTENDO,PLAYSTATION:n.DeviceCategory.PLAYSTATION,ROKU:n.DeviceCategory.ROKU,SAMSUNG_TV:n.DeviceCategory.SAMSUNG_TV,SMART_TV:n.DeviceCategory.SMART_TV,SET_TOP_BOX:n.DeviceCategory.SET_TOP_BOX,TIVO:n.DeviceCategory.TIVO,WEB:n.DeviceCategory.WEB,WINDOWS_DEVICE:n.DeviceCategory.WINDOWS_DEVICE,XBOX:n.DeviceCategory.XBOX,KAIOS_DEVICE:n.DeviceCategory.KAIOS_DEVICE};var i=e.ClientSettings=function(e){function t(e){if(!F.isValidString(e))throw new Error("customerKey must be valid");this.customerKey=e}function n(e){if(F.isValidString(e)){var t=e.split("://");if("cws.conviva.com"!=t[1]&&("https"==t[0]||"http"==t[0]))return e}return"https://"+r.customerKey+"."+i.defaultProductionGatewayDNS}var r=this;this._customerKey=null,F.defGet(this,"customerKey",function(){return this._customerKey}),F.defSet(this,"customerKey",function(e){F.isValidString(e)&&(this._customerKey=e)}),this._heartbeatInterval=i.defaultProductionHeartbeatInterval,F.defGet(this,"heartbeatInterval",function(){return this._heartbeatInterval}),F.defSet(this,"heartbeatInterval",function(e){if("number"==typeof e){var t=F.NumberToUnsignedInt(e);t===e&&(this._heartbeatInterval=t)}}),this._gatewayUrl=null,F.defGet(this,"gatewayUrl",function(){return this._gatewayUrl}),F.defSet(this,"gatewayUrl",function(e){if(F.isValidString(e)){var t=e.split("://"),n="https"==t[0]||"http"==t[0];if(n){var r=".com",i=-1!==e.indexOf(r,e.length-r.length);i&&(this._gatewayUrl=e)}}}),t.apply(this,arguments),this.equals=function(e){return this.customerKey===e.customerKey&&this.gatewayUrl===e.gatewayUrl&&this.heartbeatInterval===e.heartbeatInterval},this.clone=function(){var e=new i(this.customerKey);return e.gatewayUrl=n(this.gatewayUrl),e.heartbeatInterval=this.heartbeatInterval,e}};i.defaultDevelopmentGatewayUrl="https://conviva.testonly.conviva.com",i.defaultProductionGatewayUrl="https://cws.conviva.com",i.defaultProductionGatewayDNS="cws.conviva.com",i.defaultDevelopmentGatewayDNS="conviva.testonly.conviva.com",i._httpsProtocol="https://",i._httpProtocol="http://",i.defaultDevelopmentHeartbeatInterval=5,i.defaultProductionHeartbeatInterval=20;var a=e.ContentMetadata=function(){function e(){return this._assetName}function t(e){"string"==typeof e&&(this._assetName=e)}function n(){return this._custom}function r(e){"object"==typeof e&&(this._custom=F.sanitizeStringToStringObject(e))}function i(){return this._defaultResource}function o(e){"string"==typeof e&&(this._defaultResource=e)}function s(){return this._viewerId}function l(e){"string"==typeof e&&(this._viewerId=e)}function _(){return this._applicationName}function c(e){"string"==typeof e&&(this._applicationName=e)}function u(){return this._streamUrl}function d(e){"string"==typeof e&&(this._streamUrl=e)}function E(){return this._streamType}function g(e){(e===a.StreamType.UNKNOWN||e===a.StreamType.VOD||e===a.StreamType.LIVE)&&(this._streamType=e)}function S(){return this._duration}function h(e){this._duration=k.sanitizeSpecialIntegerValue(e)}function f(){return this._encodedFrameRate}function T(e){this._encodedFrameRate=k.sanitizeSpecialIntegerValue(e)}function p(){}this._assetName=null,F.defGet(this,"assetName",e),F.defSet(this,"assetName",t),this._custom={},F.defGet(this,"custom",n),F.defSet(this,"custom",r),this._defaultResource=null,F.defGet(this,"defaultResource",i),F.defSet(this,"defaultResource",o),this._viewerId=null,F.defGet(this,"viewerId",s),F.defSet(this,"viewerId",l),this._applicationName=null,F.defGet(this,"applicationName",_),F.defSet(this,"applicationName",c),this._streamUrl=null,F.defGet(this,"streamUrl",u),F.defSet(this,"streamUrl",d),this._streamType=a.StreamType.UNKNOWN,F.defGet(this,"streamType",E),F.defSet(this,"streamType",g),this._duration=-1,F.defGet(this,"duration",S),F.defSet(this,"duration",h),this._encodedFrameRate=-1,F.defGet(this,"encodedFrameRate",f),F.defSet(this,"encodedFrameRate",T),p.apply(this,arguments),this.clone=function(){var e=new a;e.assetName=this.assetName,e.applicationName=this.applicationName,e.streamUrl=this.streamUrl,e.viewerId=this.viewerId,e.defaultResource=this.defaultResource,e.streamType=this.streamType,e.duration=this.duration,e.encodedFrameRate=this.encodedFrameRate;for(var t in this.custom)e.custom[t]=this.custom[t];return e}};a.StreamType={UNKNOWN:n.StreamType.UNKNOWN,LIVE:n.StreamType.LIVE,VOD:n.StreamType.VOD};var o=(e.ErrorType={ERROR_UNKNOWN:n.ErrorType.ERROR_UNKNOWN,ERROR_IO:n.ErrorType.ERROR_IO,ERROR_TIMEOUT:n.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:n.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:n.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:n.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:n.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:n.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:n.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:n.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:n.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:n.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:n.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},e.Events={AD_REQUESTED:n.Events.AD_REQUESTED,AD_RESPONSE:n.Events.AD_RESPONSE,AD_SLOT_STARTED:n.Events.AD_SLOT_STARTED,AD_ATTEMPTED:n.Events.AD_ATTEMPTED,AD_SLOT_ENDED:n.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:n.Events.AD_IMPRESSION_START,AD_START:n.Events.AD_START,AD_FIRST_QUARTILE:n.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:n.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:n.Events.AD_THIRD_QUARTILE,AD_COMPLETE:n.Events.AD_COMPLETE,AD_END:n.Events.AD_END,AD_IMPRESSION_END:n.Events.AD_IMPRESSION_END,AD_SKIPPED:n.Events.AD_SKIPPED,AD_ERROR:n.Events.AD_ERROR,AD_PROGRESS:n.Events.AD_PROGRESS,AD_CLOSE:n.Events.AD_CLOSE,CONTENT_PAUSED:n.Events.CONTENT_PAUSED,CONTENT_RESUMED:n.Events.CONTENT_RESUMED,POD_START:n.Events.POD_START,POD_END:n.Events.POD_END},e.SystemFactory=function(e,t){function n(e,t){if(!(e instanceof E))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this._systemInterface=e,this._timeInterface=this._systemInterface._timeInterface,this._timerInterface=this._systemInterface._timerInterface,this._httpInterface=this._systemInterface._httpInterface,this._storageInterface=this._systemInterface._storageInterface,this._metadataInterface=this._systemInterface._metadataInterface,this._loggingInterface=this._systemInterface._loggingInterface,t instanceof s?this._settings=t.clone():this._settings=new s}var r=this;n.apply(this,arguments),this.configure=function(e,t){this._packageName=e,this._clientSettings=t},this.release=function(){this._systemInterface.release(),this._systemInterface=null,this._packageName=null,this._settings=null,this._logBuffer=null};var i={build:function(){return new G(r._loggingInterface,r._timeInterface,r.getSettings(),r._logBuffer,r._packageName)}};this.buildLogger=function(){return i.build()},this.buildSessionFactory=function(e,t,n){return new P(e,t,n,this)},this.buildPing=function(){return new K(this.buildLogger(),this.buildHttpClient(),this._clientSettings)},this.buildCallbackWithTimeout=function(){return new D(this.buildTimer())},this.buildCallbackWithTimeoutNoPing=function(){var e=null,t=new b(this.buildLogger(),e,this.getSettings()),n=new q(this.buildLogger(),this._timerInterface,t);return new D(n)},this.buildHttpClient=function(){return new Q(this.buildLogger(),this._httpInterface,this.buildCallbackWithTimeoutNoPing(),this.getSettings())},this.buildExceptionCatcher=function(){return new b(this.buildLogger(),this.buildPing(),this.getSettings())},this.buildTime=function(){return new W(this._timeInterface,this.buildLogger())},this.buildTimer=function(){return new q(this.buildLogger(),this._timerInterface,this.buildExceptionCatcher())},this.buildStorage=function(){return new H(this.buildLogger(),this._storageInterface,this.buildCallbackWithTimeout(),this.getSettings())},this.buildConfig=function(){return new L(this.buildLogger(),this.buildStorage(),this.buildJsonInterface())},this.buildSystemMetadata=function(){return new x(this.buildLogger(),this._metadataInterface,this.buildExceptionCatcher())},this.buildCwsProtocol=function(){return new N},this.buildGatewayControl=function(e){return new V(e,this.buildLogger(),this.buildHttpClient(),this.buildJsonInterface())},this.buildCwsSession=function(e,t,n,r){var i=this.buildGatewayControl(t);return new M(this.buildEventQueue(),e,t,this.buildLogger(),this.buildExceptionCatcher(),this.buildTimer(),i,this.buildCwsProtocol(),this.buildTime(),this.getLogBuffer(),n,r)},this.buildSession=function(e,t,n,r,i,a){var o=this.buildExceptionCatcher(),s=this.buildLogger(),l=t.clone(),_=this.buildCwsSession(e,l,n,a);return new O(r,i,n,this.buildSystemMetadata(),_,o,s)},this.buildEventQueue=function(){return new U},this.buildJsonInterface=function(){return new C},this.getLogBuffer=function(){return this._logBuffer},this.getSettings=function(){return this._settings},this._logBuffer=new w}),s=e.SystemSettings=function(){function e(){}this._logLevel=s.defaultProductionLogLevel,F.defGet(this,"logLevel",function(){return this._logLevel}),F.defSet(this,"logLevel",function(e){if("number"==typeof e){var t=F.NumberToUnsignedInt(e);t===e&&t>=s.LogLevel.DEBUG&&t<=s.LogLevel.ERROR&&(this._logLevel=t)}}),this._allowUncaughtExceptions=s.defaultProductionAllowUncaughtExceptions,F.defGet(this,"allowUncaughtExceptions",function(){return this._allowUncaughtExceptions}),F.defSet(this,"allowUncaughtExceptions",function(e){F.isBoolean(e)&&(this._allowUncaughtExceptions=e)}),this._storageTimeout=s.defaultStorageTimeout,F.defGet(this,"storageTimeout",function(){return this._storageTimeout}),F.defSet(this,"storageTimeout",function(e){if("number"==typeof e){var t=F.NumberToUnsignedInt(e);t===e&&(this._storageTimeout=t)}}),this._httpTimeout=s.defaultHttpTimeout,F.defGet(this,"httpTimeout",function(){return this._httpTimeout}),F.defSet(this,"httpTimeout",function(e){if("number"==typeof e){var t=F.NumberToUnsignedInt(e);t===e&&(this._httpTimeout=t)}}),e.apply(this,arguments),this.equals=function(e){return this.logLevel===e.logLevel&&this.allowUncaughtExceptions===e.allowUncaughtExceptions&&this.storageTimeout===e.storageTimeout&&this.httpTimeout===e.httpTimeout},this.clone=function(){var e=new s;return e.logLevel=this.logLevel,e.allowUncaughtExceptions=this.allowUncaughtExceptions,e.storageTimeout=this.storageTimeout,e.httpTimeout=this.httpTimeout,e}};s.LogLevel={DEBUG:n.LogLevel.DEBUG,INFO:n.LogLevel.INFO,WARNING:n.LogLevel.WARNING,ERROR:n.LogLevel.ERROR,NONE:n.LogLevel.NONE},s.defaultDevelopmentLogLevel=s.LogLevel.DEBUG,s.defaultProductionLogLevel=s.LogLevel.NONE,s.defaultDevelopmentAllowUncaughtExceptions=!0,s.defaultProductionAllowUncaughtExceptions=!1,s.defaultStorageTimeout=10,s.defaultHttpTimeout=10;var l=e.PlayerStateManager=function(n){function r(e){i._systemFactory=e,i._logger=i._systemFactory.buildLogger(),i._logger.setModuleName("PlayerStateManager"),i._exceptionCatcher=i._systemFactory.buildExceptionCatcher()}var i=this;i._monitorNotifier=null,i._bitrateKbps=-2,i._playerState=l.PlayerState.UNKNOWN,i._currentMetadata={},i._renderedFrameRate=-2,i._encodedFrameRate=-2,i._duration=-2,i._playerVersion=null,i._playerType=null,i._streamUrl=null,i._moduleName=null,i._moduleVersion=null,i._width=-1,i._height=-1,i._connectionType=null,i._linkEncryption=null,i._lastError=null,i._pendingErrors=[],i._released=!1,this.release=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.release",function(){null!=i._monitorNotifier&&i._monitorNotifier.onRelease(),i.removeMonitoringNotifier(),i._systemFactory=null,i._logger=null,i._exceptionCatcher=null,i._released=!0})},this.setPlayheadTime=function(e){},this.setBufferLength=function(e){},this.setRenderedFrameRate=function(e){},this.getEncodedFrameRate=function(){return i._encodedFrameRate},this.setEncodedFrameRate=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setEncodedFrameRate",function(){var t=k.sanitizeSpecialIntegerValue(e);t>=-1&&(i._encodedFrameRate=t,null!=i._monitorNotifier&&i._monitorNotifier.onEncodedFrameRateChange(i._encodedFrameRate))})},this.getDuration=function(){return i._duration},this.setClientMeasureInterface=function(t){F.validateInterface(t,new e.ClientMeasureInterface,"ClientMeasureInterface"),this._playerInterface=t},this.getPHT=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getPHT?this._playerInterface.getPHT():l.DEFAULT_PHT},this.getBufferLength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getBufferLength?this._playerInterface.getBufferLength():l.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getSignalStrength?this._playerInterface.getSignalStrength():l.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getRenderedFrameRate?this._playerInterface.getRenderedFrameRate():l.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setDuration",function(){var t=k.sanitizeSpecialIntegerValue(e);t>=-1&&(i._duration=t,null!=i._monitorNotifier&&i._monitorNotifier.onContentLengthChange(i._duration))})},this.getStreamUrl=function(){return i._streamUrl},this.setStreamUrl=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setStreamUrl",function(){null!=e&&(i._streamUrl=e,null!=i._monitorNotifier&&i._monitorNotifier.onStreamUrlChange(i._streamUrl))})},this.getModuleName=function(){return i._moduleName},this.getModuleVersion=function(){return i._moduleVersion},this.setModuleNameAndVersion=function(e,t){i._moduleName=e,i._moduleVersion=t},this.getPlayerType=function(){return i._playerType},this.setPlayerType=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerType",function(){i._playerType=e,null!=i._monitorNotifier&&i._monitorNotifier.onPlayerTypeChange(i._playerType)})},this.getPlayerVersion=function(){return i._playerVersion},this.setPlayerVersion=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerVersion",function(){i._playerVersion=e,null!=i._monitorNotifier&&i._monitorNotifier.onPlayerVersionChange(i._playerVersion)})},this.setMonitoringNotifier=function(e,t){return i._released?void 0:null==i._monitorNotifier&&(i._monitorNotifier=e,i._logger.setSessionId(t),!0)},this.removeMonitoringNotifier=function(){i._released||(i._monitorNotifier=null,i._logger.setSessionId(null))},this.pushCurrentState=function(){i.setPlayerState(i.getPlayerState()),i.setBitrateKbps(i.getBitrateKbps()),i.setDuration(i.getDuration()),i.setEncodedFrameRate(i.getEncodedFrameRate()),i.setStreamUrl(i.getStreamUrl()),i.setPlayerType(i.getPlayerType()),i.setPlayerVersion(i.getPlayerVersion());for(var e=0;e<i._pendingErrors.length;e++){var t=i._pendingErrors[e];i.setError(t)}i._pendingErrors=[]},this.getPlayerState=function(){return i._playerState},this.setPlayerState=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerState",function(){l.isValidPlayerState(e)?(i._playerState=e,null!=i._monitorNotifier&&i._monitorNotifier.onPlayerStateChange(i._playerState)):i._logger.error("PlayerStateManager.SetPlayerState(): invalid state: "+e)})},this.getBitrateKbps=function(){return i._bitrateKbps},this.setBitrateKbps=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setBitrateKbps",function(){var t=k.sanitizeSpecialIntegerValue(e);t>=-1&&(i._bitrateKbps=t,null!=i._monitorNotifier&&i._monitorNotifier.onBitrateChange(i._bitrateKbps))})},this.setPlayerSeekStart=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekStart()",function(){null!=i._monitorNotifier&&i._monitorNotifier.onSeekEvent(l.SEEK_ACTIONS_TYPE.SEEK_START,e)})},this.setPlayerSeekEnd=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekEnd()",function(){null!=i._monitorNotifier&&i._monitorNotifier.onSeekEvent(l.SEEK_ACTIONS_TYPE.SEEK_END,-1);
})},this.setUserSeekButtonUp=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonUp()",function(){null!=i._monitorNotifier&&i._monitorNotifier.onSeekEvent(l.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonDown()",function(){null!=i._monitorNotifier&&i._monitorNotifier.onSeekEvent(l.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionWidth()",function(){var t=k.sanitizeSpecialIntegerValue(e);t>0&&(i._width=t),null!=i._monitorNotifier&&i._monitorNotifier.onStreamResolutionWidthChange(i._width)})},this.setVideoResolutionHeight=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionHeight()",function(){var t=k.sanitizeSpecialIntegerValue(e);t>0&&(i._height=t),null!=i._monitorNotifier&&i._monitorNotifier.onStreamResolutionHeightChange(i._height)})},this.setConnectionType=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setConnectionType()",function(){i._connectionType=e,null!=i._monitorNotifier&&i._monitorNotifier.onConnectionTypeChange(i._connectionType)})},this.setLinkEncryption=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setLinkEncryption()",function(){i._linkEncryption=e,null!=i._monitorNotifier&&i._monitorNotifier.onLinkEncryptionChange(i._linkEncryption)})},this.setSignalStrength=function(e){},this.setError=function(e){if(i._lastError=e,null!=i._monitorNotifier){var t=e.errorCode,n=e.severity;i._monitorNotifier.onError(t,n)}else i._pendingErrors.push(e)},this.sendError=function(e,n){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.sendError",function(){var r=new t.StreamerError(e,n);i.setError(r)})},this.reset=function(){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.reset",function(){i._bitrateKbps=-2,i._playerState=l.PlayerState.UNKNOWN,i._currentMetadata={},i._renderedFrameRate=-1,i._encodedFrameRate=-1,i._duration=-1,i._playerVersion=null,i._playerType=null,i._streamUrl=null,i._lastError=null,i._pendingErrors=[]})},this.setCDNServerIP=function(e){i._released||i._exceptionCatcher.runProtected("PlayerStateManager.setCDNServerIP",function(){null!=i._monitorNotifier&&i._monitorNotifier.onCDNServerIPChange(e)})},this.getError=function(){return i._lastError},r.apply(i,arguments)};l.PlayerState={STOPPED:n.PlayerState.STOPPED,PLAYING:n.PlayerState.PLAYING,BUFFERING:n.PlayerState.BUFFERING,PAUSED:n.PlayerState.PAUSED,UNKNOWN:n.PlayerState.UNKNOWN,NOT_MONITORED:n.PlayerState.NOT_MONITORED},l.isValidPlayerState=function(e){return e===l.PlayerState.STOPPED||e===l.PlayerState.PLAYING||e===l.PlayerState.BUFFERING||e===l.PlayerState.PAUSED||e===l.PlayerState.UNKNOWN||e===l.PlayerState.NOT_MONITORED},l.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},l.DEFAULT_SIGNAL_STRENGTH=1e3,l.DEFAULT_RENDERED_FRAME_RATE=-1,l.DEFAULT_BUFFER_LENGTH=-1,l.DEFAULT_PHT=-1;var _=(e.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}},e.HttpInterface=function(){this.makeRequest=function(e,t,n,r,i,a){},this.release=function(){}}),c=e.LoggingInterface=function(){this.consoleLog=function(e,t){},this.release=function(){}},u=e.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.release=function(){}},d=e.StorageInterface=function(){this.saveData=function(e,t,n,r){},this.loadData=function(e,t,n){},this.release=function(){}},E=e.SystemInterface=function(e,t,n,r,i,a){function o(e,t,n,r,i,a){F.validateInterface(e,new g,"TimeInterface"),F.validateInterface(t,new S,"TimerInterface"),F.validateInterface(n,new _,"HttpInterface"),F.validateInterface(r,new d,"StorageInterface"),F.validateInterface(i,new u,"MetadataInterface"),F.validateInterface(a,new c,"LoggingInterface"),this._timeInterface=e,this._timerInterface=t,this._httpInterface=n,this._storageInterface=r,this._metadataInterface=i,this._loggingInterface=a}o.apply(this,arguments),this.release=function(){null!=this._timeInterface&&(this._timeInterface.release(),this._timeInterface=null),null!=this._timerInterface&&(this._timerInterface.release(),this._timerInterface=null),null!=this._httpInterface&&(this._httpInterface.release(),this._httpInterface=null),null!=this._storageInterface&&(this._storageInterface.release(),this._storageInterface=null),null!=this._metadataInterface&&(this._metadataInterface.release(),this._metadataInterface=null),null!=this._loggingInterface&&(this._loggingInterface.release(),this._loggingInterface=null)}},g=e.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},S=e.TimerInterface=function(){this.createTimer=function(e,t,n){},this.release=function(){}},h=t.AdAnalytics=function(){function t(e,t,n){o._client=e,o._systemFactory=t,o._playerMonitor=n,o._timer=t.buildTimer(),o._logger=t.buildLogger(),o._logger.setModuleName("AdAnalytics"),o._adPlayerMonitor=new f(o._client,o._timer),p.call(this)}function i(e){a(e)}function a(e){return null==o._adPlayerMonitor?void(null!=o._logger&&o._logger.error("AdAnalytics.onAdInitiated() : contentPlayer - "+n.INVALID_PLAYER_MONITOR)):(F.dictCount(e)>0&&o.setAdInfo(e),void(o._adPlayerMonitor.getIsAffectingUser()||(o._adPlayerMonitor.setContentPlayerMonitor(o._playerMonitor),o._adPlayerMonitor.setAffectingUser(!0))))}var o=this;o._client=null,o._logger=null,o._systemFactory=null,o._timer=null,o._playerMonitor=null,o._adPlayerMonitor=null,o._adPlayer=null,o._dropInModule=null,t.apply(this,arguments),this.setAdInfo=function(e){return F.dictCount(e)<=0?void(null!=o._logger&&o._logger.error("AdAnalytics.setAdInfo() : AD Info is not set")):(null!=o._logger&&o._logger.debug("AdAnalytics.setAdInfo()"),void(null!=o._adPlayerMonitor&&o._adPlayerMonitor.setOrUpdateMetadataInfo(e)))},this.setAdPlayerInfo=function(e){return F.dictCount(e)<=0?void(null!=o._logger&&o._logger.error("AdAnalytics.setAdPlayerInfo() : Ad Player Info is not set")):(null!=o._logger&&o._logger.debug("AdAnalytics.setAdPlayerInfo()"),void(null!=o._adPlayerMonitor&&o._adPlayerMonitor.setOrUpdateMetadataInfo(e)))},this.reportAdMetric=function(){return 0==arguments.length?void(null!=o._logger&&o._logger.error("AdAnalytics.reportAdMetric() : Need to report metric mandatory")):(null!=o._logger&&o._logger.debug("AdAnalytics.reportAdMetric()"),void(1==arguments.length?o.reportMetric(arguments[0]):2==arguments.length?o.reportMetric(arguments[0],arguments[1]):3==arguments.length?o.reportMetric(arguments[0],arguments[1],arguments[2]):4==arguments.length&&o.reportMetric(arguments[0],arguments[1],arguments[2],arguments[3])))},this.setCallback=function(e){null!=o._adPlayerMonitor&&o._adPlayerMonitor.setCallback(e)},this.reportAdFailed=function(e,t){return null==o._adPlayerMonitor?void(null!=o._logger&&o._logger.error("AdAnalytics.reportAdFailed() : "+n.INVALID_PLAYER_MONITOR)):(F.dictCount(t)>0&&o.setAdInfo(t),o._adPlayerMonitor.getIsAffectingUser()||(o._adPlayerMonitor.setContentPlayerMonitor(o._playerMonitor),o._adPlayerMonitor.setAffectingUser(!0)),null!=o._logger&&o._logger.debug("AdAnalytics.reportAdFailed() : "+e),o.reportAdError(e,r.ErrorSeverity.FATAL),void o.reportAdEnded())},this.reportAdLoaded=function(e){null!=o._logger&&o._logger.debug("AdAnalytics.reportAdLoaded()"),i(e)},this.reportAdStarted=function(e){null!=o._logger&&o._logger.debug("AdAnalytics.reportAdStarted()"),i(e)},this.reportAdEnded=function(){return null==o._adPlayerMonitor?void(null!=o._logger&&o._logger.error("AdAnalytics.reportAdEnded() : "+n.INVALID_AD_PLAYER_MONITOR)):(null!=o._logger&&o._logger.debug("AdAnalytics.reportAdEnded()"),void(o._adPlayerMonitor.getIsAffectingUser()&&(o._adPlayerMonitor.setContentPlayerMonitor(null),o._adPlayerMonitor.setAffectingUser(!1))))},this.reportAdError=function(e,t){if(null==o._adPlayerMonitor)return void(null!=o._logger&&o._logger.error("AdAnalytics.reportAdError() : "+n.INVALID_PLAYER_MONITOR));null!=o._logger&&o._logger.debug("AdAnalytics.reportAdError() : "+e);var r=new B(e,t);o._adPlayerMonitor.setError(r)},this.reportAdPlayerEvent=function(e,t){return F.isValidString(e)?(null!=o._logger&&o._logger.debug("AdAnalytics.reportAdPlayerEvent()"),null==o._adPlayerMonitor?void(null!=o._logger&&o._logger.error("AdAnalytics.reportAdPlayerEvent() : "+n.INVALID_PLAYER_MONITOR)):void o._adPlayerMonitor.setEvent(e,t)):void(null!=o._logger&&o._logger.error("AdAnalytics.reportAdPlayerEvent(): eventType parameter must be a valid string."))},this.reportAdSkipped=function(){return null==o._adPlayerMonitor?void(null!=o._logger&&o._logger.error("AdAnalytics.reportAdSkipped() : "+n.INVALID_PLAYER_MONITOR)):(null!=o._logger&&o._logger.debug("AdAnalytics.reportAdSkipped()"),o.reportAdPlayerEvent(n.Events.AD_SKIPPED),void o.reportAdEnded())},this.release=function(){null!=o._logger&&o._logger.debug("AdAnalytics.release()"),null!=o._adPlayerMonitor&&(o._adPlayerMonitor.getIsAffectingUser()&&(o._adPlayerMonitor.setContentPlayerMonitor(null),o._adPlayerMonitor.setAffectingUser(!1)),o._adPlayerMonitor.setCallback(null),o._adPlayerMonitor.release(),o._adPlayerMonitor=null),"undefined"!=typeof e.AdProxyMonitor&&null!=o._dropInModule&&(e.AdProxyMonitor.release(o._dropInModule),o._dropInModule=null)},this.setAdListener=function(t,n){return void 0==t?void o._logger.error("AdAnalytics.setAdListener() : Need to configure the adListener instance"):("undefined"!=typeof n&&"undefined"!=typeof n.convivaModule?e.AdProxyMonitor=convivaModule.AdProxyMonitor:"undefined"!=typeof ConvivaModule&&(e.AdProxyMonitor=ConvivaModule.AdProxyMonitor),"undefined"==typeof e.AdProxyMonitor?void o._logger.error("AdAnalytics.setAdListener() : Include the missing Ads SDK Module"):void(null==t&&null!=o._dropInModule?(e.AdProxyMonitor.release(o._dropInModule),o._dropInModule=null):null!=t&&null!=o._dropInModule?(e.AdProxyMonitor.release(o._dropInModule),null!=o._logger&&o._logger.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),o._dropInModule=e.AdProxyMonitor.initConvivaDropIn(t,n,this,e)):null!=t&&null==o._dropInModule&&(null!=o._logger&&o._logger.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),o._dropInModule=e.AdProxyMonitor.initConvivaDropIn(t,n,this,e))))},this.reportAdBreakStarted=function(e,t,r){return null==o._playerMonitor?void o._logger.error("AdAnalytics.reportAdBreakStarted() : "+n.INVALID_PLAYER_MONITOR):(null!=o._logger&&o._logger.debug("AdAnalytics.reportAdBreakStarted()"),o._adType=e,o._adPlayer=t,void o._playerMonitor.setAdBreakStartInfo(e,t,r))},this.reportAdBreakEnded=function(){return null==o._playerMonitor?void o._logger.error("AdAnalytics.reportAdBreakEnded() : "+n.INVALID_PLAYER_MONITOR):(null!=o._logger&&o._logger.debug("AdAnalytics.reportAdBreakEnded()"),o._adType=null,o._adPlayer=null,void o._playerMonitor.setAdBreakEndInfo())},this.getAdType=function(){return null!=o._playerMonitor?o._playerMonitor._adType:null},this.getAdPlayer=function(){return null!=o._playerMonitor?o._playerMonitor._adPlayer:null},h.prototype=Object.create(p.prototype),h.prototype.constructor=h},f=t.AdPlayerMonitorImpl=function(){function e(e,t){A.call(this,e,t)}var t=this;t._convivaClient=null,t._contentPlayerMonitor=null,e.apply(this,arguments),this.setContentPlayerMonitor=function(e){this.getContentPlayerMonitor()!=e&&(this.update(),null==e?t._contentPlayerMonitor=null:t._contentPlayerMonitor=e)},this.getContentPlayerMonitor=function(){return t._contentPlayerMonitor},this.createSession=function(){var e=this.getContentPlayerMonitor();if(null!=t._convivaClient){t._playerStateManager=t._convivaClient.getPlayerStateManager(),t.onPlayerInfoChanged(),t._playerStateManager.setClientMeasureInterface(this);var n=null;null!=e&&(n=e.getSessionKey()),t._contentSessionKey=t._convivaClient.createAdSession(n,t._contentMetadata,t._playerStateManager)}},f.prototype=Object.create(A.prototype),f.prototype.constructor=f},T=e.Analytics={init:function(t,a,l){if(null!=this._client&&void 0!=this._client)return void this._logger.error("Client is already configured");if(arguments.length<=0)throw new Error("customerKey must be valid");var _=null,c=null,u=null;if("string"==typeof arguments[0]&&(_=arguments[0],!F.isValidString(_)))throw new Error("customerKey must be valid");arguments.length>=2&&"object"==typeof arguments[1]&&(c=arguments[1]),arguments.length>=3&&"object"==typeof arguments[2]&&(u=arguments[2]);var d=new i(_),E=new s;F.dictCount(u)>0&&(null!=u[n.GATEWAY_URL]&&(d.gatewayUrl=u[n.GATEWAY_URL]),null!=u[n.LOG_LEVEL]&&(E.logLevel=u[n.LOG_LEVEL]));var g=new e.Impl.Html5Logging,S=new e.Impl.Html5Storage,h=new e.Impl.Html5Http,f=new e.Impl.Html5Timer,p=new e.Impl.Html5Time;(void 0==this._metadataInterface||null==this._metadataInterface)&&(this._metadataInterface=new e.Impl.Html5Metadata),null!=c&&void 0!=c&&(null!=c[e.Constants.CallbackFunctions.CONSOLE_LOG]&&(g.consoleLog=c[e.Constants.CallbackFunctions.CONSOLE_LOG]),null!=c[e.Constants.CallbackFunctions.MAKE_REQUEST]&&(h.makeRequest=c[e.Constants.CallbackFunctions.MAKE_REQUEST]),null!=c[e.Constants.CallbackFunctions.SAVE_DATA]&&(S.saveData=c[e.Constants.CallbackFunctions.SAVE_DATA]),null!=c[e.Constants.CallbackFunctions.LOAD_DATA]&&(S.loadData=c[e.Constants.CallbackFunctions.LOAD_DATA]),null!=c[e.Constants.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(p.getEpochTimeMs=c[e.Constants.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),null!=c[e.Constants.CallbackFunctions.CREATE_TIMER]&&(f.createTimer=c[e.Constants.CallbackFunctions.CREATE_TIMER])),this._systemInterface=new e.SystemInterface(p,f,h,S,this._metadataInterface,g),this._systemFactory=new o(this._systemInterface,E),this._systemFactory.configure("Analytics",d),this._client=new r(d,this._systemFactory),this._client.version=T.version,this._logger=this._systemFactory.buildLogger(),this._logger.setModuleName("Analytics")},release:function(){var e=0;if(null!=this._adAnalyticsArray&&void 0!=this._adAnalyticsArray){for(e=0;e<this._adAnalyticsArray.length;e++){var t=this._adAnalyticsArray[e];null!=t&&(t.release(),t._logger=null,t._timer=null,this._adAnalyticsArray.splice(e,1),e--)}this._adAnalyticsArray=null}if(null!=this._videoAnalyticsArray&&void 0!=this._videoAnalyticsArray){for(e=0;e<this._videoAnalyticsArray.length;e++){var n=this._videoAnalyticsArray[e];null!=n&&(n.release(),n._logger=null,n._timer=null,this._videoAnalyticsArray.splice(e,1),e--)}this._videoAnalyticsArray=null}null!=this._systemFactory&&void 0!=this._systemFactory&&(this._systemFactory.release(),this._systemFactory=null),null!=this._client&&void 0!=this._client&&(this._client.release(),this._client=null),this._client=null,this._logger=null,this._systemInterface=null,this._metadataInterface=null},setUniqueIdentifier:function(e,t){if(null==this._client||void 0==this._client)throw new Error(n.CLIENT_CONFIGURATION_FAILED);this._client.setUniqueIdentifier(e,t)},setUserPreferenceForDataCollection:function(e,t){if(null==this._client||void 0==this._client)throw new Error(n.CLIENT_CONFIGURATION_FAILED);this._client.setUserPreferenceForDataCollection(e,t)},setUserPreferenceForDataDeletion:function(e){if(null==this._client||void 0==this._client)throw new Error(n.CLIENT_CONFIGURATION_FAILED);this._client.setUserPreferenceForDataDeletion(e)},reportAppEvent:function(e,t){if(null==this._client||void 0==this._client)throw new Error(n.CLIENT_CONFIGURATION_FAILED);this._client.sendCustomEvent(r.NO_SESSION_KEY,e,t)},reportAppBackgrounded:function(){if(null==this._client||void 0==this._client)throw new Error(n.CLIENT_CONFIGURATION_FAILED);this._client.sendCustomEvent(r.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(null==this._client||void 0==this._client)throw new Error(n.CLIENT_CONFIGURATION_FAILED);this._client.sendCustomEvent(r.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(e){if(!(e instanceof r))throw new Error(n.CLIENT_CONFIGURATION_FAILED);this._client=e,this._systemFactory=this._client._systemFactory,this._logger=this._systemFactory.buildLogger(),this._logger.setModuleName("Analytics")},buildVideoAnalytics:function(){if(null==this._client||void 0==this._client)throw new Error(n.CLIENT_CONFIGURATION_FAILED);var e=new I(this._client,this._systemFactory);return(null==this._videoAnalyticsArray||void 0==this._videoAnalyticsArray)&&(this._videoAnalyticsArray=[]),this._videoAnalyticsArray.push(e),e},buildAdAnalytics:function(e){if(null==this._client||void 0==this._client)throw new Error(n.CLIENT_CONFIGURATION_FAILED);var t=new h(this._client,this._systemFactory,null!=e&&void 0!=e?e.getPlayerMonitor():null);return(null==this._adAnalyticsArray||void 0==this._adAnalyticsArray)&&(this._adAnalyticsArray=[]),this._adAnalyticsArray.push(t),t},setDeviceMetadata:function(t){return arguments.length<=0||0==F.dictCount(t)?void this._logger.error("Device Metadata must be valid"):((void 0==this._metadataInterface||null==this._metadataInterface)&&(this._metadataInterface=new e.Impl.Html5Metadata),null!=t[e.Constants.DeviceMetadata.BRAND]&&(this._metadataInterface.getDeviceBrand=function(){return t[e.Constants.DeviceMetadata.BRAND]}),null!=t[e.Constants.DeviceMetadata.MANUFACTURER]&&(this._metadataInterface.getDeviceManufacturer=function(){return t[e.Constants.DeviceMetadata.MANUFACTURER]}),null!=t[e.Constants.DeviceMetadata.MODEL]&&(this._metadataInterface.getDeviceModel=function(){return t[e.Constants.DeviceMetadata.MODEL]}),null!=t[e.Constants.DeviceMetadata.TYPE]&&(this._metadataInterface.getDeviceType=function(){return t[e.Constants.DeviceMetadata.TYPE]}),null!=t[e.Constants.DeviceMetadata.VERSION]&&(this._metadataInterface.getDeviceVersion=function(){return t[e.Constants.DeviceMetadata.VERSION]}),null!=t[e.Constants.DeviceMetadata.OS_NAME]&&(this._metadataInterface.getOperatingSystemName=function(){return t[e.Constants.DeviceMetadata.OS_NAME]}),null!=t[e.Constants.DeviceMetadata.OS_VERSION]&&(this._metadataInterface.getOperatingSystemVersion=function(){return t[e.Constants.DeviceMetadata.OS_VERSION]}),void(null!=t[e.Constants.DeviceMetadata.CATEGORY]&&(this._metadataInterface.getDeviceCategory=function(){return t[e.Constants.DeviceMetadata.CATEGORY]})))},reportDeviceMetric:function(e,t){var r=0;if(null!=this._adAnalyticsArray&&void 0!=this._adAnalyticsArray)for(r=0;r<this._adAnalyticsArray.length;r++){var i=this._adAnalyticsArray[r];if(null!=i)switch(e){case n.Network.SIGNAL_STRENGTH:case n.Network.LINK_ENCRYPTION:case n.Network.CONNECTION_TYPE:i.reportAdMetric(e,t,p.ReportMetric.AD_ONLY)}}if(null!=this._videoAnalyticsArray&&void 0!=this._videoAnalyticsArray)for(r=0;r<this._videoAnalyticsArray.length;r++){var a=this._videoAnalyticsArray[r];if(null!=a)switch(e){case n.Network.SIGNAL_STRENGTH:case n.Network.LINK_ENCRYPTION:case n.Network.CONNECTION_TYPE:a.reportPlaybackMetric(e,t)}}}};T.version="4.0.12";var p=t.AnalyticsImpl=function(){function e(){}function t(){var e=null!=f._adPlayerMonitor,t=f.getAdType(),r=f.getAdPlayer();return t==n.AdType.SERVER_SIDE&&r==n.AdPlayer.CONTENT?p.ReportMetric.AD_CONTENT:t!=n.AdType.SERVER_SIDE||r!=n.AdPlayer.SEPARATE?t==n.AdType.CLIENT_SIDE&&r==n.AdPlayer.CONTENT?p.ReportMetric.AD_ONLY:t==n.AdType.CLIENT_SIDE&&r==n.AdPlayer.SEPARATE?null!=e&&e?p.ReportMetric.AD_ONLY:p.ReportMetric.CONTENT_ONLY:e?p.ReportMetric.AD_ONLY:p.ReportMetric.CONTENT_ONLY:void 0}function r(e,t,n){var r=parseInt(e,10),i=parseInt(t,10);return isNaN(r)&&isNaN(i)?void f._logger.error("reportPlaybackResolution() : width and height are not numbers"):(isNaN(r)&&f._logger.warning("reportPlaybackResolution() : width is not a number"),isNaN(i)&&f._logger.warning("reportPlaybackResolution() : height is not a number"),null==f._adPlayerMonitor||n!=p.ReportMetric.AD_ONLY&&n!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.updateVideoSize(r,i),void(null==f._playerMonitor||n!=p.ReportMetric.CONTENT_ONLY&&n!=p.ReportMetric.AD_CONTENT||f._playerMonitor.updateVideoSize(r,i)))}function i(e,t){return l.isValidPlayerState(e)?(null==f._adPlayerMonitor||t!=p.ReportMetric.AD_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.setPlayerState(e),void((null!=f._playerMonitor&&t==p.ReportMetric.CONTENT_ONLY||t==p.ReportMetric.AD_CONTENT)&&f._playerMonitor.setPlayerState(e))):void f._logger.error("reportPlayerState() : Player State is not valid")}function a(e,t){var n=parseInt(e,10);return isNaN(n)?void f._logger.error("reportPlayerPlayHeadTime() : playheadtime is not a number"):(null==f._adPlayerMonitor||t!=p.ReportMetric.AD_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.updatePlayheadTime(n),void(null==f._playerMonitor||t!=p.ReportMetric.CONTENT_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._playerMonitor.updatePlayheadTime(n)))}function o(e,t){var n=parseInt(e,10);return isNaN(n)?void f._logger.error("reportPlayerBufferLength() : buffer length is not a number"):(null==f._adPlayerMonitor||t!=p.ReportMetric.AD_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.updateBufferLength(n),void(null==f._playerMonitor||t!=p.ReportMetric.CONTENT_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._playerMonitor.updateBufferLength(n)))}function s(e,t){var n=parseInt(e,10);null==f._adPlayerMonitor||t!=p.ReportMetric.AD_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.setSeeking(!0,n),null==f._playerMonitor||t!=p.ReportMetric.CONTENT_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._playerMonitor.setSeeking(!0,n)}function _(e){null==f._adPlayerMonitor||e!=p.ReportMetric.AD_ONLY&&e!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.setSeeking(!1,-1),null==f._playerMonitor||e!=p.ReportMetric.CONTENT_ONLY&&e!=p.ReportMetric.AD_CONTENT||f._playerMonitor.setSeeking(!1,-1)}function c(e,t){var n=parseInt(e,10);return isNaN(n)?void f._logger.error("reportPlayerBitrate() : bitrate is not a number"):(null==f._adPlayerMonitor||t!=p.ReportMetric.AD_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.updateBitrate(n),void(null==f._playerMonitor||t!=p.ReportMetric.CONTENT_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._playerMonitor.updateBitrate(n)))}function u(e,t){var n=parseInt(e,10);return isNaN(n)?void f._logger.error("reportPlayerRenderedFrameRate() : rendered framerate is not a number"):(null==f._adPlayerMonitor||t!=p.ReportMetric.AD_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.updateVideoRenderedFrameRate(n),void(null==f._playerMonitor||t!=p.ReportMetric.CONTENT_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._playerMonitor.updateVideoRenderedFrameRate(n)))}function d(e,t){return F.isValidString(e)?(null==f._adPlayerMonitor||t!=p.ReportMetric.AD_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.updateCDNServerIp(e),void(null==f._playerMonitor||t!=p.ReportMetric.CONTENT_ONLY&&t!=p.ReportMetric.AD_CONTENT||f._playerMonitor.updateCDNServerIp(e))):void f._logger.error("reportCDNServerIp() : CDNServerIP is not a valid string")}function E(e){var t=parseInt(e,10);return isNaN(t)?void f._logger.error("reportSignalStrength() : Signal Strength is not a number"):null!=f._adPlayerMonitor?void f._adPlayerMonitor.updateCurrentSignalStrength(t):void(null!=f._playerMonitor&&f._playerMonitor.updateCurrentSignalStrength(t))}function g(e){return F.isValidString(e)?null!=f._adPlayerMonitor?void f._adPlayerMonitor.updateLinkEncryption(e):void(null!=f._playerMonitor&&f._playerMonitor.updateLinkEncryption(e)):void f._logger.error("reportLinkEncryption() : Link Encryption is not a valid string")}function S(e){return F.isValidString(e)?null!=f._adPlayerMonitor?void f._adPlayerMonitor.updateConnectionType(e):void(null!=f._playerMonitor&&f._playerMonitor.updateConnectionType(e)):void f._logger.error("reportConnectionType() : Connection Type is not a valid string")}function h(e,t,n){return F.isValidString(e)&&null!=t&&void 0!=t?(null==f._adPlayerMonitor||n!=p.ReportMetric.AD_ONLY&&n!=p.ReportMetric.AD_CONTENT||f._adPlayerMonitor.updateCustomMetric(e,t),void(null==f._playerMonitor||n!=p.ReportMetric.CONTENT_ONLY&&n!=p.ReportMetric.AD_CONTENT||f._playerMonitor.updateCustomMetric(e,t))):void f._logger.error("reportMetric() : Metric key/value should be a proper value")}var f=this;e.apply(this,arguments),this.reportMetric=function(e,l,T,y){switch(e){case n.Playback.BITRATE:"CONVIVA"===T?f._logger.info("Bitrate change requested from the Conviva Library"):f._logger.info("Bitrate change requested from the application"),c(l,t());break;case n.Playback.PLAY_HEAD_TIME:a(l,t());break;case n.Playback.RESOLUTION:r(l,T,t());break;case n.Playback.BUFFER_LENGTH:o(l,t());break;case n.Playback.PLAYER_STATE:T==p.ReportMetric.AD_ONLY?i(l,p.ReportMetric.AD_ONLY):i(l,t());break;case n.Playback.RENDERED_FRAMERATE:u(l,t());break;case n.Playback.SEEK_STARTED:arguments.length>=2&&"CONVIVA"!=l?s(l,t()):s(-1,t());break;case n.Playback.SEEK_ENDED:_(t());break;case n.Playback.CDN_IP:"CONVIVA"==T?f._logger.info("CDN Server IP change requested from the Conviva Library"):f._logger.info("CDN Server IP change requested from the application"),d(l,t());break;case n.Network.SIGNAL_STRENGTH:T==p.ReportMetric.AD_ONLY?E(l,p.ReportMetric.AD_ONLY):E(l,t());break;case n.Network.LINK_ENCRYPTION:T==p.ReportMetric.AD_ONLY?g(l,p.ReportMetric.AD_ONLY):g(l,t());break;case n.Network.CONNECTION_TYPE:T==p.ReportMetric.AD_ONLY?S(l,p.ReportMetric.AD_ONLY):S(l,t());break;default:h(e,l,t())}}};p.ReportMetric={AD_ONLY:1,CONTENT_ONLY:2,AD_CONTENT:3};var y=t.PlayerMonitor=function(){function t(e){r._timer=e}var r=this;this._affectingUser=null,this._metadata=null,this._contentMetadata=null,this._contentTags=null,this._playerState=e.PlayerStateManager.PlayerState.UNKNOWN,this._playHeadTime=-1,this._bufferHeadTime=-1,this._lastError=null,this._lastEventType=null,this._lastEventDetail=null,this._bitrate=-2,this._renderedFrameRate=-1,this._signalStrength=e.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH,this._cdnServerIP=null,this._linkEncryption=null,this._connectionType=null,this._timer=null,this._cancelTimer=null,this._playerTags=null,this._callback=null,this._adBreakInfo=null,this._adType=null,this._adPlayer=null,t.apply(this,arguments),this.getConvivaPlayerState=function(){return r._playerState},this.setPlayerState=function(e){r._playerState!=e&&(r.update(),r._playerState=e,r.updatePlayerStateManagerState())},this.isSeeking=function(){return r._seeking},this.getSeekToPos=function(){return r._seekToPos},this.setSeeking=function(e,t){r.update(),r._seeking=e,r._seekToPos=t,r.onSeekingChanged()},this.getPlayHeadTime=function(){return r._playHeadTime},this.updatePlayheadTime=function(e){r._playHeadTime=e},this.getBufferHeadTime=function(){return r._bufferHeadTime},this.updateBufferLength=function(e){r._bufferHeadTime=e},this.getBitrate=function(){return r._bitrate},this.updateBitrate=function(e){r._bitrate!=e&&(r._bitrate=e,r.updatePlayerStateManagerState())},this.getVideoRenderedFrameRate=function(){return r._renderedFrameRate},this.updateVideoRenderedFrameRate=function(e){r._renderedFrameRate=e},this.getCDNServerIp=function(){return r._cdnServerIP},this.updateCDNServerIp=function(e){r._cdnServerIP=e,r.updatePlayerStateManagerState()},this.getCurrentSignalStrength=function(){return r._signalStrength},this.updateCurrentSignalStrength=function(e){r._signalStrength=e,r.updatePlayerStateManagerState()},this.getLinkEncryption=function(){return r._linkEncryption},this.updateLinkEncryption=function(e){r._linkEncryption=e,r.updatePlayerStateManagerState()},this.getConnectionType=function(){return r._connectionType},this.updateConnectionType=function(e){r._connectionType=e,r.updatePlayerStateManagerState()},this.getVideoWidth=function(){return r._videoWidth},this.getVideoHeight=function(){return r._videoHeight},this.updateVideoSize=function(e,t){0>e&&(e=0),0>t&&(t=0),(r._videoWidth!=e||r._videoHeight!=t)&&(r._videoWidth=e,r._videoHeight=t,r.updatePlayerStateManagerState())},this.getMetadataInfo=function(){return r._metadata},this.onMetadataInfoSet=function(){null!=r.getMetadataInfo()&&(r._contentMetadata=new e.ContentMetadata,r._contentTags={},r._playerTags={},r.onMetadataInfoChanged())},this.setMetadataInfo=function(e){(null!=r._metadata||null!=e)&&(this.update(),null!=r._metadata&&(r._metadata=null,r.onMetadataInfoSet()),null!=e&&(r._metadata=F.mergeObjects(r._metadata,e),r.onMetadataInfoSet()))},this.setOrUpdateMetadataInfo=function(e){if(null!=e){if(null==r._contentMetadata)return void r.setMetadataInfo(e);var t=!1,n=null;for(var i in e)if(n=r._contentMetadata[i],n!=e[i]){t=!0;break}t&&(r.update(),r._metadata=F.mergeObjects(e),r.onMetadataInfoChanged())}},this.setCallback=function(e){null==e?(r._callback=null,r.cleanUpTimer()):r._callback!=e&&(r._callback=e,r.startTimer())},this.update=function(){r._updating||null!=r._callback&&(r._updating=!0,r._callback(),r._updating=!1)},this.getIsAffectingUser=function(){return r._affectingUser},this.setAffectingUser=function(e){r._affectingUser!=e&&(r.update(),r._affectingUser&&(r.endSession(),r.cleanUpTimer(),r.release()),r._affectingUser=e,r._affectingUser&&r.createSession())},this.getLastEventType=function(){return r._lastEventType},this.getLastEventDetail=function(){return null!=r._lastEventDetail?r._lastEventDetail:null},this.getLastError=function(){return r._lastError},this.setError=function(e){this.update(),r._lastError=e,r.onError()},this.setEvent=function(e,t){r.update(),r._lastEventType=e,r._lastEventDetail=t,r.onEvent()},this.pollStreamerTask=function(){r.update()},this.startTimer=function(){r.cleanUpTimer(),r._cancelTimer=r._timer.create(r.pollStreamerTask,1e3,"PlayerMonitor.update")},this.cleanUpTimer=function(){null!=r._cancelTimer&&(r._cancelTimer(),r._cancelTimer=null)},this.setAdBreakStartInfo=function(e,t,i){r._adBreakInfo=i,r.onAdBreakStartInfoSet(),r._adType=e,r._adPlayer=t,null!=r._adType&&void 0!=r._adType&&n.AdType.CLIENT_SIDE===r._adType&&(r._playerState=n.PlayerState.UNKNOWN,r.detach(r._adType,t,null==i||void 0==i?null:i[n.POD_POSITION]))},this.setAdBreakEndInfo=function(){null!=r._adType&&n.AdType.CLIENT_SIDE===r._adType&&(r.attach(),r._playerState=n.PlayerState.UNKNOWN),r.onAdBreakEndInfoSet(),r._adType=null,r._adPlayer=null},this.getAdBreakInfo=function(){return r._adBreakInfo},this.release=function(){this._affectingUser=null,this._metadata=null,this._contentMetadata=null,this._contentTags=null,this._playerState=e.PlayerStateManager.PlayerState.UNKNOWN,this._playHeadTime=-1,this._bufferHeadTime=-1,this._lastError=null,this._lastEventType=null,this._lastEventDetail=null,this._bitrate=-2,this._renderedFrameRate=-1,this._signalStrength=e.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH,this._cdnServerIP=null,this._linkEncryption=null,this._connectionType=null,this._timer=null,this._cancelTimer=null,this._playerTags=null,this._callback=null,this._adBreakInfo=null,this._adType=null,this._adPlayer=null,r._playerStateManager=null,r._contentSessionKey=e.Client.NO_SESSION_KEY}},A=t.PlayerMonitorImpl=function(){function t(e,t){y.call(this,t),i._convivaClient=e}var i=this;i._convivaClient=null,i._playerStateManager=null,i._contentSessionKey=e.Client.NO_SESSION_KEY,t.apply(this,arguments),this.getPHT=function(){return i.getPlayHeadTime()},this.getBufferLength=function(){return i.getBufferHeadTime()},this.getRenderedFrameRate=function(){return i.getVideoRenderedFrameRate()},this.getSignalStrength=function(){return i.getCurrentSignalStrength()},this.onSeekingChanged=function(){null!=i._playerStateManager&&i._ContentSessionKey!=r.NO_SESSION_KEY&&(i.isSeeking()?i._playerStateManager.setPlayerSeekStart(i.getSeekToPos()):i._playerStateManager.setPlayerSeekEnd());
},this.updatePlayerStateManagerState=function(){null!=i._playerStateManager&&(i._playerStateManager.setPlayerState(i.getConvivaPlayerState()),i.getBitrate()>0&&i._playerStateManager.setBitrateKbps(i.getBitrate()),i.getVideoWidth()>0&&i._playerStateManager.setVideoResolutionWidth(i.getVideoWidth()),i.getVideoHeight()>0&&i._playerStateManager.setVideoResolutionHeight(i.getVideoHeight()),null!=i.getCDNServerIp()&&i._playerStateManager.setCDNServerIP(i.getCDNServerIp()),null!=i.getLinkEncryption()&&i._playerStateManager.setLinkEncryption(i.getLinkEncryption()),null!=i.getConnectionType()&&i._playerStateManager.setConnectionType(i.getConnectionType()))},this.updateContentMetadata=function(){i._contentSessionKey!=r.NO_SESSION_KEY&&null!=i._convivaClient&&i._convivaClient.updateContentMetadata(i._contentSessionKey,i._contentMetadata)},this.onPlayerInfoChanged=function(){if(null!=i._playerStateManager&&null!=i._playerTags&&0!=F.dictCount(i._playerTags)){if(null!=i._playerTags[n.MODULE_NAME]&&null!=i._playerTags[n.MODULE_VERSION]){var e=i._playerTags[n.MODULE_NAME],t=i._playerTags[n.MODULE_VERSION];F.isValidString(e)&&F.isValidString(t)&&i._playerStateManager.setModuleNameAndVersion(e,t)}if(null!=i._playerTags[n.FRAMEWORK_NAME]){var r=i._playerTags[n.FRAMEWORK_NAME];F.isValidString(r)&&i._playerStateManager.setPlayerType(r)}if(null!=i._playerTags[n.FRAMEWORK_VERSION]){var a=i._playerTags[n.FRAMEWORK_VERSION];F.isValidString(a)&&i._playerStateManager.setPlayerVersion(a)}}},this.attach=function(){null!=i._playerStateManager&&i._contentSessionKey!=r.NO_SESSION_KEY&&(i.updatePlayerStateManagerState(),this.contentAdEnd())},this.attachPlayer=function(){null!=i._playerStateManager&&i._contentSessionKey!=r.NO_SESSION_KEY&&(i.updatePlayerStateManagerState(),i._convivaClient.onFocus(i._contentSessionKey))},this.contentAdEnd=function(){null!=i._convivaClient&&i._contentSessionKey!=n.NO_SESSION_KEY&&i._convivaClient.adEnd(i._contentSessionKey)},this.detach=function(e,t,a){if(null!=i._playerStateManager&&i._contentSessionKey!=n.NO_SESSION_KEY){var o=null;n.AdType.CLIENT_SIDE===e?o=r.AdStream.SEPARATE:n.AdType.SERVER_SIDE===e&&(o=r.AdStream.CONTENT),i.contentAdStart(o,t,a)}},this.detachPlayer=function(){null!=i._playerStateManager&&i._contentSessionKey!=n.NO_SESSION_KEY&&i._convivaClient.offFocus(i._contentSessionKey)},this.contentAdStart=function(e,t,r){null!=i._convivaClient&&i._contentSessionKey!=n.NO_SESSION_KEY&&i._convivaClient.adStart(i._contentSessionKey,e,t,r)},this.createSession=function(){null!=i._convivaClient&&(i._playerStateManager=i._convivaClient.getPlayerStateManager(),i.onPlayerInfoChanged(),i._playerStateManager.setClientMeasureInterface(this),i._contentSessionKey=i._convivaClient.createSession(i._contentMetadata,i._playerStateManager))},this.endSession=function(){null!=i._convivaClient&&(null!=i._playerStateManager&&(i._playerStateManager.setPlayerState(n.PlayerState.STOPPED),i._playerStateManager=null),i._contentSessionKey!=n.NO_SESSION_KEY&&(i._convivaClient.cleanupSession(i._contentSessionKey),i._contentSessionKey=n.NO_SESSION_KEY))},this.onError=function(){if(null!=i._convivaClient&&i._contentSessionKey!=r.NO_SESSION_KEY){var e=i.getLastError();i._convivaClient.reportError(i._contentSessionKey,e.getErrorCode(),e.getErrorSeverity())}},this.onEvent=function(){i._contentSessionKey!=r.NO_SESSION_KEY&&null!=i._convivaClient&&i._convivaClient.sendCustomEvent(i._contentSessionKey,i.getLastEventType(),i.getLastEventDetail())},this.onMetadataInfoChanged=function(){var e=i.getMetadataInfo(),t=!1,r=!1;for(var a in e){var o=e[a];if(F.isValidString(a)&&null!=o)switch(a){case n.STREAM_URL:r=!0,i._contentMetadata.streamUrl=o;break;case n.ASSET_NAME:r=!0,i._contentMetadata.assetName=o;break;case n.DEFAULT_RESOURCE:r=!0,i._contentMetadata.defaultResource=o;break;case n.VIEWER_ID:r=!0,i._contentMetadata.viewerId=o;break;case n.PLAYER_NAME:r=!0,i._contentMetadata.applicationName=o;break;case n.DURATION:r=!0,i._contentMetadata.duration=o;break;case n.IS_LIVE:r=!0,i._contentMetadata.streamType=o;break;case n.ENCODED_FRAMERATE:r=!0,i._contentMetadata.encodedFrameRate=o;break;case n.MODULE_NAME:case n.MODULE_VERSION:case n.FRAMEWORK_NAME:case n.FRAMEWORK_VERSION:t=!0,i._playerTags[a]=o;break;default:r=!0,i._contentMetadata.custom[a]=o}}t&&this.onPlayerInfoChanged(),r&&this.updateContentMetadata()},this.onAdBreakStartInfoSet=function(){this.contentAdBreak(n.Events.POD_START)},this.onAdBreakEndInfoSet=function(){this.contentAdBreak(n.Events.POD_END)},this.contentAdBreak=function(e){if(null!=i._convivaClient&&i._contentSessionKey!=n.NO_SESSION_KEY){var t=this.getAdBreakInfo(),r=null;if(null!=t){r={};var a=t[n.POD_POSITION];null!=a&&(r[n.POD_POSITION]=a);var o=t[n.POD_INDEX];if(null!=o&&(r[n.POD_INDEX]=o+""),e===n.Events.POD_START){var s=t[n.POD_DURATION];null!=s&&(r[n.POD_DURATION]=s+"")}}i._convivaClient.sendCustomEvent(i._contentSessionKey,e,r)}},this.setSessionKey=function(e){this._contentSessionKey==n.NO_SESSION_KEY&&e!=n.NO_SESSION_KEY&&(this._contentSessionKey=e)},this.getSessionKey=function(){return this._contentSessionKey},this.getSessionId=function(){return i._convivaClient.getSessionId(this._contentSessionKey)},this.getClientId=function(e){return i._convivaClient.getClientId(this._contentSessionKey)},this.updateCustomMetric=function(e,t){i._convivaClient.updateCustomMetric(this._contentSessionKey,e,t)},A.prototype=Object.create(y.prototype),A.prototype.constructor=A},I=t.VideoAnalytics=function(){function t(e,t){i._client=e,i._systemFactory=t,i._timer=t.buildTimer(),i._logger=t.buildLogger(),i._logger.setModuleName("VideoAnalytics"),i._playerMonitor=new A(i._client,i._timer),p.call(this)}var i=this;i._client=null,i._logger=null,i._systemFactory=null,i._timer=null,i._playerMonitor=null,i._dropInModule=null,i._adType=null,i._adPlayer=null,this.release=function(){null!=i._logger&&i._logger.debug("VideoAnalytics.release()"),null!=i._playerMonitor&&i._playerMonitor.getIsAffectingUser()&&(i._playerMonitor.setAffectingUser(!1),"undefined"!=typeof e.ProxyMonitor&&null!=i._dropInModule&&(e.ProxyMonitor.release(i._dropInModule),i._dropInModule=null)),null!=i._playerMonitor&&(i._playerMonitor.setCallback(null),i._playerMonitor.release(),i._playerMonitor=null),i._timer=null,i._adType=null,i._adPlayer=null},t.apply(this,arguments),this.reportPlaybackRequested=function(e){return null!=i._logger&&i._logger.debug("VideoAnalytics.reportPlaybackRequested()"),null==i._playerMonitor?void i._logger.error("VideoAnalytics.reportPlaybackRequested() : "+n.PLAYBACK_ANALYTICS_NOT_AVAILABLE):(F.dictCount(e)>0&&i.setContentInfo(e),void i._playerMonitor.setAffectingUser(!0))},this.reportPlaybackEnded=function(){return null!=i._logger&&i._logger.debug("VideoAnalytics.reportPlaybackEnded()"),null==i._playerMonitor?void i._logger.error("VideoAnalytics.reportPlaybackEnded() : "+n.PLAYBACK_ANALYTICS_NOT_AVAILABLE):void(i._playerMonitor.getIsAffectingUser()&&(i._playerMonitor.setAffectingUser(!1),"undefined"!=typeof e.ProxyMonitor&&null!=i._dropInModule&&(e.ProxyMonitor.release(i._dropInModule),i._dropInModule=null),i._playerMonitor.setCallback(null)))},this.reportPlaybackFailed=function(e,t){return null==i._playerMonitor?void i._logger.error("VideoAnalytics.reportPlaybackFailed() : "+n.INVALID_PLAYER_MONITOR):(F.dictCount(t)>0&&i.setContentInfo(t),i._playerMonitor.getIsAffectingUser()||i._playerMonitor.setAffectingUser(!0),null!=i._logger&&i._logger.debug("VideoAnalytics.reportPlaybackFailed()"),i.reportPlaybackError(e,r.ErrorSeverity.FATAL),void i.reportPlaybackEnded())},this.setContentInfo=function(e){return F.dictCount(e)<=0?void i._logger.error("VideoAnalytics.setContentInfo() : Content Info is not set"):null==i._playerMonitor?void i._logger.error("VideoAnalytics.setContentInfo() : "+n.INVALID_PLAYER_MONITOR):(null!=i._logger&&i._logger.debug("VideoAnalytics.setContentInfo()"),void i._playerMonitor.setOrUpdateMetadataInfo(e))},this.setPlayerInfo=function(e){return F.dictCount(e)<=0?void i._logger.error("VideoAnalytics.setPlayerInfo() : Player Info is not set"):null==i._playerMonitor?void i._logger.error("VideoAnalytics.setPlayerInfo() : "+n.INVALID_PLAYER_MONITOR):(null!=i._logger&&i._logger.debug("VideoAnalytics.setPlayerInfo()"),void i._playerMonitor.setOrUpdateMetadataInfo(e))},this.reportPlaybackMetric=function(){return 0==arguments.length?void i._logger.error("VideoAnalytics.reportPlaybackMetric() : Need to report metric mandatory"):void(1==arguments.length?i.reportMetric(arguments[0]):2==arguments.length?i.reportMetric(arguments[0],arguments[1]):3==arguments.length?i.reportMetric(arguments[0],arguments[1],arguments[2]):4==arguments.length&&i.reportMetric(arguments[0],arguments[1],arguments[2],arguments[3]))},this.reportPlaybackError=function(e,t){if(null==i._playerMonitor)return void i._logger.error("VideoAnalytics.reportPlaybackError() : "+n.INVALID_PLAYER_MONITOR);if(!F.isValidString(e))return void i._logger.error("VideoAnalytics.reportPlaybackError() : errorMessage need to be valid string");null!=i._logger&&i._logger.debug("VideoAnalytics.reportPlaybackError()");var r=new B(e,t);i._playerMonitor.setError(r)},this.reportPlaybackEvent=function(t,r){if(!F.isValidString(t))return void i._logger.error("VideoAnalytics.reportPlaybackEvent(): eventType parameter must be a valid string.");if(null==i._playerMonitor)return void i._logger.error("VideoAnalytics.reportPlaybackEvent() : "+n.INVALID_PLAYER_MONITOR);if(null!=i._logger&&i._logger.debug("VideoAnalytics.reportPlaybackEvent()"),null!=i._playerMonitor)switch(t){case e.Constants.Events.USER_WAIT_STARTED:case e.Constants.Events.BUMPER_VIDEO_STARTED:i._playerMonitor.detachPlayer();break;case e.Constants.Events.USER_WAIT_ENDED:case e.Constants.Events.BUMPER_VIDEO_ENDED:i._playerMonitor.attachPlayer();break;default:i._playerMonitor.setEvent(t,r)}},this.setCallback=function(e){null!=i._logger&&i._logger.debug("setCallback()"),null!=i._playerMonitor&&i._playerMonitor.setCallback(e)},this.reportAdBreakStarted=function(e,t,r){return null==i._playerMonitor?void i._logger.error("VideoAnalytics.reportAdBreakStarted() : "+n.INVALID_PLAYER_MONITOR):(null!=i._logger&&i._logger.debug("VideoAnalytics.reportAdBreakStarted()"),i._adType=e,i._adPlayer=t,void i._playerMonitor.setAdBreakStartInfo(e,t,r))},this.reportAdBreakEnded=function(){return null==i._playerMonitor?void i._logger.error("VideoAnalytics.reportAdBreakEnded() : "+n.INVALID_PLAYER_MONITOR):(i._adType=null,i._adPlayer=null,null!=i._logger&&i._logger.debug("VideoAnalytics.VideoAnalytics.reportAdBreakEnded()"),void i._playerMonitor.setAdBreakEndInfo())},this.setPlayer=function(t,n){return void 0==t?void i._logger.error("VideoAnalytics.setPlayer() : Need to configure the Player"):("undefined"!=typeof n?e.ProxyMonitor=n.ProxyMonitor:"undefined"!=typeof ConvivaModule&&(e.ProxyMonitor=ConvivaModule.ProxyMonitor),"undefined"==typeof e.ProxyMonitor?void i._logger.error("VideoAnalytics.setPlayer() : Include the missing Player Module"):(null!=i._logger&&i._logger.debug("VideoAnalytics.setPlayer()"),void(null==t&&null!=i._dropInModule?(e.ProxyMonitor.release(i._dropInModule),i._dropInModule=null):null!=t&&null!=i._dropInModule?(e.ProxyMonitor.release(i._dropInModule),null!=i._logger&&i._logger.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),i._dropInModule=e.ProxyMonitor.initConvivaDropIn(t,i._systemFactory,this,e)):null!=t&&null==i._dropInModule&&(null!=i._logger&&i._logger.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),i._dropInModule=e.ProxyMonitor.initConvivaDropIn(t,i._systemFactory,this,e)))))},this.configureExistingSession=function(e){return e==n.NO_SESSION_KEY?void i._logger.error("VideoAnalytics.configureExistingSession() : Invalid Session Key"):null==i._playerMonitor?void i._logger.error("VideoAnalytics.configureExistingSession() : "+n.INVALID_PLAYER_MONITOR):(null!=i._logger&&i._logger.debug("VideoAnalytics.configureExistingSession()"),void i._playerMonitor.setSessionKey(e))},this.getSessionId=function(){return null==i._playerMonitor?void i._logger.error("VideoAnalytics.getSessionId() : "+n.INVALID_PLAYER_MONITOR):(null!=i._logger&&i._logger.debug("VideoAnalytics.getSessionId()"),i._playerMonitor.getSessionId())},this.getClientId=function(){return null==i._playerMonitor?void i._logger.error("VideoAnalytics.getClientId() : "+n.INVALID_PLAYER_MONITOR):(null!=i._logger&&i._logger.debug("VideoAnalytics.getClientId()"),i._playerMonitor.getClientId())},this.getPlayerMonitor=function(){return null!=i._logger&&i._logger.debug("VideoAnalytics.getPlayerMonitor()"),this._playerMonitor},this.getAdType=function(){return null!=i._playerMonitor?i._playerMonitor._adType:null},this.getAdPlayer=function(){return null!=i._playerMonitor?i._playerMonitor._adPlayer:null},I.prototype=Object.create(p.prototype),I.prototype.constructor=I};e.Impl=e.Impl||{},e.Impl.Html5Http=function(){function e(){}e.apply(this,arguments),this.makeRequest=function(e,t,n,r,i,a){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(e,t,n,r,i,a){var o=new XMLHttpRequest;return o.open(e,t,!0),r&&o.overrideMimeType&&(o.overrideMimeType=r),r&&o.setRequestHeader&&o.setRequestHeader("Content-Type",r),i>0&&(o.timeout=i,o.ontimeout=function(){o.ontimeout=o.onreadystatechange=null,a&&a(!1,"timeout after "+i+" ms")}),o.onreadystatechange=function(){4===o.readyState&&(o.ontimeout=o.onreadystatechange=null,200==o.status?a&&a(!0,o.responseText):a&&a(!1,"http status "+o.status))},o.send(n),null},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Logging=function(){function t(){}t.apply(this,arguments),this.consoleLog=function(t,n){"undefined"!=typeof console&&(console.log&&n===e.SystemSettings.LogLevel.DEBUG||n===e.SystemSettings.LogLevel.INFO?console.log(t):console.warn&&n===e.SystemSettings.LogLevel.WARNING?console.warn(t):console.error&&n===e.SystemSettings.LogLevel.ERROR&&console.error(t))},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Metadata=function(){function e(){}e.apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Storage=function(){function e(){}e.apply(this,arguments),this.saveData=function(e,t,n,r){var i=e+"."+t;try{localStorage.setItem(i,n),r(!0,null)}catch(a){r(!1,a.toString())}},this.loadData=function(e,t,n){var r=e+"."+t;try{var i=localStorage.getItem(r);n(!0,i)}catch(a){n(!1,a.toString())}},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Time=function(){function e(){}e.apply(this,arguments),this.getEpochTimeMs=function(){var e=new Date;return e.getTime()},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Timer=function(){function e(){}e.apply(this,arguments),this.createTimer=function(e,t,n){var r=setInterval(e,t),i=function(){-1!==r&&(clearInterval(r),r=-1)};return i},this.release=function(){}};var v=t.JSON2={};!function(){function e(e){return 10>e?"0"+e:e}function t(e){return r.lastIndex=0,r.test(e)?'"'+e.replace(r,function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function n(e,r){var o,l,_,c,u,d=i,E=r[e];switch(E&&"object"==typeof E&&"function"==typeof E.toJSON&&(E=E.toJSON(e)),"function"==typeof s&&(E=s.call(r,e,E)),typeof E){case"string":return t(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":return String(E);case"object":if(!E)return"null";if(i+=a,u=[],Object.prototype.toString.apply(E)===Object.prototype.toString.apply([])){for(c=E.length,o=0;c>o;o+=1)u[o]=n(o,E)||"null";return _=0===u.length?"[]":i?"[\n"+i+u.join(",\n"+i)+"\n"+d+"]":"["+u.join(",")+"]",i=d,_}if(s&&"object"==typeof s)for(c=s.length,o=0;c>o;o+=1)"string"==typeof s[o]&&(l=s[o],_=n(l,E),_&&u.push(t(l)+(i?": ":":")+_));else for(l in E)Object.prototype.hasOwnProperty.call(E,l)&&(_=n(l,E),_&&u.push(t(l)+(i?": ":":")+_));return _=0===u.length?"{}":i?"{\n"+i+u.join(",\n"+i)+"\n"+d+"}":"{"+u.join(",")+"}",i=d,_}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var r,i,a,o,s;"function"!=typeof v.stringify&&(r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},v.stringify=function(e,t,r){var o;if(i="",a="","number"==typeof r)for(o=0;r>o;o+=1)a+=" ";else"string"==typeof r&&(a=r);if(s=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON2.stringify");return n("",{"":e})})}();var R=t.JsonParse=function(){var e,t,n,r,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(t){throw{name:"SyntaxError",message:t,at:e,text:n}},o=function(r){return r&&r!==t&&a("Expected '"+r+"' instead of '"+t+"'"),t=n.charAt(e),e+=1,t},s=function(){var e,n="";for("-"===t&&(n="-",o("-"));t>="0"&&"9">=t;)n+=t,o();if("."===t)for(n+=".";o()&&t>="0"&&"9">=t;)n+=t;if("e"===t||"E"===t)for(n+=t,o(),("-"===t||"+"===t)&&(n+=t,o());t>="0"&&"9">=t;)n+=t,o();return e=+n,isNaN(e)?void a("Bad number"):e},l=function(){var e,n,r,s="";if('"'===t)for(;o();){if('"'===t)return o(),s;if("\\"===t)if(o(),"u"===t){for(r=0,n=0;4>n&&(e=parseInt(o(),16),isFinite(e));n+=1)r=16*r+e;s+=String.fromCharCode(r)}else{if("string"!=typeof i[t])break;s+=i[t]}else s+=t}a("Bad string")},_=function(){for(;t&&" ">=t;)o()},c=function(){switch(t){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}a("Unexpected '"+t+"'")},u=function(){var e=[];if("["===t){if(o("["),_(),"]"===t)return o("]"),e;for(;t;){if(e.push(r()),_(),"]"===t)return o("]"),e;o(","),_()}}a("Bad array")},d=function(){var e,n={};if("{"===t){if(o("{"),_(),"}"===t)return o("}"),n;for(;t;){if(e=l(),_(),o(":"),Object.hasOwnProperty.call(n,e)&&a('Duplicate key "'+e+'"'),n[e]=r(),_(),"}"===t)return o("}"),n;o(","),_()}}a("Bad object")};return r=function(){switch(_(),t){case"{":return d();case"[":return u();case'"':return l();case"-":return s();default:return t>="0"&&"9">=t?s():c()}},function(i,o){var s;return n=i,e=0,t=" ",s=r(),_(),t&&a("Syntax error"),"function"==typeof o?function l(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.hasOwnProperty.call(i,n)&&(r=l(i,n),void 0!==r?i[n]=r:delete i[n]);return o.call(e,t,i)}({"":s},""):s}}(),N=t.CwsProtocol=function(){this.generateEvent=function(e,t,n,r){return r.seq=e,r.st=t,r.t=n,r},this.generateSessionEndEvent=function(e,t){var n=N.EVENT_TYPE_SESSION_END,r={};return this.generateEvent(e,t,n,r)}};N.version="2.6",N.gatewayPath="/0/wsg",N.DEFAULT_CLIENT_ID="0",N.DEFAULT_CDN_SERVER_IP_AUTODETECT_ENABLED=!1,N.DEFAULT_MAX_HEARTBEAT_INFOS=2,N.DEFAULT_PLAYHEAD_TIME=-1,N.DEFAULT_BUFFER_LENGTH=-1,N.DEFAULT_SIGNAL_STRENGTH=1e3,N.SDK_METADATA_SCHEMA="sdk.js.1",N.EVENT_TYPE_STATE_CHANGE="CwsStateChangeEvent",N.EVENT_TYPE_ERROR="CwsErrorEvent",N.EVENT_TYPE_SESSION_END="CwsSessionEndEvent",N.EVENT_TYPE_CUSTOM="CwsCustomEvent",N.EVENT_TYPE_SEEK="CwsSeekEvent",N.EVENT_TYPE_DATA_SAMPLE="CwsDataSamplesEvent",N.RESPONSE_STATUS_NO_ERRORS="ok",N.RESPONSE_KEY_STATUS="err",N.RESPONSE_KEY_CLIENT_ID="clid",N.RESPONSE_KEY_CONFIG="cfg",N.RESPONSE_KEY_EVENTS="evs",N.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxhbinfos",N.RESPONSE_CONFIG_KEY_SEND_LOGS="slg",N.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL="hbi",N.RESPONSE_CONFIG_KEY_GATEWAY_URL="gw",N.RESPONSE_CONFIG_KEY_CONVIVAID_FP="fp",N.RESPONSE_CONFIG_KEY_CDN_SERVER_IP_ENABLE="csi_en",N.MESSAGE_TYPE_SESSION_HEARTBEAT="CwsSessionHb",N.REQUEST_KEY_MESSAGE_TYPE="t",N.REQUEST_KEY_SESSION_TIME="st",N.REQUEST_KEY_SESSION_START_TIME="sst",N.REQUEST_KEY_IS_LIVE="lv",N.REQUEST_KEY_SEQUENCE_NUMBER="seq",N.REQUEST_KEY_CUSTOMER_KEY="cid",N.REQUEST_KEY_CLIENT_ID="clid",N.REQUEST_KEY_CLIENT_VERSION="clv",N.REQUEST_KEY_PROTOCOL_VERSION="pver",N.REQUEST_KEY_INSTANCE_ID="iid",N.REQUEST_KEY_SESSION_ID="sid",N.REQUEST_KEY_VIEWER_ID="vid",N.REQUEST_KEY_ASSET_NAME="an",N.REQUEST_KEY_PLAYER_NAME="pn",N.REQUEST_KEY_TAGS="tags",N.REQUEST_KEY_SESSION_FLAGS="sf",N.REQUEST_KEY_EVENTS="evs",N.REQUEST_KEY_LOGS="lg",N.REQUEST_KEY_HEARTBEAT_INFOS="hbinfos",N.REQUEST_KEY_IS_SDK_CLIENT="sdk",N.REQUEST_KEY_PAUSE_JOIN="pj",N.REQUEST_KEY_PLAYER_STATE="ps",N.REQUEST_KEY_BITRATE="br",N.REQUEST_KEY_CONTENT_LENGTH="cl",N.REQUEST_KEY_ENCODED_FRAME_RATE="efps",N.REQUEST_KEY_AVERAGE_FRAME_RATE="afps",N.REQUEST_KEY_RFPS_TOTAL="rfpstot",N.REQUEST_KEY_RFPS_COUNT="rfpscnt",N.REQUEST_KEY_RESOURCE="rs",N.REQUEST_KEY_PLAYHEAD_TIME="pht",N.REQUEST_KEY_BUFFER_LENGTH="bl",N.REQUEST_KEY_STREAM_URL="url",N.REQUEST_KEY_CAPABILITIES="caps",N.REQUEST_KEY_PLATFORM_METADATA="pm",N.REQUEST_KEY_VIDEO_WIDTH="w",N.REQUEST_KEY_VIDEO_HEIGHT="h",N.REQUEST_KEY_CONNECTION_TYPE="ct",N.REQUEST_KEY_LINK_ENCRYPTION="le",N.REQUEST_KEY_SIGNAL_STRENGTH="ss",N.REQUEST_KEY_CDN_NAME="csi_n",N.REQUEST_KEY_CDN_TYPE="csi_t",N.REQUEST_KEY_CDN_LABEL="csi_l",N.REQUEST_KEY_CDN_VALUE="csi_v",N.REQUEST_KEY_CDN_HTTP_RESPONSE_CODE="csi_c",N.REQUEST_PLATFORM_METADATA_KEY_SCHEMA="sch",N.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME="br",N.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION="brv",N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND="dvb",N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER="dvma",N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL="dvm",N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE="dvt",N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION="dvv",N.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME="fw",N.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION="fwv",N.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION="cc",N.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME="mn",N.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION="mv",N.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME="os",N.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION="osv",N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_CATEGORY="cat",N.REQUEST_KEY_PROTOCOL_CAPP="caps",N.REQUEST_EVENT_KEY_TYPE="t",N.REQUEST_EVENT_KEY_SEQUENCE_NUMBER="seq",N.REQUEST_EVENT_KEY_SESSION_TIME="st",N.REQUEST_EVENT_KEY_SEEK_ACT_TYPE="act",N.REQUEST_EVENT_KEY_SEEK_TO_POS="skto",N.REQUEST_ERROR_EVENT_KEY_MESSAGE="err",N.REQUEST_ERROR_EVENT_KEY_FATAL="ft",N.REQUEST_STATE_CHANGE_EVENT_KEY_NEW="new",N.REQUEST_STATE_CHANGE_EVENT_KEY_OLD="old",N.REQUEST_CUSTOM_EVENT_KEY_NAME="name",N.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES="attr",N.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER="seq",N.REQUEST_HEARTBEAT_INFO_KEY_STATUS="err",N.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME="rtt",N.REQUEST_KEY_IS_AD_SESSION="ad",N.REQUEST_CDN_SERVER_IP="csi",N.convertPlayerState=function(e){switch(e){case l.PlayerState.STOPPED:return N.eStopped;case l.PlayerState.PLAYING:return N.ePlaying;case l.PlayerState.BUFFERING:return N.eBuffering;case l.PlayerState.PAUSED:return N.ePaused;case l.PlayerState.NOT_MONITORED:return N.eNotMonitored;default:return N.eUnknown}},N.eStopped=1,N.ePlaying=3,N.eBuffering=6,N.ePaused=12,N.eNotMonitored=98,N.eUnknown=100,N.SessionFlags={GLOBAL:0,VIDEO:1,QUALITY_METRICS:2,BITRATE_METRICS:4},N.Capabilities={INSIGHTS:0};var C=(t.JSONInterface=function(){this.encode=function(e){},this.decode=function(e){}},t.LibJSONInterface=function(){this.encode=function(e){var t=null;try{t=v.stringify(e)}catch(n){}return t},this.decode=function(e){var t=null;try{t=R(e)}catch(n){}return F.isObject(t)||(t=null),t}}),m=t.CwsHeartbeat=function(){function e(){}this._data={},e.apply(this,arguments),this.get=function(){return this._data},this.setField=function(e,t){this._data[e]=t},this.setInnerField=function(e,t,n){this._data[e]||(this._data[e]={}),this._data[e][t]=n},this.setMessageType=function(e){this.setField(N.REQUEST_KEY_MESSAGE_TYPE,e)},this.setSessionTime=function(e){this.setField(N.REQUEST_KEY_SESSION_TIME,e)},this.setSessionStartTime=function(e){this.setField(N.REQUEST_KEY_SESSION_START_TIME,e)},this.setIsLive=function(e){this.setField(N.REQUEST_KEY_IS_LIVE,e)},this.setSequenceNumber=function(e){this.setField(N.REQUEST_KEY_SEQUENCE_NUMBER,e)},this.setCustomerKey=function(e){this.setField(N.REQUEST_KEY_CUSTOMER_KEY,e)},this.setClientId=function(e){this.setField(N.REQUEST_KEY_CLIENT_ID,e)},this.setClientVersion=function(e){this.setField(N.REQUEST_KEY_CLIENT_VERSION,e)},this.setProtocolVersion=function(e){this.setField(N.REQUEST_KEY_PROTOCOL_VERSION,e)},this.setCapfield=function(e){this.setField(N.REQUEST_KEY_PROTOCOL_CAPP,e)},this.setSessionId=function(e){this.setField(N.REQUEST_KEY_SESSION_ID,e)},this.setInstanceId=function(e){this.setField(N.REQUEST_KEY_INSTANCE_ID,e)},this.setViewerId=function(e){this.setField(N.REQUEST_KEY_VIEWER_ID,e)},this.setAssetName=function(e){this.setField(N.REQUEST_KEY_ASSET_NAME,e)},this.setPlayerName=function(e){this.setField(N.REQUEST_KEY_PLAYER_NAME,e)},this.setTags=function(e){this.setField(N.REQUEST_KEY_TAGS,e)},this.setSessionFlags=function(e){this.setField(N.REQUEST_KEY_SESSION_FLAGS,e)},this.setCapabilities=function(e){this.setField(N.REQUEST_KEY_CAPABILITIES,e)},this.setEvents=function(e){this.setField(N.REQUEST_KEY_EVENTS,e)},this.setIsSdkClient=function(e){this.setField(N.REQUEST_KEY_IS_SDK_CLIENT,e)},this.setLogs=function(e){this.setField(N.REQUEST_KEY_LOGS,e)},this.setHeartbeatInfos=function(e){this.setField(N.REQUEST_KEY_HEARTBEAT_INFOS,e)},this.setPlayerState=function(e){this.setField(N.REQUEST_KEY_PLAYER_STATE,e)},this.setPauseJoin=function(e){this.setField(N.REQUEST_KEY_PAUSE_JOIN,e)},this.setContentLength=function(e){this.setField(N.REQUEST_KEY_CONTENT_LENGTH,e)},this.setBitrate=function(e){this.setField(N.REQUEST_KEY_BITRATE,e)},this.setResource=function(e){this.setField(N.REQUEST_KEY_RESOURCE,e)},this.setEncodedFrameRate=function(e){this.setField(N.REQUEST_KEY_ENCODED_FRAME_RATE,e)},this.setAverageFrameRate=function(e){this.setField(N.REQUEST_KEY_AVERAGE_FRAME_RATE,e)},this.setRfpsObservationCount=function(e){this.setField(N.REQUEST_KEY_RFPS_COUNT,e)},this.setRfpsTotal=function(e){this.setField(N.REQUEST_KEY_RFPS_TOTAL,e)},this.setPlatformMetadataSchema=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_SCHEMA,e)},this.setBrowserName=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME,e)},this.setBrowserVersion=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION,e)},this.setDeviceBrand=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND,e)},this.setDeviceManufacturer=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER,e)},this.setDeviceModel=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL,e)},this.setDeviceType=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE,e)},this.setDeviceVersion=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION,e)},this.setFrameworkName=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,e),this.setField(N.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,e)},this.setFrameworkVersion=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,e),this.setField(N.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,e)},this.setOperatingSystemName=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,e.toUpperCase())},this.setOperatingSystemVersion=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,e)},this.setDeviceCategory=function(e){this.setInnerField(N.REQUEST_KEY_PLATFORM_METADATA,N.REQUEST_PLATFORM_METADATA_KEY_DEVICE_CATEGORY,e)},this.setPlayheadTime=function(e){this.setField(N.REQUEST_KEY_PLAYHEAD_TIME,e)},this.setBufferLength=function(e){this.setField(N.REQUEST_KEY_BUFFER_LENGTH,e)},this.setStreamUrl=function(e){this.setField(N.REQUEST_KEY_STREAM_URL,e)},this.setStreamWidth=function(e){this.setField(N.REQUEST_KEY_VIDEO_WIDTH,e)},this.setStreamHeight=function(e){this.setField(N.REQUEST_KEY_VIDEO_HEIGHT,e)},this.setConnectionType=function(e){this.setField(N.REQUEST_KEY_CONNECTION_TYPE,e)},this.setLinkEncryption=function(e){this.setField(N.REQUEST_KEY_LINK_ENCRYPTION,e)},this.setIsAdSession=function(){this.setField(N.REQUEST_KEY_IS_AD_SESSION,!0)},this.setSignalStrength=function(e){this.setField(N.REQUEST_KEY_SIGNAL_STRENGTH,e)},this.setModuleName=function(e){this.setInnerField(N.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,N.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME,e)},this.setModuleVersion=function(e){this.setInnerField(N.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,N.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION,e)},this.setCDNServerIP=function(e){this.setField(N.REQUEST_CDN_SERVER_IP,e)},this.setCdnName=function(e){null!=e&&this.setField(N.REQUEST_KEY_CDN_NAME,e)},this.setCdnType=function(e){null!=e&&this.setField(N.REQUEST_KEY_CDN_TYPE,e)},this.setCdnLabel=function(e){null!=e&&this.setField(N.REQUEST_KEY_CDN_LABEL,e)},this.setCdnValue=function(e){null!=e&&this.setField(N.REQUEST_KEY_CDN_VALUE,e)},this.setCdnHttpRespCode=function(e){null!=e&&this.setField(N.REQUEST_KEY_CDN_HTTP_RESPONSE_CODE,e)}},M=t.CwsSession=function(t,n,r,i,o,s,_,c,u,d,E,g){function S(e,t,n,r,i,a,o,s,l,_,c,u){this._eventQueue=e,this._client=t,this._clientSettings=n,this._logger=r,this._logger.setModuleName("CwsSession"),this._exceptionCatcher=i,this._timer=a,this._gatewayControl=o,this._cwsProtocol=s,this._time=l,this._logBuffer=_,this._clientConfig=c,this._contentMetadata=u,null!=this._contentMetadata&&(h._encodedFrameRate=this._contentMetadata.encodedFrameRate,h._streamUrl=this._contentMetadata.streamUrl,h._contentLengthSec=this._contentMetadata.duration)}var h=this;h._heartbeatTimerCancel=null,h._contentMetadata=null,h._startTimeMs=0,h._heartbeatSequenceNumber=0,h._sessionFlags=N.SessionFlags.GLOBAL,h._capabilities=N.Capabilities.INSIGHTS,h._heartbeatInfos=[],h._lastRequestSentMs=-1,h._bitrateKbps=-2,h._resource=null,h._playerState=l.PlayerState.UNKNOWN,h._encodedFrameRate=-1,h._contentLengthSec=-1,h._streamUrl=null,h._width=-1,h._height=-1,h._playerStateManager=null,h._assetName=null,h._viewerId=null,h._playerName=null,h._isLive=null,h._tags={},h._browserName=null,h._browserVersion=null,h._deviceBrand=null,h._deviceManufacturer=null,h._deviceModel=null,h._deviceType=null,h._deviceVersion=null,h._frameworkName=null,h._frameworkVersion=null,h._operatingSystemName=null,h._operatingSystemVersion=null,h._deviceCategory=null,h._moduleName=null,h._moduleVersion=null,h._connectionType=null,h._linkEncryption=null,h._cdnServerIP=null,h._customMetric=null,h._pauseJoin=!1,h._hasJoined=!1,h._cleanedUp=!1,h._willEndSoon=!1,h._rfpsTimerCancel=null,h._rfpsTimerInterval=1e3,h._playingFpsObservationCount=0,h._playingFpsTotal=0,h.whitelistedIdentifiers={},h._uniqueIdentifiers={},h._startConvivaIdCollection=!1,h._cdnName=null,h._cdnType=null,h._cdnLabel=null,h._cdnValue=null,h._cdnHttpRespCode=null,
h._cdnTimerCancel=null,h._cdnTimerInterval=12e4,h._cdnIpAutoDetectionEnabled=N.DEFAULT_CDN_SERVER_IP_AUTODETECT_ENABLED,h._customerSetCdnIp=!1,S.apply(this,arguments),this.cleanup=function(){this._clientConfig=null,this._logBuffer=null,this._systemSettings=null,this._time=null,this._cwsProtocol=null,this._gatewayControl=null,this._timer=null,this._exceptionCatcher=null,this._logger=null,this._clientSettings=null,this._client=null,this._eventQueue.flush(),this._eventQueue=null,this._customMetric=null,this._cleanedUp=!0},this.start=function(e){this._session=e,this._global=this._session._global,this._logger.setSessionId(this._session._id),this._startTimeMs=this._time.current(),this.isVideoSession()||this.isAdSession()?(this._sessionFlags+=M.DEFAULT_VIDEO_SESSION_FLAGS,h._logger.info("start(): assetName="+h._contentMetadata.assetName)):h._logger.info("start()"+h.sessionTypeTag())},this.willEndSoon=function(){this._willEndSoon=!0},this.initialize=function(){this._logger.debug("initialize()"),(this.isVideoSession()||this.isAdSession())&&(h.setStatesFromContentMetadata(),h.enqueueEventForContentMetadata(),h.validateContentMetadata())},this.end=function(){(this.isVideoSession()||this.isAdSession())&&(this._logger.debug("end(): schedule the last hb before session cleanup"+h.sessionTypeTag()),this.enqueueSessionEndEvent()),this.cancelCdnTimer(),this.cancelHeartbeatTimer(),this.sendHeartbeat()},this.startSendingHeartbeats=function(){this._willEndSoon||(this.sendHeartbeat(),this.resetHeartbeatTimer())},this.setBrowserName=function(e){var t=h._browserName;t!==e&&null!=e&&(h._logger.debug("Change browserName from "+t+" to "+e),h._browserName=e)},this.setBrowserVersion=function(e){var t=h._browserVersion;t!==e&&null!=e&&(h._logger.debug("Change browserVersion from "+t+" to "+e),h._browserVersion=e)},this.setDeviceBrand=function(e){var t=h._deviceBrand;t!==e&&null!=e&&(h._logger.debug("Change deviceBrand from "+t+" to "+e),h._deviceBrand=e)},this.setDeviceManufacturer=function(e){var t=h._deviceManufacturer;t!==e&&null!=e&&(h._logger.debug("Change deviceManufacturer from "+t+" to "+e),h._deviceManufacturer=e)},this.setDeviceModel=function(e){var t=h._deviceModel;t!==e&&null!=e&&(h._logger.debug("Change deviceModel from "+t+" to "+e),h._deviceModel=e)},this.setDeviceType=function(e){var t=h._deviceType;t!==e&&null!=e&&(h._logger.debug("Change deviceType from "+t+" to "+e),h._deviceType=e)},this.setDeviceVersion=function(e){var t=h._deviceVersion;t!==e&&null!=e&&(h._logger.debug("Change deviceVersion from "+t+" to "+e),h._deviceVersion=e)},this.setOperatingSystemName=function(e){var t=h._operatingSystemName;t!==e&&null!=e&&(h._logger.debug("Change operatingSystemName from "+t+" to "+e),h._operatingSystemName=e)},this.setOperatingSystemVersion=function(e){var t=h._operatingSystemVersion;t!==e&&null!=e&&(h._logger.debug("Change operatingSystemVersion from "+t+" to "+e),h._operatingSystemVersion=e)},this.setDeviceCategory=function(e){var t=h._deviceCategory;t!==e&&null!=e&&(h._logger.debug("Change operatingSystemVersion from "+t+" to "+e),h._deviceCategory=e)},this.getFrameworkName=function(){return h._frameworkName},this.setFrameworkName=function(e){var t=h._frameworkName;t!==e&&null!=e&&(h._logger.debug("Change frameworkName from "+t+" to "+e),h._frameworkName=e)},this.getFrameworkVersion=function(){return h._frameworkVersion},this.setFrameworkVersion=function(e){var t=h._frameworkVersion;t!==e&&null!=e&&(h._logger.debug("Change frameworkVersion from "+t+" to "+e),h._frameworkVersion=e)},this.setStreamUrl=function(e){if(null==h._contentMetadata.streamUrl){var t=h._streamUrl;t!==e&&null!=e&&(h._logger.debug("Change stream url from "+t+" to "+e),h._streamUrl=e)}},this.startCdnTimer=function(){h.cancelCdnTimer(),h._customerSetCdnIp||(h.detectCDNServerIp(),h._cdnTimerCancel=h._timer.create(h.detectCDNServerIp,h._cdnTimerInterval,"CwsSession.startCdnTimer"),h._logger.debug("fetching cdn ip timer started"))},this.cancelCdnTimer=function(){null!=h._cdnTimerCancel&&(h._cdnTimerCancel(),h.enqueueAutoCdnChangeEvent(null,null,null,null,null),h._cdnTimerCancel=null)},this.detectCDNServerIp=function(){h._logger.debug("detectCDNServerIp(): For "+h._streamUrl),h._cdnIpAutoDetectionEnabled?h.makeAkamaiHeadRequest():h.cancelCdnTimer()},this.makeAkamaiHeadRequest=function(){try{if("function"==typeof XMLHttpRequest){var e=new XMLHttpRequest;e.open("HEAD",h._streamUrl,!0),e.setRequestHeader("Pragma","akamai-x-cache-on"),e.onreadystatechange=function(){4===e.readyState&&(200===e.status&&null!=e.getResponseHeader("X-Cache")?h.enqueueAutoCdnChangeEvent("Akamai","header","X-Cache",""+e.getResponseHeader("X-Cache"),""+e.status):h.enqueueAutoCdnChangeEvent("null","header","null","null",""+e.status))},e.send()}else h._logger.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){h._logger.info("Exception caught in makeAkamaiHeadRequest")}},this.enqueueAutoCdnChangeEvent=function(e,t,n,r,i){var a={},o={};h._cdnName!=e&&(null!==h._cdnName&&(o[N.REQUEST_KEY_CDN_NAME]=h._cdnName),h._cdnName=e,null===h._cdnName?a[N.REQUEST_KEY_CDN_NAME]="null":a[N.REQUEST_KEY_CDN_NAME]=h._cdnName),h._cdnType!=t&&(null!==h._cdnType&&(o[N.REQUEST_KEY_CDN_TYPE]=h._cdnType),h._cdnType=t,null===h._cdnType?a[N.REQUEST_KEY_CDN_TYPE]="null":a[N.REQUEST_KEY_CDN_TYPE]=h._cdnType),h._cdnLabel!=n&&(null!==h._cdnLabel&&(o[N.REQUEST_KEY_CDN_LABEL]=h._cdnLabel),h._cdnLabel=n,null===h._cdnLabel?a[N.REQUEST_KEY_CDN_LABEL]="null":a[N.REQUEST_KEY_CDN_LABEL]=h._cdnLabel),h._cdnValue!=r&&(null!==h._cdnValue&&(o[N.REQUEST_KEY_CDN_VALUE]=h._cdnValue),h._cdnValue=r,null===h._cdnValue?a[N.REQUEST_KEY_CDN_VALUE]="null":a[N.REQUEST_KEY_CDN_VALUE]=h._cdnValue),h._cdnHttpRespCode!=i&&(null!==h._cdnHttpRespCode&&(o[N.REQUEST_KEY_CDN_HTTP_RESPONSE_CODE]=h._cdnHttpRespCode),h._cdnHttpRespCode=i,null===h._cdnHttpRespCode?a[N.REQUEST_KEY_CDN_HTTP_RESPONSE_CODE]="null":a[N.REQUEST_KEY_CDN_HTTP_RESPONSE_CODE]=h._cdnHttpRespCode),"{}"!=F.ObjectToString(a)&&h.declareStateChange(a,o)},this.setBitrateKbps=function(e){var t=h._bitrateKbps;t!==e&&e>0&&(h._logger.info("Change bitrate from "+t+" to "+e),h.enqueueBitrateChangeEvent(t,e),h._bitrateKbps=e)},this.setResource=function(e){var t=h._resource;t!==e&&null!=e&&(h._logger.info("Change resource from "+t+" to "+e),h._resource=e)},this.setAssetName=function(e){h._assetName!==e&&null!=e&&(h._logger.info("Change assetName from "+h._assetName+" to "+e),h._assetName=e)},this.setIsLive=function(e){var t=h._isLive;t!==e&&null!=e&&(h._logger.info("Change isLive from "+t+" to "+e),h._isLive=e)},this.setViewerId=function(e){var t=h._viewerId;t!==e&&null!=e&&(h._logger.info("Change viewerId from "+t+" to "+e),h._viewerId=e)},this.setPlayerName=function(e){var t=h._playerName;t!==e&&null!=e&&(h._logger.info("Change playerName from "+t+" to "+e),h._playerName=e)},this.setTags=function(e){var t=h._tags;F.ObjectShallowEquals(t,e)||null==e||(h._logger.info("Change tags from "+F.ObjectToString(t)+" to "+F.ObjectToString(e)),h._tags=e)},this.setEncodedFrameRate=function(e){h._contentMetadata.encodedFrameRate>0||(h._logger.debug("setEncodedFrameRate(): "+e),h._encodedFrameRate=e)},this.setContentLength=function(e){h._contentMetadata.duration>0||(h._logger.debug("setContentLength(): "+e),h._contentLengthSec=e)},this.setPlayerState=function(e){if(h._hasJoined||e!=l.PlayerState.PLAYING||(h.togglePauseJoin(!1),h._hasJoined=!0,F.isValidString(h._contentMetadata.viewerId)||h._logger.error("Missing viewerId. viewerId should be updated before first frame is rendered."),F.isValidString(h._contentMetadata.streamType)&&a.StreamType.UNKNOWN!==h._contentMetadata.streamType||h._logger.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),F.isValidString(h._contentMetadata.applicationName)||h._logger.error("Missing applicationName. applicationName should be updated before first frame is rendered.")),h._playerState!==e){var t=h._playerState;h._logger.info("setPlayerState(): changing player state from "+t+" to "+e),h.enqueuePlayerStateChangeEvent(t,e),h._playerState=e}},this.setStreamResolutionWidth=function(e){var t=h._width;t!==e&&e>0&&(h._logger.debug("Change stream resolution width from "+t+" to "+e),h.enqueueResolutionWidthChangeEvent(t,e),h._width=e)},this.setStreamResolutionHeight=function(e){var t=h._height;t!==e&&e>0&&(h._logger.debug("Change stream resolution height from "+t+" to "+e),h.enqueueResolutionHeightChangeEvent(t,e),h._height=e)},this.setConnectionType=function(e){var t=h._connectionType;t!==e&&null!=e&&(h._logger.debug("Change network connection type from "+t+" to "+e),h.enqueueConnectionTypeChangeEvent(t,e),h._connectionType=e)},this.setLinkEncryption=function(e){var t=h._linkEncryption;t!==e&&null!=e&&(h._logger.debug("Change network link encryption from "+t+" to "+e),h.enqueueLinkEncryptionChangeEvent(t,e),h._linkEncryption=e)},this.setCDNServerIP=function(e){h._customerSetCdnIp=!0,h.cancelCdnTimer();var t=h._cdnServerIP;t!==e&&F.isValidString(e)&&(h._logger.debug("Change CDN Server IP from "+t+" to "+e),h.enqueueCDNServerIPChangeEvent(t,e),h._cdnServerIP=e)},this.togglePauseJoin=function(e){if(h._logger.debug("togglePauseJoin()"),h._pauseJoin===e)return void h._logger.debug("togglePauseJoin(): same value, ignoring");var t=h._pauseJoin,n=!h._pauseJoin;h.enqueuePauseJoinChangeEvent(t,n),h._pauseJoin=!h._pauseJoin},this.sendError=function(e,t){h.enqueueErrorEvent(e,t)},this.enqueueEvent=function(e,t){if(t[N.REQUEST_EVENT_KEY_TYPE]=e,t[N.REQUEST_EVENT_KEY_SESSION_TIME]=this.getSessionTime(),t[N.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=this._eventQueue.getNumber(),this._playerStateManager){var n=k.Integer(this._playerStateManager.getPHT(),0,null,-1),r=k.Integer(this._playerStateManager.getBufferLength(),0,null,-1);n>=0&&(t[N.REQUEST_KEY_PLAYHEAD_TIME]=n),r>0&&(t[N.REQUEST_KEY_BUFFER_LENGTH]=r)}this._eventQueue.enqueue(t)},this.setPlayerStateManager=function(e){h._playerStateManager=e,null!=h._playerStateManager?h.startRfpsTimer():h.cancelRfpsTimer()},this.enqueueSessionEndEvent=function(){var e=this.getSessionTime(),t=this.getNextEventNumber(),n=this._cwsProtocol.generateSessionEndEvent(t,e);this._eventQueue.enqueue(n)},this.enqueueErrorEvent=function(e,t){var n={};n[N.REQUEST_ERROR_EVENT_KEY_MESSAGE]=e,n[N.REQUEST_ERROR_EVENT_KEY_FATAL]=t,this.enqueueEvent(N.EVENT_TYPE_ERROR,n)},this.enqueueBitrateChangeEvent=function(e,t){var n={},r={};e>0&&(r[N.REQUEST_KEY_BITRATE]=e),n[N.REQUEST_KEY_BITRATE]=t,this.declareStateChange(n,r)},this.enqueueSeekEvent=function(e,t){var n={};n[N.REQUEST_EVENT_KEY_SEEK_ACT_TYPE]=e,t>=0&&(n[N.REQUEST_EVENT_KEY_SEEK_TO_POS]=t),this.enqueueEvent(N.EVENT_TYPE_SEEK,n)},this.enqueueResolutionWidthChangeEvent=function(e,t){var n={},r={};-1!==e&&(r[N.REQUEST_KEY_VIDEO_WIDTH]=e),n[N.REQUEST_KEY_VIDEO_WIDTH]=t,this.declareStateChange(n,r)},this.enqueueResolutionHeightChangeEvent=function(e,t){var n={},r={};-1!==e&&(r[N.REQUEST_KEY_VIDEO_HEIGHT]=e),n[N.REQUEST_KEY_VIDEO_HEIGHT]=t,this.declareStateChange(n,r)},this.enqueueConnectionTypeChangeEvent=function(e,t){var n={},r={};null!==e&&(r[N.REQUEST_KEY_CONNECTION_TYPE]=e),n[N.REQUEST_KEY_CONNECTION_TYPE]=t,this.declareStateChange(n,r)},this.enqueueLinkEncryptionChangeEvent=function(e,t){var n={},r={};null!==e&&(r[N.REQUEST_KEY_LINK_ENCRYPTION]=e),n[N.REQUEST_KEY_LINK_ENCRYPTION]=t,this.declareStateChange(n,r)},this.enqueueCDNServerIPChangeEvent=function(e,t){var n={},r={};F.isValidString(e)&&(r[N.REQUEST_CDN_SERVER_IP]=e),n[N.REQUEST_CDN_SERVER_IP]=t,this.declareStateChange(n,r)},this.enqueuePauseJoinChangeEvent=function(e,t){var n={},r={};r[N.REQUEST_KEY_PAUSE_JOIN]=e,n[N.REQUEST_KEY_PAUSE_JOIN]=t,this.declareStateChange(n,r)},this.enqueuePlayerStateChangeEvent=function(e,t){var n={},r={};n[N.REQUEST_KEY_PLAYER_STATE]=N.convertPlayerState(t),r[N.REQUEST_KEY_PLAYER_STATE]=N.convertPlayerState(e),this.declareStateChange(n,r)},this.declareStateChange=function(e,t){var n={};n[N.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=e,null!=t&&F.dictCount(t)>0&&(n[N.REQUEST_STATE_CHANGE_EVENT_KEY_OLD]=t),this.enqueueEvent(N.EVENT_TYPE_STATE_CHANGE,n)},this.enqueueCustomEvent=function(e,t){var n={};n[N.REQUEST_CUSTOM_EVENT_KEY_NAME]=e,F.dictCount(t)>0&&(n[N.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES]=t),this.enqueueEvent(N.EVENT_TYPE_CUSTOM,n)},this.cancelHeartbeatTimer=function(){null!=h._heartbeatTimerCancel&&(h._heartbeatTimerCancel(),h._heartbeatTimerCancel=null)},this.resetHeartbeatTimer=function(){h.cancelHeartbeatTimer();var e=1e3*h._clientSettings.heartbeatInterval;h._heartbeatTimerCancel=h._timer.create(h.sendHeartbeat,e,"Session.sendHeartbeat")},this.cancelRfpsTimer=function(){null!=h._rfpsTimerCancel&&(h._rfpsTimerCancel(),h._rfpsTimerCancel=null)},this.startRfpsTimer=function(){h.cancelRfpsTimer(),h._rfpsTimerCancel=h._timer.create(h.countRfps,h._rfpsTimerInterval,"Session.startRfpsTimer")},this.createHeartbeatInfo=function(){var e={};e.err="pending",e.seq=h._heartbeatSequenceNumber-1,e.sentAt=h.getSessionTime(),e.rtt=-1,h._heartbeatInfos.push(e);for(var t=0;t<h._heartbeatInfos.length;t++)e=h._heartbeatInfos[t],"ok"===e.err&&(h._heartbeatInfos.splice(t,1),t--)},this.updateHeartbeatInfoOnFailure=function(e,t){for(var n=0;n<h._heartbeatInfos.length;n++){var r=h._heartbeatInfos[n],i=r.seq;i===e&&(r.rtt=h.getSessionTime()-r.sentAt,r.err=t)}},this.updateHeartbeatInfoOnSuccess=function(e){for(var t=0;t<h._heartbeatInfos.length;t++){var n=h._heartbeatInfos[t],r=n.seq;r===e&&(n.rtt=h.getSessionTime()-n.sentAt,n.err="ok")}},this.removeOutdatedHeartbeatInfos=function(){for(var e,t,n=h._clientConfig.get(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS),r=[],i=-1,a=0;a<h._heartbeatInfos.length;a++)if(t=h._heartbeatInfos[a],"ok"==t.err){i=t.seq;break}for(var o=0;o<h._heartbeatInfos.length;o++)t=h._heartbeatInfos[o],e=t.seq,(e<h._heartbeatSequenceNumber-n||i>e)&&r.push(o);for(var s=[],l=0;l<h._heartbeatInfos.length;l++)t=h._heartbeatInfos[l],e=t.seq,r.indexOf(l)<0&&s.push(h._heartbeatInfos[l]);h._heartbeatInfos=s},this.compileHeartbeatInfos=function(){h.removeOutdatedHeartbeatInfos();for(var e=[],t=0;t<h._heartbeatInfos.length;t++){var n=h._heartbeatInfos[t],r={};r[N.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER]=n.seq,r[N.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME]=n.rtt,r[N.REQUEST_HEARTBEAT_INFO_KEY_STATUS]=n.err,e.push(r)}return e},this.makeHeartbeat=function(){var e=h._eventQueue.flush();if(h.isGlobalSession()&&0===e.length)return null;var t=new m;if(t.setMessageType(N.MESSAGE_TYPE_SESSION_HEARTBEAT),t.setCustomerKey(h._clientSettings.customerKey),t.setClientId(h._clientConfig.get(L.CONFIG_KEY_CLIENT_ID)),t.setSessionId(h._session._id),t.setSequenceNumber(h._heartbeatSequenceNumber),t.setProtocolVersion(N.version),t.setClientVersion(h._client.version),t.setInstanceId(h._client.getId()),t.setCapfield(0),null!=h._connectionType&&t.setConnectionType(h._connectionType),null!=h._linkEncryption&&t.setLinkEncryption(h._linkEncryption),F.isValidString(h._cdnServerIP)&&t.setCDNServerIP(h._cdnServerIP),t.setPlatformMetadataSchema(N.SDK_METADATA_SCHEMA),null!=h._browserName&&t.setBrowserName(h._browserName),null!=h._browserVersion&&t.setBrowserVersion(h._browserVersion),null!=h._deviceBrand&&t.setDeviceBrand(h._deviceBrand),null!=h._deviceManufacturer&&t.setDeviceManufacturer(h._deviceManufacturer),null!=h._deviceModel&&t.setDeviceModel(h._deviceModel),null!=h._deviceType&&t.setDeviceType(h._deviceType),null!=h._deviceVersion&&t.setDeviceVersion(h._deviceVersion),null!=h._operatingSystemName&&t.setOperatingSystemName(h._operatingSystemName),null!=h._operatingSystemVersion&&t.setOperatingSystemVersion(h._operatingSystemVersion),null!=h._deviceCategory&&t.setDeviceCategory(h._deviceCategory),null!=h._frameworkName&&t.setFrameworkName(h._frameworkName),null!=h._frameworkVersion&&t.setFrameworkVersion(h._frameworkVersion),null!=h._playerStateManager&&(h._moduleName=h._playerStateManager.getModuleName(),null!=h._moduleName&&t.setModuleName(h._moduleName),h._moduleVersion=h._playerStateManager.getModuleVersion(),null!=h._moduleVersion&&t.setModuleVersion(h._moduleVersion),null!=h._playerStateManager.getPlayerType()&&(h._frameworkName=h._playerStateManager.getPlayerType(),t.setFrameworkName(h._frameworkName)),null!=h._playerStateManager.getPlayerVersion()&&(h._frameworkVersion=h._playerStateManager.getPlayerVersion(),t.setFrameworkVersion(h._frameworkVersion))),null!=h._viewerId&&t.setViewerId(h._viewerId),F.dictCount(h._tags)>0&&t.setTags(h._tags),h.isVideoSession()||h.isAdSession()){h.isAdSession()&&t.setIsAdSession(),null!=h._assetName&&t.setAssetName(h._assetName),t.setSessionFlags(h._sessionFlags);var n=N.convertPlayerState(h._playerState);t.setPlayerState(n),t.setPauseJoin(h._pauseJoin),null!=h._playerName&&t.setPlayerName(h._playerName),null!=h._isLive&&t.setIsLive(h._isLive),h._contentLengthSec>0&&t.setContentLength(h._contentLengthSec),h._bitrateKbps>0&&t.setBitrate(h._bitrateKbps),null!==h._resource&&t.setResource(h._resource),h._encodedFrameRate>0&&t.setEncodedFrameRate(h._encodedFrameRate);var r,i=-1,a=-1;null!=h._playerStateManager&&(i=k.Integer(h._playerStateManager.getPHT(),0,null,-1),a=k.Integer(h._playerStateManager.getBufferLength(),0,null,-1),r=h._playerStateManager.getSignalStrength()),i>=0&&t.setPlayheadTime(i),a>0&&t.setBufferLength(a);var o=h.updateAverageFrameRate();if(o>0&&t.setAverageFrameRate(o),h._playingFpsTotal>0&&t.setRfpsTotal(k.Integer(h._playingFpsTotal,0,null,-1)),h._playingFpsObservationCount>0&&t.setRfpsObservationCount(k.Integer(h._playingFpsObservationCount,0,null,-1)),0>=r&&t.setSignalStrength(r),null!=h._streamUrl&&t.setStreamUrl(h._streamUrl),h._width>0&&t.setStreamWidth(h._width),h._height>0&&t.setStreamHeight(h._height),null!=h._customMetric)for(var s in h._customMetric)t.setField(s,h._customMetric[s])}else t.setSessionFlags(N.SessionFlags.GLOBAL);if(e.length>0&&t.setEvents(e),t.setCapabilities(h._capabilities),t.setIsSdkClient(!0),h._clientConfig.get(L.CONFIG_KEY_SEND_LOGS)&&t.setLogs(h._logBuffer.flush()),h._clientConfig.get(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS)>0){var l=h.compileHeartbeatInfos();l.length>0&&t.setHeartbeatInfos(l)}return 0==h._heartbeatSequenceNumber&&(t=h.cloneHearbeatWithBrowserTags(t)),0!=h._heartbeatSequenceNumber&&(t=h.cloneHeartbeatWithConvivaIdTags(t)),t.setSessionStartTime(h._startTimeMs),t.setSessionTime(h.getSessionTime()),h._cdnIpAutoDetectionEnabled&&(t.setCdnName(h._cdnName),t.setCdnType(h._cdnType),t.setCdnLabel(h._cdnLabel),t.setCdnValue(h._cdnValue),t.setCdnHttpRespCode(h._cdnHttpRespCode)),h._heartbeatSequenceNumber++,t.get()},this.cloneHeartbeatWithConvivaIdTags=function(e){var t=h._uniqueIdentifiers,n={};for(var r in e._data.tags)t.hasOwnProperty(r)||(n[r]=e._data.tags[r]);e._data.tags=n,h._uniqueIdentifiers={};for(var i=0;i<h.whitelistedIdentifiers.length;i++)h._client._uniqueIdentifiers.hasOwnProperty(h.whitelistedIdentifiers[i])?h._client._userPrefForData.hasOwnProperty(h.whitelistedIdentifiers[i])?h._client._userPrefForData[h.whitelistedIdentifiers[i]]==L.ConvivaIdErrorCodes.CONVIVAID_USER_OPTOUT?(h._uniqueIdentifiers[L.CONVIVAID_FP_PREFIX+""+h.whitelistedIdentifiers[i]]=L.ConvivaIdErrorCodes.CONVIVAID_USER_OPTOUT,h._client._uniqueIdentifierCallback("End-user chose to opt-out of personal data collection")):h._client._userPrefForData[h.whitelistedIdentifiers[i]]==L.ConvivaIdErrorCodes.CONVIVAID_USER_OPT_DELETE?(h._uniqueIdentifiers[L.CONVIVAID_FP_PREFIX+""+h.whitelistedIdentifiers[i]]=L.ConvivaIdErrorCodes.CONVIVAID_USER_OPT_DELETE,h._client._uniqueIdentifierCallback("End-user chose to opt-out of personal data collection")):h._client._userPrefForData[h.whitelistedIdentifiers[i]]==L.ConvivaIdErrorCodes.CONVIVAID_PRIVACY_RESTRICTION?(h._uniqueIdentifiers[L.CONVIVAID_FP_PREFIX+""+h.whitelistedIdentifiers[i]]=L.ConvivaIdErrorCodes.CONVIVAID_PRIVACY_RESTRICTION,h._client._uniqueIdentifierCallback("End-user used privacy settings and chose to opt-out of personal data collection")):(h._uniqueIdentifiers[L.CONVIVAID_FP_PREFIX+""+h.whitelistedIdentifiers[i]]=h._client._uniqueIdentifiers[h.whitelistedIdentifiers[i]],h._client._uniqueIdentifierCallback("Data collection successful")):(h._uniqueIdentifiers[L.CONVIVAID_FP_PREFIX+""+h.whitelistedIdentifiers[i]]=h._client._uniqueIdentifiers[h.whitelistedIdentifiers[i]],h._client._uniqueIdentifierCallback("Data collection successful")):h._uniqueIdentifiers[L.CONVIVAID_FP_PREFIX+""+h.whitelistedIdentifiers[i]]=L.ConvivaIdErrorCodes.CONVIVAID_NA;var a={};for(var o in t){var s=o.split(".");"{}"!=JSON.stringify(h.whitelistedIdentifiers)&&-1!=h.whitelistedIdentifiers.indexOf(""+s[2])||t[L.CONVIVAID_FP_PREFIX+""+s[2]]==L.ConvivaIdErrorCodes.CONVIVAID_SERVER_RESTRICTION||(h._client._uniqueIdentifierCallback("Data collection restricted from Conviva back-end"),h._uniqueIdentifiers[L.CONVIVAID_FP_PREFIX+""+s[2]]=L.ConvivaIdErrorCodes.CONVIVAID_SERVER_RESTRICTION,a[L.CONVIVAID_FP_PREFIX+""+s[2]]=L.ConvivaIdErrorCodes.CONVIVAID_SERVER_RESTRICTION)}if("{}"!==JSON.stringify(h._uniqueIdentifiers)){var l=F.ObjectShallowCopy(h._uniqueIdentifiers);for(var _ in e._data.tags)l[_]=e._data.tags[_];if(e._data.tags=l,!F.ObjectShallowEquals(t,h._uniqueIdentifiers)){var c=null,u={};if("{}"!==JSON.stringify(a)&&(u[N.REQUEST_KEY_TAGS]=a),"{}"!==JSON.stringify(t)){c={};for(var d in t)void 0!==h._uniqueIdentifiers[d]&&t[d]!==h._uniqueIdentifiers[d]&&(void 0==u[N.REQUEST_KEY_TAGS]&&(u[N.REQUEST_KEY_TAGS]={}),u[N.REQUEST_KEY_TAGS][d]=h._uniqueIdentifiers[d]);for(d in h._uniqueIdentifiers)t.hasOwnProperty(d)&&t[d]===h._uniqueIdentifiers[d]||(void 0==u[N.REQUEST_KEY_TAGS]&&(u[N.REQUEST_KEY_TAGS]={}),u[N.REQUEST_KEY_TAGS][d]=h._uniqueIdentifiers[d])}"{}"==JSON.stringify(t)&&(u[N.REQUEST_KEY_TAGS]=h._uniqueIdentifiers);var E={};if(E[N.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=u,E[N.REQUEST_EVENT_KEY_TYPE]=N.EVENT_TYPE_STATE_CHANGE,E[N.REQUEST_EVENT_KEY_SESSION_TIME]=h.getSessionTime(),E[N.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=h._eventQueue.getNumber(),h._playerStateManager){var g=k.Integer(h._playerStateManager.getPHT(),0,null,-1),S=k.Integer(h._playerStateManager.getBufferLength(),0,null,-1);g>=0&&(E[N.REQUEST_KEY_PLAYHEAD_TIME]=g),S>0&&(E[N.REQUEST_KEY_BUFFER_LENGTH]=S)}void 0==e._data.evs&&(e._data.evs=[]),e._data.evs.push(E)}}return e},this.cloneHearbeatWithBrowserTags=function(e){var t=h.getBrowserMetadata();if("{}"!==JSON.stringify(t)){var n=F.ObjectShallowCopy(t);for(var r in e._data.tags)n[r]=e._data.tags[r];e._data.tags=n;var i={};i[N.REQUEST_KEY_TAGS]=t;var a={};if(a[N.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=i,a[N.REQUEST_EVENT_KEY_TYPE]=N.EVENT_TYPE_STATE_CHANGE,a[N.REQUEST_EVENT_KEY_SESSION_TIME]=h.getSessionTime(),a[N.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=h._eventQueue.getNumber(),h._playerStateManager){var o=k.Integer(h._playerStateManager.getPHT(),0,null,-1),s=k.Integer(h._playerStateManager.getBufferLength(),0,null,-1);o>=0&&(a[N.REQUEST_KEY_PLAYHEAD_TIME]=o),s>0&&(a[N.REQUEST_KEY_BUFFER_LENGTH]=s)}return void 0==e._data.evs&&(e._data.evs=[]),e._data.evs.push(a),e}return e},this.getBrowserMetadata=function(){var e={};if("undefined"!=typeof navigator&&null!=navigator){if(e["c3.fp.cookie"]=null!=navigator.cookieEnabled&&void 0!=navigator.cookieEnabled?""+navigator.cookieEnabled:"",e["c3.fp.memory"]=null!=navigator.deviceMemory&&void 0!=navigator.deviceMemory?""+navigator.deviceMemory:"",e["c3.fp.hwConc"]=null!=navigator.hardwareConcurrency&&void 0!=navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",e["c3.fp.java"]=""+("function"!=typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),e["c3.fp.lang"]=null!=navigator.language&&void 0!=navigator.language?""+navigator.language:"",e["c3.fp.langs"]=null!=navigator.languages&&void 0!=navigator.languages&&navigator.languages.length>0?""+navigator.languages.toString():"",e["c3.fp.maxTp"]=null!=navigator.maxTouchPoints&&void 0!=navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",e["c3.fp.plugins"]="",null!=navigator.plugins&&navigator.plugins.length>0)for(var t=0;t<navigator.plugins.length;t++)e["c3.fp.plugins"]+=navigator.plugins[t].name+",";if(e["c3.fp.mime"]="",null!=navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var n=0;n<navigator.mimeTypes.length;n++)e["c3.fp.mime"]+=navigator.mimeTypes[n].type+",";e["c3.fp.sysLang"]=null!=navigator.systemLanguage&&void 0!=navigator.systemLanguage?""+navigator.systemLanguage:"",e["c3.fp.platform"]=null!=navigator.platform&&void 0!=navigator.platform?""+navigator.platform:"",e["c3.fp.product"]=null!=navigator.product&&void 0!=navigator.product?""+navigator.product:"",e["c3.fp.productSub"]=null!=navigator.productSub&&void 0!=navigator.productSub?""+navigator.productSub:"",e["c3.fp.vendor"]=null!=navigator.vendor&&void 0!=navigator.vendor?""+navigator.vendor:"",e["c3.fp.vendorSub"]=null!=navigator.vendorSub&&void 0!=navigator.vendorSub?""+navigator.vendorSub:"";var r=h.getHashedCanvasFingerprint();""!=r&&(e["c3.fp.canvFp"]=r)}return"undefined"!=typeof window&&null!=window&&(null!=window.screen&&(e["c3.fp.availHeight"]=null!=window.screen.availHeight&&void 0!=window.screen.availHeight?""+window.screen.availHeight:"",e["c3.fp.availWidth"]=null!=window.screen.availWidth&&void 0!=window.screen.availWidth?""+window.screen.availWidth:"",e["c3.fp.height"]=null!=window.screen.height&&void 0!=window.screen.height?""+window.screen.height:"",e["c3.fp.width"]=null!=window.screen.width&&void 0!=window.screen.width?""+window.screen.width:"",e["c3.fp.colorDepth"]=null!=window.screen.colorDepth&&void 0!=window.screen.colorDepth?""+window.screen.colorDepth:"",e["c3.fp.deviceXDPI"]=null!=window.screen.deviceXDPI&&void 0!=window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",e["c3.fp.deviceYDPI"]=null!=window.screen.deviceYDPI&&void 0!=window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),e["c3.fp.dpi"]=null!=window.devicePixelRatio&&void 0!=window.devicePixelRatio?""+window.devicePixelRatio:"",e["c3.fp.secure"]=null!=window.isSecureContext&&void 0!=window.isSecureContext?""+window.isSecureContext:""),e},this.getHashedCanvasFingerprint=function(){if("undefined"!=typeof document&&null!=document){var e=document.createElement("CANVAS"),t=e.getContext("2d"),n="conviva";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f40",t.fillRect(null!=navigator.plugins&&void 0!=navigator.plugins?navigator.plugins.length:0,null!=navigator.mimeTypes&&void 0!=navigator.mimeTypes?navigator.mimeTypes.length:0,null!=navigator.product&&void 0!=navigator.product?navigator.product.length:0,null!=navigator.vendor&&void 0!=navigator.vendor?navigator.vendor.length:0),t.fillStyle="#069",t.fillText(n,null!=navigator.maxTouchPoints&&void 0!=navigator.maxTouchPoints?navigator.maxTouchPoints:0,null!=navigator.product&&void 0!=navigator.product?navigator.product.length:0),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,null!=navigator.deviceMemory&&void 0!=navigator.deviceMemory?navigator.deviceMemory:0,null!=navigator.hardwareConcurrency&&void 0!=navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),F.sha256(e.toDataURL())}return""},this.sendHeartbeat=function(){if(!h._cleanedUp){var e=h.makeHeartbeat();null!=e&&h.postHeartbeat(e)}},this.countRfps=function(){if(h._playerState===l.PlayerState.PLAYING&&null!=h._playerStateManager){var e=h._playerStateManager.getRenderedFrameRate();e>0&&(h._playingFpsTotal+=e,h._playingFpsObservationCount++)}},this.updateAverageFrameRate=function(){return h._playingFpsTotal>0&&h._playingFpsObservationCount>0?F.Int32.Cast(1*h._playingFpsTotal/h._playingFpsObservationCount):(this.countRfps(),h._playingFpsTotal>0&&h._playingFpsObservationCount>0?F.Int32.Cast(1*h._playingFpsTotal/h._playingFpsObservationCount):l.DEFAULT_RENDERED_FRAME_RATE)},this.postHeartbeat=function(e){h.createHeartbeatInfo();var t=h._heartbeatSequenceNumber-1;h._logger.info("postHeartbeat(): Send HB["+t+"]"+h.sessionTypeTag());var n=function(e,n){h.onHeartbeatResponse(e,n,t)};h._gatewayControl.send(e,n)},this.onHeartbeatResponse=function(e,t,n){h._cleanedUp||h._exceptionCatcher.runProtected("onHeartbeatResponse",function(){if(e){var r=t;if(null!=r){h._logger.debug("onHeartbeatResponse(): received valid response for HB["+n+"]"),h.updateHeartbeatInfoOnSuccess(n);var i=r[N.RESPONSE_KEY_CLIENT_ID];null!=i&&i!=h._clientConfig.get(L.CONFIG_KEY_CLIENT_ID)&&(h._logger.debug("onHeartbeatResponse(): setting the client id to "+i+" (from gateway)"),h._clientConfig.set(L.CONFIG_KEY_CLIENT_ID,i),h._clientConfig.save());var a=r[N.RESPONSE_KEY_STATUS];null!=a&&a!=N.RESPONSE_STATUS_NO_ERRORS&&h._logger.error("onHeartbeatResponse(): error from gateway: "+a);var o=r[N.RESPONSE_KEY_CONFIG];if("object"==typeof o){var s=o[N.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS];null!=s&&h._clientConfig.get(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS)!==s&&(h._logger.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+s+" (from gateway)"),h._clientConfig.set(L.CONFIG_KEY_MAX_HEARTBEAT_INFOS,s));var l=o[N.RESPONSE_CONFIG_KEY_SEND_LOGS],_=null!=l&&F.AsBoolean(l);_!==h._clientConfig.get(L.CONFIG_KEY_SEND_LOGS)&&(h._logger.debug("onHeartbeatResponse(): turning "+(_?"on":"off")+" sending of logs"),h._clientConfig.set(L.CONFIG_KEY_SEND_LOGS,_));var c=o[N.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL];if(null!=c){var u=F.Int32.Cast(c),d=u;d!=h._clientSettings.heartbeatInterval&&(h._logger.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+d),h._clientSettings.heartbeatInterval=d,null!=h._heartbeatTimerCancel&&h.resetHeartbeatTimer())}var E=o[N.RESPONSE_CONFIG_KEY_GATEWAY_URL];null!=E&&E!=h._clientSettings.gatewayUrl&&(h._logger.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+E),h._clientSettings.gatewayUrl=E),h.whitelistedIdentifiers={};var g=o[N.RESPONSE_CONFIG_KEY_CONVIVAID_FP];null!=g&&(h._startConvivaIdCollection||(h._startConvivaIdCollection=!0),h._logger.debug("onHeartbeatResponse(): received fp from gateway: "+g),h.whitelistedIdentifiers=g.split(",")),h._cdnIpAutoDetectionEnabled=o[N.RESPONSE_CONFIG_KEY_CDN_SERVER_IP_ENABLE],1==h._cdnIpAutoDetectionEnabled?(h._logger.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),(void 0==h._cdnTimerCancel||null==h._cdnTimerCancel)&&h.startCdnTimer()):(h._logger.debug("onHeartbeatResponse(): disabling the CDN Server IP collection (from gateway)"),h.cancelCdnTimer())}}else h._logger.warning("onHeartbeatResponse(): decoded heartbeat response is null.")}else{var S=t;F.isValidString(S)?F.stringStartsWith(S,"HTTP timeout")?h._logger.warning("onHeartbeatResponse(): "+S):h._logger.error("onHeartbeatResponse(): failed to send heartbeat: "+S):(S=O.DEFAULT_HEARTBEAT_ERROR_MESSAGE,h._logger.error("onHeartbeatResponse(): "+S)),h.updateHeartbeatInfoOnFailure(n,S)}})},this.getSessionTime=function(){var e=F.Int32.Cast(h._time.current()-h._startTimeMs);return e},this.getNextEventNumber=function(){return this._eventQueue.getNumber()},this.sessionTypeTag=function(){return this.isGlobalSession()?" (global session)":""},this.isGlobalSession=function(){return this._global==M.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){return this._global==M.SESSION_TYPE.VIDEO},this.isAdSession=function(){return this._global==M.SESSION_TYPE.AD},this.updateContentMetadata=function(e){h.mergeContentMetadata(e),h.setStatesFromContentMetadata()},this.mergeContentMetadata=function(t){var n={},r={};if(F.isValidString(t.assetName)&&(h._contentMetadata.assetName!=t.assetName?(null!=h._contentMetadata.assetName&&(n[N.REQUEST_KEY_ASSET_NAME]=h._contentMetadata.assetName),r[N.REQUEST_KEY_ASSET_NAME]=t.assetName,h._contentMetadata.assetName=t.assetName):h._logger.warning("mergeContentMetadata(): assetName was not changed.")),F.isValidString(t.applicationName)&&(h._contentMetadata.applicationName!=t.applicationName?(null!=h._contentMetadata.applicationName&&(n[N.REQUEST_KEY_PLAYER_NAME]=h._contentMetadata.applicationName),r[N.REQUEST_KEY_PLAYER_NAME]=t.applicationName,h._contentMetadata.applicationName=t.applicationName):h._logger.warning("mergeContentMetadata(): applicationName was not changed.")),
F.isValidString(t.streamUrl)&&(h._contentMetadata.streamUrl!=t.streamUrl?(null!=h._contentMetadata.streamUrl&&(n[N.REQUEST_KEY_STREAM_URL]=h._contentMetadata.streamUrl),r[N.REQUEST_KEY_STREAM_URL]=t.streamUrl,h._contentMetadata.streamUrl=t.streamUrl,h._streamUrl=h._contentMetadata.streamUrl):h._logger.warning("mergeContentMetadata(): streamUrl was not changed.")),F.isValidString(t.viewerId)&&(h._contentMetadata.viewerId!=t.viewerId?(null!=h._contentMetadata.viewerId&&(n[N.REQUEST_KEY_VIEWER_ID]=h._contentMetadata.viewerId),r[N.REQUEST_KEY_VIEWER_ID]=t.viewerId,h._contentMetadata.viewerId=t.viewerId):h._logger.warning("mergeContentMetadata(): viewerId was not changed.")),F.isValidString(t.defaultResource)&&(h._contentMetadata.defaultResource!=t.defaultResource?(null!=h._contentMetadata.defaultResource&&(n[N.REQUEST_KEY_RESOURCE]=h._contentMetadata.defaultResource),r[N.REQUEST_KEY_RESOURCE]=t.defaultResource,h._contentMetadata.defaultResource=t.defaultResource):h._logger.warning("mergeContentMetadata(): defaultResource was not changed.")),F.isInteger(t.duration)&&t.duration>0&&(h._contentMetadata.duration!=t.duration?(h._contentLengthSec>0&&(n[N.REQUEST_KEY_CONTENT_LENGTH]=h._contentLengthSec),r[N.REQUEST_KEY_CONTENT_LENGTH]=t.duration,h._contentMetadata.duration=t.duration,h._contentLengthSec=h._contentMetadata.duration):h._logger.warning("mergeContentMetadata(): duration was not changed.")),F.isInteger(t.encodedFrameRate)&&t.encodedFrameRate>0&&(h._contentMetadata.encodedFrameRate!=t.encodedFrameRate?(h._contentMetadata.encodedFrameRate>-1&&(n[N.REQUEST_KEY_ENCODED_FRAME_RATE]=h._contentMetadata.encodedFrameRate),r[N.REQUEST_KEY_ENCODED_FRAME_RATE]=t.encodedFrameRate,h._contentMetadata.encodedFrameRate=t.encodedFrameRate,h._encodedFrameRate=h._contentMetadata.encodedFrameRate):h._logger.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!=a.StreamType.UNKNOWN&&(h._contentMetadata.streamType!=t.streamType?(h._contentMetadata.streamType!=a.StreamType.UNKNOWN&&(h._contentMetadata.streamType==e.ContentMetadata.StreamType.LIVE?n[N.REQUEST_KEY_IS_LIVE]=!0:n[N.REQUEST_KEY_IS_LIVE]=!1),t.streamType==e.ContentMetadata.StreamType.LIVE?r[N.REQUEST_KEY_IS_LIVE]=!0:r[N.REQUEST_KEY_IS_LIVE]=!1,h._contentMetadata.streamType=t.streamType):h._logger.warning("mergeContentMetadata(): streamType was not changed.")),F.dictCount(t.custom)>0){var i={},o={};for(var s in t.custom){var l=h._contentMetadata.custom[s];l!=t.custom[s]?(i[s]=t.custom[s],h._contentMetadata.custom[s]&&(o[s]=h._contentMetadata.custom[s]),h._contentMetadata.custom[s]=t.custom[s]):h._logger.info("mergeContentMetadata(): custom."+s+" was not changed.")}F.dictCount(i)>0?(F.dictCount(o)>0&&(n[N.REQUEST_KEY_TAGS]=o),r[N.REQUEST_KEY_TAGS]=i):h._logger.warning("mergeContentMetadata(): custom was not changed.")}F.dictCount(r)>0&&this.declareStateChange(r,n)},this.setStatesFromContentMetadata=function(){if(h._logger.debug("setStatesFromContentMetadata()"),null!=h._contentMetadata.defaultResource&&this.setResource(h._contentMetadata.defaultResource),null!=h._contentMetadata.streamUrl&&this.setStreamUrl(h._contentMetadata.streamUrl),h._contentMetadata.duration>0&&this.setContentLength(h._contentMetadata.duration),h._contentMetadata.encodedFrameRate>0&&this.setEncodedFrameRate(h._contentMetadata.encodedFrameRate),h._contentMetadata.streamType!==a.StreamType.UNKNOWN){var e=h._contentMetadata.streamType===a.StreamType.LIVE;this.setIsLive(e)}null!=h._contentMetadata.assetName&&this.setAssetName(h._contentMetadata.assetName),null!=h._contentMetadata.viewerId&&this.setViewerId(h._contentMetadata.viewerId),(null!=h._contentMetadata.applicationName||null!=h._contentMetadata.playerName)&&this.setPlayerName(h._contentMetadata.applicationName||h._contentMetadata.playerName),F.dictCount(h._contentMetadata.custom)>0&&this.setTags(h._contentMetadata.custom)},this.enqueueEventForContentMetadata=function(){var t={};if(null!=h._contentMetadata.assetName?t[N.REQUEST_KEY_ASSET_NAME]=h._contentMetadata.assetName:h._logger.warning("enqueueEventForContentMetadata(): assetName was not set."),null!=h._contentMetadata.applicationName?t[N.REQUEST_KEY_PLAYER_NAME]=h._contentMetadata.applicationName:h._logger.warning("enqueueEventForContentMetadata(): applicationName was not set."),null!=h._contentMetadata.streamUrl?t[N.REQUEST_KEY_STREAM_URL]=h._contentMetadata.streamUrl:h._logger.warning("enqueueEventForContentMetadata(): streamUrl was not set."),null!=h._contentMetadata.viewerId?t[N.REQUEST_KEY_VIEWER_ID]=h._contentMetadata.viewerId:h._logger.warning("enqueueEventForContentMetadata(): viewerId was not set."),null!=h._contentMetadata.defaultResource?t[N.REQUEST_KEY_RESOURCE]=h._contentMetadata.defaultResource:h._logger.warning("enqueueEventForContentMetadata(): defaultResource was not set."),h._contentMetadata.duration>-1?t[N.REQUEST_KEY_CONTENT_LENGTH]=h._contentMetadata.duration:h._logger.warning("enqueueEventForContentMetadata(): duration was not set."),h._contentMetadata.encodedFrameRate>-1?t[N.REQUEST_KEY_ENCODED_FRAME_RATE]=h._contentMetadata.encodedFrameRate:h._logger.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),h._contentMetadata.streamType!=a.StreamType.UNKNOWN?h._contentMetadata.streamType==e.ContentMetadata.StreamType.LIVE?t[N.REQUEST_KEY_IS_LIVE]=!0:t[N.REQUEST_KEY_IS_LIVE]=!1:h._logger.warning("enqueueEventForContentMetadata(): streamType was not set."),F.dictCount(h._contentMetadata.custom)>0){t[N.REQUEST_KEY_TAGS]={};for(var n in h._contentMetadata.custom)t[N.REQUEST_KEY_TAGS][n]=h._contentMetadata.custom[n]}else h._logger.warning("enqueueEventForContentMetadata(): custom tags were not set.");F.dictCount(t)>0&&this.declareStateChange(t,null)},this.validateContentMetadata=function(){null!=h._contentMetadata&&F.isValidString(h._contentMetadata.assetName)||h._logger.warning("Missing assetName during session creation"),null!=h._contentMetadata&&F.isValidString(h._contentMetadata.defaultResource)||h._logger.warning("Missing resource during session creation"),null!=h._contentMetadata&&F.isValidString(h._contentMetadata.streamUrl)||h._logger.warning("Missing streamUrl during session creation"),(null==h._contentMetadata||h._contentMetadata.encodedFrameRate<=0)&&h._logger.warning("Missing encodedFrameRate during session creation"),null!=h._contentMetadata&&F.isValidString(h._contentMetadata.viewerId)||h._logger.warning("Missing viewerId during session creation"),(null==h._contentMetadata||null==h._contentMetadata.streamType||a.StreamType.UNKNOWN===h._contentMetadata.streamType)&&h._logger.warning("Missing streamType during session creation"),null!=h._contentMetadata&&F.isValidString(h._contentMetadata.applicationName)||h._logger.warning("Missing applicationName during session creation"),(null==h._contentMetadata||h._contentMetadata.duration<=0)&&h._logger.warning("Missing duration during session creation")},this.updateCustomMetric=function(e,t){null==h._customMetric&&(h._customMetric={}),h._customMetric[e]=t}};M.DEFAULT_VIDEO_SESSION_FLAGS=N.SessionFlags.VIDEO+N.SessionFlags.QUALITY_METRICS+N.SessionFlags.BITRATE_METRICS,M.SESSION_TYPE={VIDEO:"Video",GLOBAL:"Global",AD:"Ad"};var O=(t.IMonitor=function(){this.onPlayerStateChange=function(e){},this.onBitrateChange=function(e){},this.onSeekEvent=function(e,t){},this.onEncodedFrameRateChange=function(e){},this.onRenderedFrameRateChange=function(e){},this.onContentLengthChange=function(e){},this.onPlayheadTimeChange=function(e){},this.onStreamUrlChange=function(e){},this.onBufferLengthChange=function(e){},this.onPlayerTypeChange=function(e){},this.onPlayerVersionChange=function(e){},this.onStreamResolutionWidthChange=function(e){},this.onStreamResolutionHeightChange=function(e){},this.onConnectionTypeChange=function(e){},this.onLinkEncryptionChange=function(e){},this.onSignalStrengthChange=function(e){},this.onError=function(e,t){},this.onRelease=function(){},this.onCDNServerIPChange=function(e){}},t.Session=function(){function t(e,t,n,r,i,a,o){this._id=e,this._global=t,this._clientConfig=n,this._systemMetadata=r,this._cwsSession=i,this._exceptionCatcher=a,this._logger=o,this._logger.setModuleName("Session"),this._logger.setSessionId(F.ToString(this._id))}var n=this;n._playerStateManager=null,n._id=0,n._global=M.SESSION_TYPE.VIDEO,n._cleaningUp=!1,n._cleanedUp=!1,n._adPlaying=!1,n._adStream=null,n._adPlayer=null,n._adPosition=null,n._ignorePlayerState=!1,n._pooledPlayerState=l.PlayerState.NOT_MONITORED,n._ignoreBitrateAndResource=!1,n._ignorePlayheadTimeandBufferLength=!1,n._ignoreEncodedFrameRateAndDuration=!1,n._ignoreError=!1,t.apply(n,arguments),this.start=function(e){if(n._cwsSession.start(this),null!=e&&void 0!=e&&n.attachPlayer(e),n._clientConfig.isReady())n.initiateSession();else{var t=function(){n.initiateSession()};n._clientConfig.register(t)}},this.cleanup=function(){if(n._logger.info("cleanup()"+n.sessionTypeTag()),n._cleaningUp=!0,n._cwsSession.willEndSoon(),n._clientConfig.isReady())n.endCwsSessionAndCleanupAll();else{var e=function(){n.endCwsSessionAndCleanupAll()};n._clientConfig.register(e)}},this.cleanupAll=function(){n._logger.debug("cleanupAll()"+n.sessionTypeTag()),(n.isVideoSession()||n.isAdSession())&&null!=n._playerStateManager&&n.releasePlayerStateManager(),n._logger.setSessionId(null),n._logger=null,n._exceptionCatcher=null,n._client=null,n._clientConfig=null,n._systemMetadata=null,n._cwsSession.cleanup(),n._cwsSession=null,n._cleanedUp=!0},this.endCwsSessionAndCleanupAll=function(){n._cwsSession.end(),n.cleanupAll()},this.initiateSession=function(){n._cwsSession.initialize(),n.setStatesFromSystemMetadata(),n._cwsSession.startSendingHeartbeats()},this.setStatesFromSystemMetadata=function(){n._logger.debug("setStatesFromSystemMetadata()");var e=n._systemMetadata.get(),t=e[x.BROWSER_NAME];null!=t&&n._cwsSession.setBrowserName(t);var r=e[x.BROWSER_VERSION];null!=r&&n._cwsSession.setBrowserVersion(r);var i=e[x.DEVICE_BRAND];null!=i&&n._cwsSession.setDeviceBrand(i);var a=e[x.DEVICE_MANUFACTURER];null!=a&&n._cwsSession.setDeviceManufacturer(a);var o=e[x.DEVICE_MODEL];null!=o&&n._cwsSession.setDeviceModel(o);var s=e[x.DEVICE_TYPE];null!=s&&n._cwsSession.setDeviceType(s);var l=e[x.DEVICE_VERSION];null!=l&&n._cwsSession.setDeviceVersion(l);var _=e[x.FRAMEWORK_NAME];null!=_&&n._cwsSession.setFrameworkName(_);var c=e[x.FRAMEWORK_VERSION];null!=c&&n._cwsSession.setFrameworkVersion(c);var u=e[x.OPERATING_SYSTEM_NAME];null!=u&&n._cwsSession.setOperatingSystemName(u);var d=e[x.OPERATING_SYSTEM_VERSION];null!=d&&n._cwsSession.setOperatingSystemVersion(d);var E=e[x.DEVICE_CATEGORY];null!=E&&n._cwsSession.setDeviceCategory(E)},this.onPlayerStateChange=function(e){return n._logger.debug("onPlayerStateChange(): "+e),n._cwsSession._playerState!=e?(n._cwsSession._playerState==l.PlayerState.NOT_MONITORED&&e!=l.PlayerState.NOT_MONITORED&&(n._pooledPlayerState=e),n._ignorePlayerState?void n._logger.debug("onPlayerStateChange(): "+e+" (pooled, "+(n._adPlaying?"ad playing":"preloading")+")"):void n._cwsSession.setPlayerState(e)):void 0},this.onBitrateChange=function(e){return n._logger.debug("onBitrateChange(): "+e),n._ignoreBitrateAndResource?void n._logger.info("onBitrateChange(): ignored"):void n._cwsSession.setBitrateKbps(e)},this.onSeekEvent=function(e,t){F.isInteger(t)||(n._logger.warning("onSeekEvent(): Ignored non-integer seekToPosition data: "+t),t=-1),n._cwsSession.enqueueSeekEvent(e,t)},this.onEncodedFrameRateChange=function(e){n._logger.debug("onEncodedFrameRateChange(): "+e),e>0?n._ignoreEncodedFrameRateAndDuration?n._logger.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+e+" (ads)"):(n._cwsSession.setEncodedFrameRate(e),n._logger.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+e)):n._logger.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+e)},this.onContentLengthChange=function(e){n._logger.debug("onContentLengthChange(): "+e),e>0?n._ignoreEncodedFrameRateAndDuration?n._logger.info("setContentLength(): Ignored content length data: "+e+" (ads)"):(n._cwsSession.setContentLength(e),n._logger.info("setContentLength(): Received content length data: "+e)):n._logger.warning("setContentLength(): Ignored invalid content length data: "+e)},this.onStreamUrlChange=function(e){n._logger.debug("onStreamUrlChange(): "+e),n._cwsSession.setStreamUrl(e)},this.onStreamResolutionWidthChange=function(e){n._logger.debug("onStreamResolutionWidthChange(): "+e),n._cwsSession.setStreamResolutionWidth(e)},this.onStreamResolutionHeightChange=function(e){n._logger.debug("onStreamResolutionHeightChange(): "+e),n._cwsSession.setStreamResolutionHeight(e)},this.onConnectionTypeChange=function(e){n._logger.debug("onConnectionTypeChange(): "+e),n._cwsSession.setConnectionType(e)},this.onLinkEncryptionChange=function(e){n._logger.debug("onLinkEncryptionChange(): "+e),n._cwsSession.setLinkEncryption(e)},this.onPlayerTypeChange=function(e){n._logger.debug("onPlayerTypeChange(): "+e),null==n._cwsSession.getFrameworkName()&&n._cwsSession.setFrameworkName(e)},this.onPlayerVersionChange=function(e){n._logger.debug("onPlayerVersionChange(): "+e),null==n._cwsSession.getFrameworkVersion()&&n._cwsSession.setFrameworkVersion(e)},this.onCDNServerIPChange=function(e){n._logger.debug("onCDNServerIPChange(): "+e),n._cwsSession.setCDNServerIP(e)},this.onError=function(e,t){n._logger.debug("onError(): "+e+" ("+t+")"),n.reportError(e,t)},this.onRelease=function(){n._logger.debug("onRelease()"),n.releasePlayerStateManager()},this.adStart=function(t,r,i){return n._logger.debug("adStart(): adStream="+t+" adPlayer="+r+" adPosition="+i),n._adPlaying?void n._logger.warning("adStart(): multiple adStart calls, ignoring"):(n._adPlaying=!0,n._adStream=t,n._adPlayer=r,n._adPosition=i,n._cwsSession._hasJoined||n._cwsSession.togglePauseJoin(!0),void(n._adStream==e.Client.AdStream.CONTENT||n._adPlayer==e.Client.AdPlayer.SEPARATE?(n._cwsSession._playerState!==l.PlayerState.NOT_MONITORED&&(n._pooledPlayerState=n._cwsSession._playerState),n._cwsSession.setPlayerState(l.PlayerState.NOT_MONITORED),n._ignorePlayerState=!0):n._adStream==e.Client.AdStream.SEPARATE&&n._adPlayer==e.Client.AdPlayer.CONTENT&&(n._cwsSession._playerState!==l.PlayerState.NOT_MONITORED&&(n._pooledPlayerState=n._cwsSession._playerState),n._cwsSession.setPlayerState(l.PlayerState.NOT_MONITORED),n._ignorePlayerState=!0,n._ignoreBitrateAndResource=!0,n._ignoreEncodedFrameRateAndDuration=!0,n._ignorePlayheadTimeandBufferLength=!0,n._ignoreError=!0)))},this.adEnd=function(){return n._logger.debug("adEnd()"),n._adPlaying?(n._cwsSession._hasJoined||n._cwsSession.togglePauseJoin(!1),n._adStream==e.Client.AdStream.CONTENT||n._adPlayer==e.Client.AdPlayer.SEPARATE?n._preloading||(n._ignorePlayerState=!1,n._cwsSession.setPlayerState(n._pooledPlayerState)):n._adStream==e.Client.AdStream.SEPARATE&&n._adPlayer==e.Client.AdPlayer.CONTENT&&(n._ignoreBitrateAndResource=!1,n._ignoreEncodedFrameRateAndDuration=!1,n._ignorePlayheadTimeandBufferLength=!1,n._ignoreError=!1,n._preloading||(n._ignorePlayerState=!1,n._cwsSession.setPlayerState(n._pooledPlayerState))),n._adPlaying=!1,void(n._adStream=n._adPlayer=n._adPosition=null)):void n._logger.warning("adEnd(): called before adStart, ignoring")},this.detachPlayer=function(){return n._logger.debug("detachPlayer()"),null==n._playerStateManager?void n._logger.error("detachPlayer(): called before attachPlayer, ignoring"):void(null!==n._playerStateManager&&(n._exceptionCatcher.runProtected("Session.detachPlayer",function(){n._playerStateManager.removeMonitoringNotifier()}),n._playerStateManager=null,n._cwsSession.setPlayerStateManager(null),n._cwsSession.setPlayerState(l.PlayerState.NOT_MONITORED)))},this.releasePlayerStateManager=function(){null!==n._playerStateManager&&(n._exceptionCatcher.runProtected("Session.releasePlayerStateManager",function(){n._playerStateManager.removeMonitoringNotifier()}),n._playerStateManager=null,n._cwsSession.setPlayerStateManager(null),n._cwsSession.setPlayerState(l.PlayerState.NOT_MONITORED))},this.offFocus=function(){n._logger.debug("offFocus()"),n._cwsSession._hasJoined||n._cwsSession.togglePauseJoin(!0),n._cwsSession._playerState!==l.PlayerState.NOT_MONITORED&&(n._pooledPlayerState=n._cwsSession._playerState),n._cwsSession.setPlayerState(l.PlayerState.NOT_MONITORED),n._ignorePlayerState=!0},this.attachPlayer=function(e){return n._logger.debug("attachPlayer()"),null!=n._playerStateManager?void n._logger.error("attachPlayer(): detach current PlayerStateManager first"):e instanceof l?void n._exceptionCatcher.runProtected("Session.attachPlayer()",function(){e.setMonitoringNotifier(n,n._id)?(e.pushCurrentState(),n._playerStateManager=e,n._cwsSession.setPlayerStateManager(n._playerStateManager)):n._logger.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")}):void n._logger.error("attachPlayer(): Incorrect PlayerStateManager instance")},this.onFocus=function(){n._logger.debug("onFocus()"),n._cwsSession._hasJoined||n._cwsSession.togglePauseJoin(!1),n._ignoreBitrateAndResource=!1,n._ignoreEncodedFrameRateAndDuration=!1,n._ignorePlayheadTimeandBufferLength=!1,n._ignoreError=!1,n._preloading||(n._ignorePlayerState=!1,n._pooledPlayerState!==l.PlayerState.NOT_MONITORED&&n._cwsSession.setPlayerState(n._pooledPlayerState))},this.getPlayerStateManager=function(){return n._logger.debug("getPlayerStateManager()"),n._playerStateManager},this.contentPreload=function(){return n._logger.debug("contentPreload()"),n._preloading?void n._logger.debug("contentPreload(): called twice, ignoring"):(n._preloading=!0,void(n._ignorePlayerState=!0))},this.contentStart=function(){return n._logger.debug("contentStart()"),n._preloading?(n._preloading=!1,void(n._adPlaying||(n._ignorePlayerState=!1,n._pooledPlayerState!==l.PlayerState.NOT_MONITORED&&n._cwsSession.setPlayerState(n._pooledPlayerState)))):void n._logger.warning("contentStart(): called without contentPreload, ignoring")},this.reportError=function(t,r){if(n._logger.info("reportError(): "+t),!F.isValidString(t))return void n._logger.error("reportError(): invalid error message string: "+t);if(r!==e.Client.ErrorSeverity.FATAL&&r!==e.Client.ErrorSeverity.WARNING)return void n._logger.error("reportError(): invalid error severity: "+r);if(n._ignoreError)return void n._logger.debug("reportError(): ignored");var i=r===e.Client.ErrorSeverity.FATAL;n._cwsSession.sendError(t,i)},this.updateContentMetadata=function(e){n._exceptionCatcher.runProtected("Session.updateContentMetadata",function(){n._cwsSession.updateContentMetadata(e)})},this.sendCustomEvent=function(e,t){n._logger.info("sendEvent(): eventName="+e+n.sessionTypeTag()),n._cwsSession.enqueueCustomEvent(e,t)},this.isGlobalSession=function(){return n._global==M.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){return n._global==M.SESSION_TYPE.VIDEO},this.isAdSession=function(){return n._global==M.SESSION_TYPE.AD},this.sessionTypeTag=function(){return n.isGlobalSession()?" (global session)":""},this.getSessionId=function(){return this._id},this.getClientId=function(){var e=null;return n._clientConfig.isReady()&&(e=n._clientConfig.get(L.CONFIG_KEY_CLIENT_ID)),e},this.updateCustomMetric=function(e,t){n._cwsSession.updateCustomMetric(e,t)}});O.DEFAULT_HEARTBEAT_ERROR_MESSAGE="received no response (or a bad response) to heartbeat POST request";var P=t.SessionFactory=function(){function e(e,n,r,i){t._client=e,t._clientSettings=n,t._clientConfig=r,t._systemFactory=i,t._logger=t._systemFactory.buildLogger(),t._logger.setModuleName("SessionFactory"),t._nextSessionKey=0,t._sessionsByKey={}}var t=this;t._logger=null,t._logBuffer=null,t._nextSessionKey=0,t._sessionsByKey=null,e.apply(t,arguments),this.cleanup=function(){t._logger=null,t._logBuffer=null;for(var e in t._sessionsByKey){var n=t._sessionsByKey[e];n.cleanup()}t._sessionsByKey=null,t._nextSessionKey=0},this.newSessionKey=function(){var e=t._nextSessionKey;return t._nextSessionKey++,e},this.makeVideoSession=function(e,n,r){return null==e&&(e=new a),t.makeSession(e,n,r)},this.makeGlobalSession=function(e){return t.makeSession(e,M.SESSION_TYPE.GLOBAL)},this.generateSessionId=function(){return Y.integer32()},this.makeSession=function(e,n,r){var i=e.clone(),a=t.generateSessionId(),o=t._systemFactory.buildSession(t._client,t._clientSettings,t._clientConfig,a,n,i),s=t.newSessionKey();return t.addSession(s,o),o.start(r),s},this.getSession=function(e){var n=t._sessionsByKey[e];return null==n&&t._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),n},this.getVideoSession=function(e){var n=this.getSession(e);return null!=n&&(n.isVideoSession()||n.isAdSession()||(t._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),n=null)),n},this.addSession=function(e,n){t._sessionsByKey[e]=n},this.removeSession=function(e){delete t._sessionsByKey[e]},this.cleanupSession=function(e){var n=t.getSession(e);t.removeSession(e),n.cleanup()}},D=t.CallbackWithTimeout=function(e){this._timer=e,this.getWrapperCallback=function(e,t,n){var r=!1,i=function(){r||(r=!0,e(!1,n+" ("+t+" ms)"))};this._timer.createOnce(i,t,"CallbackWithTimeout.wrap");var a=function(t,n){r||(r=!0,e(t,n))};return a}},L=t.Config=function(e,t,n){var r=this;this._logger=e,this._logger.setModuleName("Config"),this._storage=t,this._jsonInterface=n,this._defaultConfig={clientId:N.DEFAULT_CLIENT_ID,sendLogs:!1,maxHbInfos:N.DEFAULT_MAX_HEARTBEAT_INFOS},this._config=F.ObjectShallowCopy(this._defaultConfig),this._loaded=!1,this._loadedEmpty=!1,this._waitingConsumers=[],this.isReady=function(){return this._loaded},this.load=function(){var e=function(e,t){e?(r._parse(t),r._logger.debug("load(): configuration successfully loaded from local storage"+(r._loadedEmpty?" (was empty)":"")+".")):r._logger.error("load(): error loading configuration from local storage: "+t),r._loaded=!0,r._notify()};this._storage.load(L.STORAGE_KEY,e)},this._parse=function(e){var t=this._jsonInterface.decode(e);if(null==t)return void(this._loadedEmpty=!0);var n=t[L.CONFIG_STORAGE_KEY_CLIENT_ID];null!=n&&n!=N.DEFAULT_CLIENT_ID&&""!=n&&"null"!=n&&(this._config[L.CONFIG_KEY_CLIENT_ID]=n,this._logger.debug("parse(): loaded clientId="+n+" (from local storage)"))},this._marshall=function(){var e={};return e[L.CONFIG_STORAGE_KEY_CLIENT_ID]=this._config.clientId,this._logger.debug("_marshall(): saving clientId="+this._config.clientId+" (to local storage)"),this._jsonInterface.encode(e)},this.save=function(){var e=function(e,t){e?r._logger.debug("save(): configuration successfully saved to local storage."):r._logger.error("save(): error saving configuration to local storage: "+t)};this._storage.save(L.STORAGE_KEY,this._marshall(),e)},this.register=function(e){return this.isReady()?void e():void this._waitingConsumers.push(e)},this.get=function(e){return this._loaded?this._config[e]:null},this.set=function(e,t){this._loaded&&(this._config[e]=t)},this._notify=function(){for(var e;null!=(e=this._waitingConsumers.shift());)e()}};L.STORAGE_KEY="sdkConfig",L.CONFIG_STORAGE_KEY_CLIENT_ID="clId",L.CONFIG_KEY_CLIENT_ID="clientId",L.CONFIG_KEY_SEND_LOGS="sendLogs",L.CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxHbInfos",L.CONVIVAID_FP_PREFIX="c3.fp.",L.ConvivaIdErrorCodes={CONVIVAID_NA:"0",CONVIVAID_FETCH_ERROR:"1",CONVIVAID_USER_OPTOUT:"2",CONVIVAID_PRIVACY_RESTRICTION:"3",CONVIVAID_SERVER_RESTRICTION:"4",CONVIVAID_USER_OPT_DELETE:"5",CONVIVAID_USER_NO_RESTRICTION:"6"};var U=t.EventQueue=function(){this._events=[],this._nextEventNumber=0,this.enqueue=function(e){this._events.push(e)},this.getNumber=function(){var e=this._nextEventNumber;return this._nextEventNumber++,e},this.flush=function(){var e=this._events;return this._events=[],e}},b=t.ExceptionCatcher=function(e,t,n){this._logger=e,this._logger.setModuleName("ExceptionCatcher"),this._ping=t,this._systemSettings=n,this.runProtected=function(e,t,n){try{t()}catch(r){if(null!=n)n(r);else{if(this._systemSettings.allowUncaughtExceptions)throw r;this.onUncaughtException(e,r)}}},this.onUncaughtException=function(e,t){var n="Uncaught exception: "+e+": "+t.toString();if(null!=this._ping)try{this._ping.send(n)}catch(r){this._logger.error("Caught exception while sending ping: "+r.toString())}this._logger.error(n)}},V=t.GatewayControl=function(e,t,n,r){var i=this;this._clientSettings=e,this._logger=t,this._logger.setModuleName("GatewayControl"),this._httpClient=n,this._jsonInterface=r,this.send=function(e,t){var n=this._jsonInterface.encode(e),r=this._clientSettings.gatewayUrl+N.gatewayPath,a=function(e,n){if(e){var r=i._jsonInterface.decode(n);t(e,r)}else{var a=n;t(e,a)}};this._httpClient.request("POST",r,n,"application/json",a)}},F=t.Lang={};F.isMeaningfulString=function(e){return F.isValidString(e)&&null!=e&&"undefined"!=e&&"null"!=e},F.sanitizeStringToStringObject=function(e){var t={};for(var n in e)if(F.isMeaningfulString(n)){var r=e[n];F.isMeaningfulString(r)&&(t[n]=r)}return t},F.validateInterface=function(e,t,n){if(null==e)throw new Error("Expected "+n+" implementation is null.");for(var r in t)if("function"!=typeof e[r])throw new Error("Expected method "+r+" in "+n+" implementation.")},F.dictCount=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},F.ToString=function(e){return""+e},F.NumberToInt=function(e){return Math.floor(e)},F.NumberToUnsignedInt=function(e){return Math.abs(F.NumberToInt(e))},F.AsBoolean=function(e){return Boolean(e)},F.isValidString=function(e){return"string"==typeof e&&""!==e},F.stringStartsWith=function(e,t){return"string"==typeof e&&"string"==typeof t&&("function"==typeof e.indexOf&&0===e.indexOf(t))},F.isBoolean=function(e){return"boolean"==typeof e},F.UrlEncodeString=function(e){return escape(e)},F.isObject=function(e){return"object"==typeof e},F.ObjectToString=function(e){var t="";for(var n in e){var r=e[n],i=r;t+=n+"="+i}return"Object{"+t+"}"},F.ObjectShallowCopyOmitNull=function(e){var t=F.ObjectShallowCopy(e);for(var n in t)null==t[n]&&delete t[n];return t},F.ObjectShallowCopy=function(e){var t={};for(var n in e)t[n]=e[n];return t},F.ObjectShallowEquals=function(e,t){if(typeof e!=typeof t)return!1;if(e instanceof Object&&t instanceof Object){if(F.dictCount(e)!==F.dictCount(t))return!1;var n=!0;for(var r in e)if(n=e[r]===t[r],!n)return!1;return!0}return e===t},F.mergeObjects=function(){for(var e={},t=0;t<arguments.length;t++)for(var n in arguments[t])void 0!=arguments[t][n]&&null!=arguments[t][n]&&(e[n]=arguments[t][n]);return e},F.isInteger=function(e){if("number"!=typeof e)return!1;var t=Math.round(e);return t===e},F.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},F.ArrayEquals=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(F.isArray(e[n])&&F.isArray(t[n])){if(!F.ArrayEquals(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0},F.isObjectDefinePropertyPresent=function(){return"undefined"!=typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()},F.defGet=function(e,t,n){if(F.isObjectDefinePropertyPresent())Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:n});else{if("undefined"==typeof e.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");e.__defineGetter__(t,n)}},F.defSet=function(e,t,n){if(F.isObjectDefinePropertyPresent())Object.defineProperty(e,t,{configurable:!0,set:n});else{if("undefined"==typeof e.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");e.__defineSetter__(t,n)}},F.sha256=function j(e){function t(e,t){return e>>>t|e<<32-t}for(var n,r,i=Math.pow,a=i(2,32),o="length",s="",l=[],_=8*e[o],c=j.h=j.h||[],u=j.k=j.k||[],d=u[o],E={},g=2;64>d;g++)if(!E[g]){for(n=0;313>n;n+=g)E[n]=g;c[d]=i(g,.5)*a|0,u[d++]=i(g,1/3)*a|0}for(e+="\0";e[o]%64-56;)e+="\0";for(n=0;n<e[o];n++){if(r=e.charCodeAt(n),r>>8)return;l[n>>2]|=r<<(3-n)%4*8}for(l[l[o]]=_/a|0,l[l[o]]=_,r=0;r<l[o];){var S=l.slice(r,r+=16),h=c;for(c=c.slice(0,8),n=0;64>n;n++){var f=S[n-15],T=S[n-2],p=c[0],y=c[4],A=c[7]+(t(y,6)^t(y,11)^t(y,25))+(y&c[5]^~y&c[6])+u[n]+(S[n]=16>n?S[n]:S[n-16]+(t(f,7)^t(f,18)^f>>>3)+S[n-7]+(t(T,17)^t(T,19)^T>>>10)|0),I=(t(p,2)^t(p,13)^t(p,22))+(p&c[1]^p&c[2]^c[1]&c[2]);c=[A+I|0].concat(c),c[4]=c[4]+A|0}for(n=0;8>n;n++)c[n]=c[n]+h[n]|0}for(n=0;8>n;n++)for(r=3;r+1;r--){var v=c[n]>>8*r&255;s+=(16>v?0:"")+v.toString(16)}return s},function(){var e={};e.two32=4294967296,e.MaxValue=e.two32-1,e.MinValue=0,F.UInt32=e,F.UInt32.Cast=function(t){var n=parseInt(t,10);return n>e.MaxValue?n%=e.two32:n<e.MinValue&&(n=-n%e.two32,n=e.two32-n),n},F.UInt32.InRange=function(t){var n=parseInt(t,10);return n<=e.MaxValue&&n>=e.MinValue};var t={};t.MaxValue=2147483647,t.MinValue=-2147483648,F.Int32=t,F.Int32.Cast=function(e){var n=parseInt(e,10);return n>t.MaxValue?n%=t.MaxValue:n<t.MinValue&&(n=-n%t.MaxValue,n=t.MaxValue-n),n},F.Int32.InRange=function(e){var n=parseInt(e,10);return n<=t.MaxValue&&n>=t.MinValue}}();var w=t.LogBuffer=function(){var e=32;this._buffer=[],this.add=function(t){this._buffer.length>=e&&this._buffer.shift(),this._buffer.push(t)},this.flush=function(){var e=this._buffer;return this._buffer=[],e}},K=t.Ping=function(e,t,n){this._isSendingPing=!1,this._cachedBasePingUrl=null,this._logger=e,this._logger.setModuleName("Ping"),this._httpClient=t,this._clientSettings=n,this.send=function(e){if(!this._isSendingPing){this._isSendingPing=!0;var t=this.getBasePingUrl()+"&d="+F.UrlEncodeString(e.toString());this._logger.error("send(): "+t),this._httpClient.request("GET",t,null,null,null),this._isSendingPing=!1}},this.getBasePingUrl=function(){if(!this._cachedBasePingUrl){var e=K.SERVICE_URL+"?comp="+K.COMPONENT_NAME+"&clv="+r.version;if(this._clientSettings&&(e+="&cid="+this._clientSettings.customerKey),e+="&sch="+N.SDK_METADATA_SCHEMA,!this._clientSettings)return e;this._cachedBasePingUrl=e}return this._cachedBasePingUrl}};K.COMPONENT_NAME="sdkjs",K.SERVICE_URL="https://pings.conviva.com/ping.ping";var Y=t.Random={};Y.maxUInt32=4294967295,Y.maxInt32=2147483647,Y.minInt32=-2147483648,Y.integer32=function(){return Math.floor(Math.random()*Y.maxUInt32)+Y.minInt32},Y.uinteger32=function(){return Math.floor(Math.random()*Y.maxUInt32)};var k=t.Sanitize={};k.Integer=function(e,t,n,r){if(isNaN(e))return r;if("number"!=typeof e)return r;if(e==r)return r;var i=F.NumberToInt(e);return k.EnforceBoundaries(i,t,n)},k.EnforceBoundaries=function(e,t,n){return null!=n&&e>n?e=n:null!=t&&t>e&&(e=t),e},k.sanitizeSpecialIntegerValue=function(e){return-1==e||-2==e?e:e=k.Integer(e,0,null,-1)};var B=t.StreamerError=function(){function e(e,n){t.errorCode=e,t.severity=n}var t=this;t.errorCode=null,t.severity=r.ErrorSeverity.FATAL,e.apply(t,arguments),this.getErrorCode=function(){return t.errorCode},this.getErrorSeverity=function(){return t.severity}},Q=t.HttpClient=function(e,t,n,r){this._logger=e,this._logger.setModuleName("HttpClient"),this._httpInterface=t,this._callbackWithTimeout=n,this._systemSettings=r,this.request=function(e,t,n,r,i){var a=1e3*this._systemSettings.httpTimeout,o=null;null!=i&&(o=this._callbackWithTimeout.getWrapperCallback(i,a,"HTTP timeout")),this._logger.debug("request(): calling HttpInterface.makeRequest"),this._httpInterface.makeRequest(e,t,n,r,a,o)}},G=t.Logger=function(e,t,n,r,i){this._loggingInterface=e,this._timeInterface=t,this._settings=n,this._logBuffer=r,this._packageName=i,this.debug=function(e){this.log(e,s.LogLevel.DEBUG)},this.info=function(e){this.log(e,s.LogLevel.INFO)},this.warning=function(e){this.log(e,s.LogLevel.WARNING)},this.error=function(e){this.log(e,s.LogLevel.ERROR)},this.log=function(e,t){var n=this.formatMessage(e,t);this._logBuffer.add(n),this._settings.logLevel<=t&&this._loggingInterface.consoleLog(n,t)},this.prependModuleName=function(e){var t=e;return t="["+this._moduleName+"] "+t},this.prependPackageName=function(e){
var t=e;return t="["+this._packageName+"] "+t},this.prependConvivaNamespace=function(e){var t=e;return t="[Conviva] "+t},this.prependTime=function(e){var t=this._timeInterface.getEpochTimeMs(),n=(t/1e3).toFixed(3).toString();return"["+n+"] "+e},this.prependLogLevel=function(e,t){var n=G.getLogLevelString(t),r=e;return r="["+n+"] "+r},this.prependSessionId=function(e){var t=e;return null!=this._sessionId&&(t="sid="+this._sessionId+" "+t),t},this.setSessionId=function(e){this._sessionId=e},this.setModuleName=function(e){this._moduleName=e},this.formatMessage=function(e,t){return this.prependConvivaNamespace(this.prependTime(this.prependLogLevel(this.prependPackageName(this.prependModuleName(this.prependSessionId(e))),t)))}};G.getLogLevelString=function(e){var t;switch(e){case s.LogLevel.ERROR:t="ERROR";break;case s.LogLevel.WARNING:t="WARNING";break;case s.LogLevel.INFO:t="INFO";break;case s.LogLevel.DEBUG:t="DEBUG"}return t};var H=t.Storage=function(e,t,n,r){this._logger=e,this._logger.setModuleName("Storage"),this._storageInterface=t,this._callbackWithTimeout=n,this._systemSettings=r,this.load=function(e,t){var n=this._callbackWithTimeout.getWrapperCallback(t,1e3*this._systemSettings.storageTimeout,"storage load timeout");this._logger.debug("load(): calling StorageInterface.loadData"),this._storageInterface.loadData(H.STORAGE_SPACE,e,n)},this.save=function(e,t,n){var r=this._callbackWithTimeout.getWrapperCallback(n,1e3*this._systemSettings.storageTimeout,"storage save timeout");this._logger.debug("save(): calling StorageInterface.saveData"),this._storageInterface.saveData(H.STORAGE_SPACE,e,t,r)}};H.STORAGE_SPACE="Conviva";var x=t.SystemMetadata=function(t,n,r){this._logger=t,this._logger.setModuleName("SystemMetadata"),this._metadataInterface=n,this._exceptionCatcher=r,this._cachedMetadata=null,this.get=function(){return this._cachedMetadata||this.retrieve(),this._cachedMetadata},this.retrieve=function(){function t(e,t){r._exceptionCatcher.runProtected("Session.getSystemMetadataSchema(): "+e,function(){var n=t[e];t[e]=n.call(r._metadataInterface)})}var n={};n[x.BROWSER_NAME]=this._metadataInterface.getBrowserName,n[x.BROWSER_VERSION]=this._metadataInterface.getBrowserVersion,n[x.DEVICE_BRAND]=this._metadataInterface.getDeviceBrand,n[x.DEVICE_MANUFACTURER]=this._metadataInterface.getDeviceManufacturer,n[x.DEVICE_MODEL]=this._metadataInterface.getDeviceModel,n[x.DEVICE_TYPE]=this._metadataInterface.getDeviceType,n[x.DEVICE_VERSION]=this._metadataInterface.getDeviceVersion,n[x.FRAMEWORK_NAME]=this._metadataInterface.getFrameworkName,n[x.FRAMEWORK_VERSION]=this._metadataInterface.getFrameworkVersion,n[x.OPERATING_SYSTEM_NAME]=this._metadataInterface.getOperatingSystemName,n[x.OPERATING_SYSTEM_VERSION]=this._metadataInterface.getOperatingSystemVersion,n[x.DEVICE_CATEGORY]=this._metadataInterface.getDeviceCategory;var r=this;this._logger.debug("retrieve(): calling MetadataInterface methods");for(var i in n)t(i,n),F.isValidString(n[i])||delete n[i];var a=!1;if("undefined"!=typeof n[x.DEVICE_TYPE]){for(var o in e.Client.DeviceType)if(n[x.DEVICE_TYPE]===e.Client.DeviceType[o]){a=!0;break}a||delete n[x.DEVICE_TYPE]}if(a=!1,"undefined"!=typeof n[x.DEVICE_CATEGORY]){for(var s in e.Client.DeviceCategory)if(n[x.DEVICE_CATEGORY]===e.Client.DeviceCategory[s]){a=!0;break}a||delete n[x.DEVICE_CATEGORY]}this._cachedMetadata=F.ObjectShallowCopyOmitNull(n)}};x.BROWSER_NAME="browserName",x.BROWSER_VERSION="browserVersion",x.DEVICE_BRAND="deviceBrand",x.DEVICE_MANUFACTURER="deviceManufacturer",x.DEVICE_MODEL="deviceModel",x.DEVICE_TYPE="deviceType",x.DEVICE_VERSION="deviceVersion",x.FRAMEWORK_NAME="frameworkName",x.FRAMEWORK_VERSION="frameworkVersion",x.OPERATING_SYSTEM_NAME="operatingSystemName",x.OPERATING_SYSTEM_VERSION="operatingSystemVersion",x.DEVICE_CATEGORY="deviceCategory";var W=t.Time=function(e,t){this._timeInterface=e,this._logger=t,this._logger.setModuleName("Time"),this.current=function(){var e=this._timeInterface.getEpochTimeMs();return F.isInteger(e)||this._logger.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+e+")"),e}},q=t.Timer=function(e,t,n){var r=this;this._logger=e,this._logger.setModuleName("Timer"),this._timerInterface=t,this._exceptionCatcher=n,this.create=function(e,t,n){var i=function(){r._exceptionCatcher.runProtected(n,function(){e()})},a=this.createTimer(i,t,n);return a},this.createOnce=function(e,t,n){var i={cancel:null},a=function(){r._exceptionCatcher.runProtected(n,function(){i&&"function"==typeof i.cancel&&(i.cancel(),i.cancel=null,i=null),e()})},o=this.createTimer(a,t,n);return i.cancel=o,o},this.createTimer=function(e,t,n){return this._logger.debug("createTimer(): calling TimerInterface.create"),this._timerInterface.createTimer(e,t,n)}}}()}(),e});
!function(e,t){if("function"==typeof define&&define.amd?define(t):"object"==typeof exports&&(module.exports=t()),void 0!==e)if(void 0===e.Conviva){if(void 0!==e.ConvivaModule)return;if(e.ConvivaModuleLoading)return;e.ConvivaModuleLoading=!0,e.ConvivaModule=t(),delete e.ConvivaModuleLoading}else{if(void 0!==e.Conviva.ProxyMonitor)return;if(e.ConvivaModuleLoading)return;var a=t();e.ConvivaModuleLoading=!0,e.Conviva.ProxyMonitor=a.ProxyMonitor,e.Conviva.Impl.Html5PlayerInterface=a.Impl.Html5PlayerInterface,e.Conviva.Impl.Html5Proxy=a.Impl.Html5Proxy,delete e.ConvivaModuleLoading}}(this,function(){var e={};return function(){"use strict";!function(){e.Impl=e.Impl||{};var t=e.Impl.Html5PlayerInterface=function(e,a,n){function i(e,a){if(this._log("Html5PlayerInterface._constr()"),!e)throw new Error("Html5PlayerInterface: playerStateManager argument cannot be null.");if(!a)throw new Error("Html5PlayerInterface: videoElement argument cannot be null.");this._playerStateManager=e,this._videoElement=a,this._eventListeners=[],this._registerVideoEventListeners(),this._resetPlayHeadTimes(),this._resetTimeupdate(),this._startPolling(),this._findCurrentState(),this._playerStateManager.setClientMeasureInterface(this),this._playerStateManager.setModuleNameAndVersion("HTML5",t.version),null!=this._systemFactory&&null!=this._systemFactory._metadataInterface&&null==this._systemFactory._metadataInterface.getFrameworkName()&&this._playerStateManager.setPlayerType("HTML5")}var r=this,o=500,l=4e3/o,s=2e3/o;r._lastPlayHeadTimeSpeeds=[],r._timeupdate=0,r._lastTimeupdate=0,r._currentTimeIsInvalid=!1,r._systemFactory=n,this._timerInterface=new Conviva.Impl.Html5Timer,this._loggingInterface=n.buildLogger(),this._loggingInterface.setModuleName("Html5PlayerInterface"),this._width=-1,this._height=-1,this._addEventListener=function(e,t,a){void 0===a&&(a=r._videoElement),r._eventListeners.push([e,t,a]),window.addEventListener?a.addEventListener(e,t,!1):a.attachEvent("on"+e,t)},this._removeEventListener=function(e,t,a){void 0===a&&(a=r._videoElement),window.removeEventListener?a.removeEventListener(e,t,!1):a.detachEvent("on"+e,t)},this._registerVideoEventListeners=function(){r._addEventListener("ended",function(){r._receivedHtml5Event("ended")}),r._addEventListener("pause",function(){r._receivedHtml5Event("pause")}),r._addEventListener("playing",function(){return 0==r._videoElement.currentTime?void(r._currentTimeIsInvalid=!0):r._videoElement.currentTime>0?void(r._currentTimeIsInvalid=!1):void 0}),r._addEventListener("waiting",function(){r._receivedHtml5Event("waiting")}),r._addEventListener("timeupdate",function(){r._currentTimeIsInvalid&&(r._timeupdate++,r._playerStateManager.getPlayerState()===Conviva.PlayerStateManager.PlayerState.PLAYING||r._videoElement.seeking||r._receivedHtml5Event("playing"))}),r._addEventListener("error",function(){if(r._videoElement.error){var e=r._videoElement.error.code;r._reportHtml5Error(e)}}),r._addEventListener("loadedmetadata",r._loadedMetadata),r._addEventListener("seeking",function(){r.isSeekStarted||(r.isSeekStarted=!0,r._playerStateManager.setPlayerSeekStart(-1)),r._currentTimeIsInvalid&&r._playerStateManager.getPlayerState()!==Conviva.PlayerStateManager.PlayerState.BUFFERING&&(r._log("Adjusting Conviva player state to: BUFFERING"),r._receivedHtml5Event("waiting"))}),r._addEventListener("seeked",function(){r.isSeekStarted=!1,r._playerStateManager.setPlayerSeekEnd()}),r._monitorErrorsFromSourceElements()},this.getPHT=function(){return 1e3*r._videoElement.currentTime},this.getBufferLength=function(){var e=r._videoElement.buffered;if(void 0!==e){for(var t=0,a=0;a<e.length;a++){var n=e.start(a),i=e.end(a);n<=r._videoElement.currentTime&&r._videoElement.currentTime<i&&(t+=i-r._videoElement.currentTime)}return r._currentBufferLength=t,1e3*r._currentBufferLength}},this.getSignalStrength=function(){return Conviva.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return Conviva.PlayerStateManager.DEFAULT_RENDERED_FRAME_RATE},this._monitorErrorsFromSourceElements=function(){if(void 0!==r._videoElement.children){var e=function(){r._log("Caught non-specific error from <source> element, reporting as ERR_UNKNOWN"),r._reportHtml5Error(0)};r._videoElement._sources=r._videoElement.children;for(var t=0;t<r._videoElement._sources.length;t++){var a=r._videoElement._sources[t];"SOURCE"==a.tagName&&r._addEventListener("error",e,a)}}},this._removeVideoEventHandlers=function(){for(var e=0;e<r._eventListeners.length;e++){var t=r._eventListeners[e];r._removeEventListener(t[0],t[1],t[2])}r._eventListeners=[]},this._findCurrentState=function(){r._prevReadyState=r._videoElement.readyState,0===r._videoElement.readyState?r._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED):r._videoElement.ended?r._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED):(r._videoElement.paused||r._videoElement.seeking)&&r._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED),r._videoElement.readyState>=r._videoElement.HAVE_METADATA&&r._loadedMetadata()},this._receivedHtml5Event=function(e){var t=r._convertHtml5EventToConvivaPlayerState(e);r._log("Received HTML5 event: "+e+". Mapped to Conviva player state: "+t),r._updateConvivaPlayerState(t)},this._updateConvivaPlayerState=function(e){r._playerStateManager.setPlayerState(e),r._resetPlayHeadTimes(),r._playerStateRecentlyChanged=!0},this._convertHtml5EventToConvivaPlayerState=function(e){switch(e){case"playing":return Conviva.PlayerStateManager.PlayerState.PLAYING;case"waiting":return Conviva.PlayerStateManager.PlayerState.BUFFERING;case"ended":case"stopped":return Conviva.PlayerStateManager.PlayerState.STOPPED;case"pause":return Conviva.PlayerStateManager.PlayerState.PAUSED;default:return Conviva.PlayerStateManager.PlayerState.UNKNOWN}},this._reportHtml5Error=function(e){var t;switch(e){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:t="MEDIA_ERR_UNKNOWN"}r._log("Reporting error: code="+e+" message="+t);var a=Conviva.Client.ErrorSeverity.FATAL;r._playerStateManager.sendError(t,a)},this._loadedMetadata=function(){var e=r._videoElement.duration;isNaN(e)||e==1/0||r._playerStateManager.setDuration(e);var t=r._videoElement.videoWidth;!isNaN(t)&&t>=0&&r._playerStateManager.setVideoResolutionWidth(t);var a=r._videoElement.videoHeight;!isNaN(a)&&a>=0&&r._playerStateManager.setVideoResolutionHeight(a)},this._startPolling=function(){this._previousPosition=0,this._currentPosition=0,this._currentBufferLength=0,this._pollingTimerCancel=this._timerInterface.createTimer(this._poll,500,"Html5PlayerInterface._poll()")},this._poll=function(){r._pollStreamerResolution(),r._pollPosition(),r._inferPlayerStateFromPosition()},this._pollStreamerResolution=function(){var e=r._videoElement.videoWidth;!isNaN(e)&&e>=0&&e!=r._width&&(r._playerStateManager.setVideoResolutionWidth(e),r._width=e);var t=r._videoElement.videoHeight;!isNaN(t)&&t>=0&&t!=r._height&&(r._playerStateManager.setVideoResolutionHeight(t),r._height=t)},this._pollPosition=function(){r._previousPosition=r._currentPosition,r._currentPosition=r._videoElement.currentTime;var e=Date.now();if(r._lastPollTime>0&&e>r._lastPollTime){var t=r._currentPosition-r._previousPosition;t<0&&(t=0);var a=t/(e-r._lastPollTime)*1e3;r._lastPlayHeadTimeSpeeds.push(a)}r._lastPollTime=e,r._lastPlayHeadTimeSpeeds.length>Math.max(l,s)&&r._lastPlayHeadTimeSpeeds.shift()},this._inferPlayerStateFromPosition=function(){var e=r._lastPlayHeadTimeSpeeds.length;if(e>=Math.min(s,l)){for(var t=0,a=r._lastPlayHeadTimeSpeeds.slice(),n=0;n<a.length;n++)t+=a[n];t/=e;var i=1,o=.25,v=r._videoElement.playbackRate;!isNaN(v)&&v!=1/0&&v>0&&(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0&&v<.5&&(v=.5),i*=v,o*=v);var d=r._playerStateManager.getPlayerState();if(d!=Conviva.PlayerStateManager.PlayerState.PLAYING&&e>=s&&Math.abs(t-i)<o)return r._log("Adjusting Conviva player state to: PLAYING"),void r._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);if(d==Conviva.PlayerStateManager.PlayerState.PLAYING&&e>=l&&0==t)return void(r._videoElement.paused?d!=Conviva.PlayerStateManager.PlayerState.PAUSED&&(r._log("Adjusting Conviva player state to: PAUSED"),r._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED)):r._videoElement.seeking||(r._log("Adjusting Conviva player state to: BUFFERING"),r._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING)));if(r._currentTimeIsInvalid)return void(r._videoElement.paused?(d!=Conviva.PlayerStateManager.PlayerState.PAUSED&&(r._log("Adjusting Conviva player state to: PAUSED"),r._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED)),r._timeupdate=r._lastTimeupdate):r._videoElement.seeking||(r._timeupdate>1&&r._timeupdate==r._lastTimeupdate&&(r._log("Adjusting Conviva player state to: BUFFERING"),r._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING)),r._lastTimeupdate=r._timeupdate))}},this._stopPolling=function(){this._pollingTimerCancel()},this._resetPlayHeadTimes=function(){r._lastPlayHeadTimeSpeeds=[],r._previousPosition=-1,r._lastPollTime=0},this._resetTimeupdate=function(){r._lastTimeupdate=0,r._timeupdate=0},this._log=function(e){this._loggingInterface.log(e,Conviva.SystemSettings.LogLevel.DEBUG)},i.apply(this,arguments),this.cleanup=function(){this._log("Html5PlayerInterface.cleanup()"),this._stopPolling(),this._removeVideoEventHandlers(),this._videoElement=null,this._playerStateManager=null}};t.version="2.151.0.37032",e.Impl=e.Impl||{};var a=e.Impl.Html5Proxy=function(e,t,n,i){function r(e,t,n){if(!e)throw new Error("Html5Proxy: videoElement argument cannot be null.");this._videoElement=e,this._videoAnalytics=n,this._loggingInterface=t.buildLogger(),this._loggingInterface.setModuleName("Html5Proxy"),this._log("Html5Proxy._constr()"),this._eventListeners=[],this._registerVideoEventListeners(),this._resetPlayHeadTimes(),this._resetTimeupdate(),this._startPolling(),this._findCurrentState();var r={};r[i.Constants.MODULE_NAME]="HTML5",r[i.Constants.MODULE_VERSION]=a.version,this._videoAnalytics.setContentInfo(r);var o={};o[i.Constants.FRAMEWORK_NAME]="HTML5",this._videoAnalytics.setPlayerInfo(o)}var o=this,l=500,s=4e3/l,v=2e3/l;o._lastPlayHeadTimeSpeeds=[],o._timeupdate=0,o._lastTimeupdate=0,o._currentTimeIsInvalid=!1,this._timerInterface=new i.Impl.Html5Timer,this._width=-1,this._height=-1,this._playerState=i.Constants.PlayerState.UNKNOWN,this._addEventListener=function(e,t,a){void 0===a&&(a=o._videoElement),o._eventListeners.push([e,t,a]),window.addEventListener?a.addEventListener(e,t,!1):a.attachEvent("on"+e,t)},this._removeEventListener=function(e,t,a){void 0===a&&(a=o._videoElement),window.removeEventListener?a.removeEventListener(e,t,!1):a.detachEvent("on"+e,t)},this._registerVideoEventListeners=function(){o._addEventListener("ended",function(){o._updateConvivaPlayerState(i.Constants.PlayerState.STOPPED)}),o._addEventListener("pause",function(){o._updateConvivaPlayerState(i.Constants.PlayerState.PAUSED)}),o._addEventListener("playing",function(){return 0==o._videoElement.currentTime?void(o._currentTimeIsInvalid=!0):o._videoElement.currentTime>0?void(o._currentTimeIsInvalid=!1):void 0}),o._addEventListener("waiting",function(){o._updateConvivaPlayerState(i.Constants.PlayerState.BUFFERING)}),o._addEventListener("timeupdate",function(){o._currentTimeIsInvalid&&(o._timeupdate++,o._playerState==i.Constants.PlayerState.PLAYING||o._videoElement.seeking||o._updateConvivaPlayerState(i.Constants.PlayerState.PLAYING))}),o._addEventListener("error",function(){if(null!=o._videoElement&&o._videoElement.error){var e="Error Message: "+o._videoElement.error.message+", Error Code: "+o._videoElement.error.code;o._videoAnalytics.reportPlaybackError(e,i.Constants.ErrorSeverity.FATAL)}}),o._addEventListener("loadedmetadata",function(){var e=o._videoElement.duration;if(!isNaN(e)&&e!=1/0){var t={};t[i.Constants.DURATION]=e,o._videoAnalytics.setContentInfo(t)}var a=o._videoElement.videoWidth,n=o._videoElement.videoHeight;(!isNaN(a)&&a>0||!isNaN(n)&&n>0)&&o._videoAnalytics.reportPlaybackMetric(i.Constants.Playback.RESOLUTION,a,n,"CONVIVA")}),o._addEventListener("seeking",function(){o.isSeekStarted||(o.isSeekStarted=!0,o._videoAnalytics.reportPlaybackMetric(i.Constants.Playback.SEEK_STARTED,"CONVIVA")),o._currentTimeIsInvalid&&o._playerState!=i.Constants.PlayerState.BUFFERING&&(o._log("Adjusting Conviva player state to: BUFFERING"),o._updateConvivaPlayerState(i.Constants.PlayerState.BUFFERING))}),o._addEventListener("seeked",function(){o.isSeekStarted=!1,o._videoAnalytics.reportPlaybackMetric(i.Constants.Playback.SEEK_ENDED,"CONVIVA")}),o._monitorErrorsFromSourceElements()},this.getBufferLength=function(){var e=o._videoElement.buffered;if(void 0!==e){for(var t=0,a=0;a<e.length;a++){var n=e.start(a),i=e.end(a);n<=o._videoElement.currentTime&&o._videoElement.currentTime<i&&(t+=i-o._videoElement.currentTime)}return o._currentBufferLength=t,1e3*o._currentBufferLength}},this._monitorErrorsFromSourceElements=function(){if(void 0!==o._videoElement.children){var e=function(){o._log("Caught non-specific error from <source> element, reporting as ERR_UNKNOWN"),o._reportHtml5Error(0)};o._videoElement._sources=o._videoElement.children;for(var t=0;t<o._videoElement._sources.length;t++){var a=o._videoElement._sources[t];"SOURCE"==a.tagName&&o._addEventListener("error",e,a)}}},this._removeVideoEventHandlers=function(){for(var e=0;e<o._eventListeners.length;e++){var t=o._eventListeners[e];o._removeEventListener(t[0],t[1],t[2])}o._eventListeners=[]},this._findCurrentState=function(){o._prevReadyState=o._videoElement.readyState,0===o._videoElement.readyState?o._updateConvivaPlayerState(i.Constants.PlayerState.STOPPED):o._videoElement.ended?o._updateConvivaPlayerState(i.Constants.PlayerState.STOPPED):(o._videoElement.paused||o._videoElement.seeking)&&o._updateConvivaPlayerState(i.Constants.PlayerState.PAUSED)},this._updateConvivaPlayerState=function(e){o._playerState=e,o._videoAnalytics.reportPlaybackMetric(i.Constants.Playback.PLAYER_STATE,o._playerState,"CONVIVA"),o._resetPlayHeadTimes(),o._playerStateRecentlyChanged=!0},this._reportHtml5Error=function(e){var t;switch(e){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:t="MEDIA_ERR_UNKNOWN"}o._log("Reporting error: code="+e+" message="+t);var a=i.Client.ErrorSeverity.FATAL;o._videoAnalytics.reportPlaybackError(t,a)},this._startPolling=function(){this._previousPosition=0,this._currentPosition=0,this._currentBufferLength=0,this._pollingTimerCancel=this._timerInterface.createTimer(this._poll,500,"Html5Proxy._poll()")},this._poll=function(){o._videoAnalytics.reportPlaybackMetric(i.Constants.Playback.PLAY_HEAD_TIME,1e3*o._videoElement.currentTime,"CONVIVA"),o._videoAnalytics.reportPlaybackMetric(i.Constants.Playback.BUFFER_LENGTH,o.getBufferLength(),"CONVIVA"),o._videoAnalytics.reportPlaybackMetric(i.Constants.Playback.RESOLUTION,o._videoElement.videoWidth,o._videoElement.videoHeight,"CONVIVA"),o._pollPosition(),o._inferPlayerStateFromPosition()},this._pollPosition=function(){o._previousPosition=o._currentPosition,o._currentPosition=o._videoElement.currentTime;var e=Date.now();if(o._lastPollTime>0&&e>o._lastPollTime){var t=o._currentPosition-o._previousPosition;t<0&&(t=0);var a=t/(e-o._lastPollTime)*1e3;o._lastPlayHeadTimeSpeeds.push(a)}o._lastPollTime=e,o._lastPlayHeadTimeSpeeds.length>Math.max(s,v)&&o._lastPlayHeadTimeSpeeds.shift()},this._inferPlayerStateFromPosition=function(){var e=o._lastPlayHeadTimeSpeeds.length;if(e>=Math.min(v,s)){for(var t=0,a=o._lastPlayHeadTimeSpeeds.slice(),n=0;n<a.length;n++)t+=a[n];t/=e;var r=1,l=.25,d=o._videoElement.playbackRate;if(!isNaN(d)&&d!=1/0&&d>0&&(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0&&d<.5&&(d=.5),r*=d,l*=d),o._playerState!=i.Constants.PlayerState.PLAYING&&e>=v&&Math.abs(t-r)<l)return o._log("Adjusting Conviva player state to: PLAYING"),void o._updateConvivaPlayerState(i.Constants.PlayerState.PLAYING);if(o._playerState==i.Constants.PlayerState.PLAYING&&e>=s&&0==t)return void(o._videoElement.paused?o._playerState!=i.Constants.PlayerState.PAUSED&&(o._log("Adjusting Conviva player state to: PAUSED"),o._updateConvivaPlayerState(i.Constants.PlayerState.PAUSED)):o._videoElement.seeking||(o._log("Adjusting Conviva player state to: BUFFERING"),o._updateConvivaPlayerState(i.Constants.PlayerState.BUFFERING)));if(o._currentTimeIsInvalid)return void(o._videoElement.paused?(o._playerState!=i.Constants.PlayerState.PAUSED&&(o._log("Adjusting Conviva player state to: PAUSED"),o._updateConvivaPlayerState(i.Constants.PlayerState.PAUSED)),o._timeupdate=o._lastTimeupdate):o._videoElement.seeking||(o._timeupdate>1&&o._timeupdate==o._lastTimeupdate&&(o._log("Adjusting Conviva player state to: BUFFERING"),o._updateConvivaPlayerState(i.Constants.PlayerState.BUFFERING)),o._lastTimeupdate=o._timeupdate))}},this._stopPolling=function(){null!=this._pollingTimerCancel&&this._pollingTimerCancel()},this._resetPlayHeadTimes=function(){o._lastPlayHeadTimeSpeeds=[],o._previousPosition=-1,o._lastPollTime=0},this._resetTimeupdate=function(){o._lastTimeupdate=0,o._timeupdate=0},this._log=function(e){this._loggingInterface.log(e,i.SystemSettings.LogLevel.DEBUG)},r.apply(this,arguments),this.cleanup=function(){this._log("Html5Proxy.cleanup()"),this._stopPolling(),this._removeVideoEventHandlers(),this._videoElement=null}};a.version="4.0.4",e.ProxyMonitor={_proxyMonitor:null,release:function(){null!=this._proxyMonitor&&this._proxyMonitor.cleanup()},initConvivaDropIn:function(t,a,n,i){var r="No player proxy initialized";if(null!==t&&t instanceof HTMLVideoElement)return this._proxyMonitor=new e.Impl.Html5Proxy(t,a,n,i),this._proxyMonitor;throw new Error(r)}}}()}(),e});
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){return function t(e,n,o){function r(c,a){if(!n[c]){if(!e[c]){var s="function"==typeof require&&require;if(!a&&s)return s(c,!0);if(i)return i(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[c]={exports:{}};e[c][0].call(l.exports,function(t){var n=e[c][1][t];return r(n?n:t)},l,l.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(t,e,n){var o=t("matches-selector");e.exports=function(t,e,n){for(var r=n?t:t.parentNode;r&&r!==document;){if(o(r,e))return r;r=r.parentNode}}},{"matches-selector":2}],2:[function(t,e,n){function o(t,e){if(i)return i.call(t,e);for(var n=t.parentNode.querySelectorAll(e),o=0;o<n.length;++o)if(n[o]==t)return!0;return!1}var r=Element.prototype,i=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;e.exports=o},{}],3:[function(t,e,n){function o(t,e,n,o){var i=r.apply(this,arguments);return t.addEventListener(n,i),{destroy:function(){t.removeEventListener(n,i)}}}function r(t,e,n,o){return function(n){n.delegateTarget=i(n.target,e,!0),n.delegateTarget&&o.call(t,n)}}var i=t("closest");e.exports=o},{closest:1}],4:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n["function"]=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},{}],5:[function(t,e,n){function o(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!a.string(e))throw new TypeError("Second argument must be a String");if(!a["function"](n))throw new TypeError("Third argument must be a Function");if(a.node(t))return r(t,e,n);if(a.nodeList(t))return i(t,e,n);if(a.string(t))return c(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function i(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function c(t,e,n){return s(document.body,t,e,n)}var a=t("./is"),s=t("delegate");e.exports=o},{"./is":4,delegate:3}],6:[function(t,e,n){function o(t){var e;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName)t.focus(),t.setSelectionRange(0,t.value.length),e=t.value;else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),o=document.createRange();o.selectNodeContents(t),n.removeAllRanges(),n.addRange(o),e=n.toString()}return e}e.exports=o},{}],7:[function(t,e,n){function o(){}o.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){r.off(t,o),e.apply(n,arguments)}var r=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;for(o;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,c=o.length;i<c;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}},e.exports=o},{}],8:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=t("select"),a=o(c),s=function(){function t(e){r(this,t),this.resolveOptions(e),this.initSelection()}return t.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""},t.prototype.initSelection=function(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},t.prototype.selectFake=function(){var t=this;this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return t.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=a["default"](this.fakeElem),this.copyText()},t.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},t.prototype.selectTarget=function(){this.selectedText=a["default"](this.target),this.copyText()},t.prototype.copyText=function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)},t.prototype.handleResult=function(t){t?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},t.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},t.prototype.destroy=function(){this.removeFake()},i(t,[{key:"action",set:function(){var t=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!=typeof t||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');this._target=t}},get:function(){return this._target}}]),t}();n["default"]=s,e.exports=n["default"]},{select:6}],9:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}n.__esModule=!0;var a=t("./clipboard-action"),s=o(a),u=t("tiny-emitter"),l=o(u),f=t("good-listener"),d=o(f),h=function(t){function e(n,o){r(this,e),t.call(this),this.resolveOptions(o),this.listenClick(n)}return i(e,t),e.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText},e.prototype.listenClick=function(t){var e=this;this.listener=d["default"](t,"click",function(t){return e.onClick(t)})},e.prototype.onClick=function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s["default"]({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})},e.prototype.defaultAction=function(t){return c("action",t)},e.prototype.defaultTarget=function(t){var e=c("target",t);if(e)return document.querySelector(e)},e.prototype.defaultText=function(t){return c("text",t)},e.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},e}(l["default"]);n["default"]=h,e.exports=n["default"]},{"./clipboard-action":8,"good-listener":5,"tiny-emitter":7}]},{},[9])(9)});
function RumTracking(e){"use strict";function n(e){f(),q=e,q.enabled=q.enabled!==!1,q.enabled&&(q["beacon-url"]=q["beacon-url"]||"/lite/rum-track",q["beacon-service"]=q["beacon-service"]||"lite",q["event-name"]=q["event-name"]||"RealUserMonitoringEvent",q["topic-name"]=q["topic-name"]||"RealUserMonitoringEvent",q["app-id"]=q["app-id"]||"linkedin.rum.tracking",q["is-single-page-app"]=q["is-single-page-app"]!==!1,q["cross-origin"]=q["cross-origin"]||!1,q["beacon-timeout"]=void 0===q["beacon-timeout"]?6e4:q["beacon-timeout"],q["request-sampling-rate"]=q["request-sampling-rate"]||.01,q["user-timing-mark-enabled"]=q["user-timing-mark-enabled"]||!1,q["user-timing-measure-enabled"]=q["user-timing-measure-enabled"]!==!1,q["beacon-source"]&&"internal-apps"===q["beacon-source"]&&(A=!0,q["page-key-prefix"]=q["page-key-prefix"]||""),q["navigation-timing-only"]=q["navigation-timing-only"]||!1,q["navigation-timing-only"]?(q["enable-rs-timing"]=q["enable-rs-timing"]||!1,q["enable-rs-timing"]&&r(),"complete"==document.readyState?setTimeout(u,500):window.addEventListener("load",function(){setTimeout(u,500)})):(q["enable-rs-timing"]=q["enable-rs-timing"]!==!1,r(),window.addEventListener("unload",u),window.addEventListener("scroll",function(){if(!E)try{E=T(),h=w()}catch(e){}})))}function r(){var e={"default":.001,xmlhttprequest:1};if(null!==q["rs-sample-rate"]&&"object"==typeof q["rs-sample-rate"])for(var n in q["rs-sample-rate"])q["rs-sample-rate"].hasOwnProperty(n)&&(e[n]=q["rs-sample-rate"][n]);q["rs-sample-rate"]=e,K.resourceTimingSupport===!0&&(K.readResourceTiming(),K.setBufferSize(100),null===window.performance.onresourcetimingbufferfull?window.performance.onresourcetimingbufferfull=K.readResourceTiming:null===window.performance.onwebkitresourcetimingbufferfull&&(window.performance.onwebkitresourcetimingbufferfull=K.readResourceTiming)),k=document.createElement("a"),M=document.createElement("a")}function t(){var e=document.querySelector('meta[name="treeID"]');return e&&e.getAttribute("content")}function i(){var e=document.querySelector('meta[name="pageKey"]');return e?e.getAttribute("content"):document.body.id?document.body.id.substring("pagekey-".length):""}function o(){var e,n=document.querySelector('meta[name="renderingMode"]');return n&&(e=n.getAttribute("data-mode"),"BIGPIPE"===e&&(e="BIG_PIPE")),e}function a(){var e,n,r;if(!I){if(window.performance&&window.performance.timing&&window.performance.navigation){for(S.navigationTimingApi=!0,e=window.performance.timing,_=e.navigationStart,n=0;n<H.length;n++)r=H[n],e[r]&&(S[r]=e[r]);S.redirectCount=window.performance.navigation.redirectCount,S.navigationType=window.performance.navigation.type}else S.navigationTimingApi=!1;I=!0}}function c(){window.performance&&(window.performance.clearMarks&&window.performance.clearMarks(),window.performance.clearMeasures&&window.performance.clearMeasures())}function m(e,n){var r,t,i,o=[];for(t=0;t<e.length;t++)r=e[t],r&&(i={},i.entryType=n,i.name=r.name,i.startTime=r.startTime,i.duration=r.duration,o.push(i));return o}function s(){var e,n=[];window.performance&&"function"==typeof window.performance.getEntriesByType&&(q["user-timing-measure-enabled"]&&(e=window.performance.getEntriesByType("measure"),n=n.concat(m(e,"MEASURE"))),q["user-timing-mark-enabled"]&&(e=window.performance.getEntriesByType("mark"),n=n.concat(m(e,"MARK")))),S.userTimingEntries=n,c()}function d(){var e;if(Object.keys(b).length>0){S.detailedRenderTimingEntries=[];for(var n in b)b.hasOwnProperty(n)&&S.detailedRenderTimingEntries.push(b[n])}if(K.readResourceTiming(),S.resourceTimingEntries)for(e=S.resourceTimingEntries.length-1;e>=0;e--)S.resourceTimingEntries[e].name&&(S.resourceTimingEntries[e].name=S.resourceTimingEntries[e].name.split(/[?#]/)[0]);a(),s()}function u(){var e,n,r,a;if(q.enabled&&(d(),"navigationStart"in S&&P&&(q["beacon-source"]&&(S.timeSource=q["beacon-source"]),a=t(),a&&(S.treeId=a),!S.hasOwnProperty("pageKey")&&B&&(S.pageKey=i()),S.pageKey))){if(S.boomerangStart=_,S.isSinglePageApp=q["is-single-page-app"],S.isSinglePageApp)if(q["web-ui-framework"]&&(S.webUIFramework=q["web-ui-framework"]),S.appRenderMode=o(),B?(S.pageLoadMode="INITIAL",y()&&(S.isAppRenderFailed=!0)):S.pageLoadMode="PARTIAL","renderCompleteTime"in S)S.timeDone=w();else if(!q["navigation-timing-only"])return;A&&!document.querySelector('meta[name="pageKey"]')&&(S.pageKey=q["page-key-prefix"]+":"+window.location.pathname);try{"lite"==q["beacon-service"]?(n=JSON.stringify(S),q["cross-origin"]?(r=document.body.appendChild(new Image),r.width=1,r.height=1,r.src=q["beacon-url"]+"?ir=t&dy=t&plist="+encodeURIComponent(n)):(e=new XMLHttpRequest,e.open("POST",q["beacon-url"],!0),e.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e.setRequestHeader("X-IsAJAXForm","1"),e.send("plist="+encodeURIComponent(n)))):p(S)}catch(c){}f()}}function p(e){var n,r={eventInfo:{eventName:q["event-name"],topicName:q["topic-name"],appId:q["app-id"]},eventBody:e};r.eventBody.requestHeader={pageKey:e.pageKey},r.eventBody.trackingTime=-1,n=new XMLHttpRequest,n.open("POST",q["beacon-url"],!0),n.setRequestHeader("content-type","application/json"),n.send(JSON.stringify([r]))}function f(){S={},v=[],O=[],b={},h=void 0,E=void 0,R=Math.random(),P=!0,C&&(clearTimeout(C),C=void 0)}function g(e){var n,r,t=document.querySelectorAll("img"),i=[];for(r=t.length-1;r>=0;r--)n=t[r],n&&n.src&&n.src.length>0&&i.push(n);return i}function l(e){var n,r=e.getBoundingClientRect();return n={top:Math.max(r.top,0),left:Math.max(r.left,0),bottom:Math.min(r.bottom,window.innerHeight||doc.documentElement.clientHeight),right:Math.min(r.right,window.innerWidth||doc.documentElement.clientWidth)},!(n.bottom<=n.top||n.right<=n.left)}function w(){var e,n,r,t;if(h)return h;if(a(),h=S.renderCompleteTime-S.navigationStart,O)for(r=O.length-1;r>=0;r--)if(n=O[r])for(t=v.length-1;t>=0;t--)if(e=v[t],n.src===e.name){if(E&&_&&e.startTime>E-_)break;if(n.width*n.height<=1)break;l(n)&&(h=Math.max(h,_+e.responseEnd-S.navigationStart));break}return h}function T(){return window.performance&&window.performance.timing&&"function"==typeof window.performance.now?Math.round(window.performance.now())+window.performance.timing.navigationStart:(new Date).getTime()}function y(){return null!=document.querySelector("code#renderError")}var S,b,v,h,E,R,k,M,B=!0,I=!1,A=!1,_=window.HEAD_LOAD_TIMESTAMP||void 0,q={},C=void 0,L=0,O=[],P=!0,H=["loadEventEnd","loadEventStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","responseEnd","responseStart","requestStart","secureConnectionStart","connectEnd","connectStart","domainLookupEnd","domainLookupStart","fetchStart","redirectEnd","redirectStart","unloadEventEnd","unloadEventStart","navigationStart"],K={resourceTimingSupport:window.performance&&"function"==typeof window.performance.getEntriesByType,clearBuffer:function(){K.resourceTimingSupport===!0&&q["enable-rs-timing"]&&(window.performance.clearResourceTimings&&"function"==typeof window.performance.clearResourceTimings?window.performance.clearResourceTimings():window.performance.webkitClearResourceTimings&&"function"==typeof window.performance.webkitClearResourceTimings&&window.performance.webkitClearResourceTimings())},setBufferSize:function(e){K.resourceTimingSupport===!0&&q["enable-rs-timing"]&&(window.performance.setResourceTimingBufferSize&&"function"==typeof window.performance.setResourceTimingBufferSize?window.performance.setResourceTimingBufferSize(e):window.performance.webkitSetResourceTimingBufferSize&&"function"==typeof window.performance.webkitSetResourceTimingBufferSize&&window.performance.webkitSetResourceTimingBufferSize(e))},resourceTimingFields:{name:!0,entryType:!1,duration:!0,initiatorType:!0,fetchStart:!0,responseEnd:!0,startTime:!0,connectEnd:!0,connectStart:!0,domainLookupEnd:!0,domainLookupStart:!0,redirectEnd:!0,redirectStart:!0,requestStart:!0,responseStart:!0,secureConnectionStart:!0,nextHopProtocol:!0,transferSize:!0,decodedBodySize:!0,encodedBodySize:!0,workerStart:!0},readResourceTiming:function(){var e,n,r,t,i,o,a="rand",c=!1,m=S.resourceTimingEntries||[];if(K.resourceTimingSupport===!0&&q["enable-rs-timing"]){for(e=window.performance.getEntriesByType("resource"),n=0;n<e.length;n++){t={};for(r in e[n])K.resourceTimingFields[r]===!0&&(t[r]=e[n][r]);"img"===t.initiatorType&&v.push(t),i=Math.random(),o=q["rs-sample-rate"][e[n].initiatorType]||q["rs-sample-rate"]["default"],c=R<=q["request-sampling-rate"],(c||i<=o)&&(m.push(t),t.sampleMode="",c&&(t.sampleMode="requestSampled,"),i<=o&&(t.sampleMode+=a+o.toString()))}K.clearBuffer(),m.length>0&&(S.resourceTimingEntries=m)}}};return n(e),{setPageKey:function(e){S.pageKey=e},addTreeId:function(e,n){var r;if(k&&M&&(k.href=n,K.readResourceTiming(),S.resourceTimingEntries))for(r=S.resourceTimingEntries.length-1;r>=0;r--)if(M.href=S.resourceTimingEntries[r].name,k.protocol===M.protocol&&k.host===M.host&&k.pathname===M.pathname&&(k.search===M.search||""===k.search)){S.resourceTimingEntries[r].resourceTreeId=e;break}},appTransitionStart:function(e){(e||L>0)&&(u(),f(),S.navigationStart=T(),B=!1)},appRenderComplete:function(){L++,S.renderCompleteTime=T(),O=g(),C||(C=setTimeout(u,q["beacon-timeout"]))},appViewRenderStart:function(e,n){b[e]={renderName:n||e,viewName:n,viewId:e,renderStart:T()}},appViewRenderComplete:function(e,n){b[e]&&(b[e].renderEnd=T())},setDeepLinkTrackingId:function(e){P=!1},setWindowHiddenState:function(e){S.isImpactedByHiddenWindow=e},customMarkNames:{UI_FRAMEWORK_BOOTSTRAP_START:"mark_ui_framework_bootstrap_start",UI_FRAMEWORK_BOOTSTRAP_END:"mark_ui_framework_bootstrap_end",ABOVE_THE_FOLD:"mark_above_the_fold"}}}
var picturePolyfill=function(t){"use strict";var e,r,i,n=100,a=!1;return{_getAttrs:function(t,e){for(var r,i,n={},a=0,s=e.length;a<s;a+=1)r=e[a],i=t.getAttribute(r),i&&(n[r]=i);return n},_getAttrsList:function(t){for(var e=[],r=0,i=t.attributes,n=i.length;r<n;r++)e.push(i.item(r).nodeName);return e},_getSrcsetArray:function(t){var e,r,i,n,a=[];if(null===t||""===t||"undefined"==typeof t)return a;n=t.split(",");for(var s=0,u=n.length;s<u;s+=1)e=n[s].trim().split(" "),i=1===e.length?1:parseFloat(e[e.length-1],10),r=e[0],a.push({pxr:i,src:r});return a.sort(function(t,e){var r=t.pxr,i=e.pxr;return r<i?-1:r>i?1:0})},_getSrcFromSrcset:function(t,e){var r,i,n=0,a=-1;if(null===t||""===t||"undefined"==typeof t)return"";r=this._getSrcsetArray(t),i=r.length;do(r[n].pxr>=e||n===i-1)&&(a=n),n+=1;while(!(a>-1||n>=i));return r[a].src},_getSrcsetFromData:function(e){for(var r,i,n,a,s=0,u=e.length;s<u;s+=1)if(r=e[s],i=r.media,a=r.srcset,n=r.src,!i||t.matchMedia(i).matches)return a?a:n?n:"";return""},_getImgTagsInPicture:function(t){var e,r=t;if(e=t.getElementsByTagName("img"),e.length>0)return e;do if(r=r.nextSibling,null===r)return[];while("IMG"!==r.tagName);return[r]},_setImgAttributes:function(t,e){function r(t,e,r){t.getAttribute(e)!==r&&t.setAttribute(e,r)}var i,n,a,s,u,c=this._getImgTagsInPicture(t);return 0!==c.length&&(i=c[0],i.getAttribute("data-original-src")||(r(i,"data-original-src",i.getAttribute("src")),r(i,"data-original-srcset",i.getAttribute("srcset"))),n=e.src,a=e.srcset,n||a?(s=n,u=a):(s=i.getAttribute("data-original-src"),u=i.getAttribute("data-original-srcset")),r(i,"src",s),void r(i,"srcset",u))},_getSourcesData:function(t){for(var e,r,i=[],n=t.getElementsByTagName("source"),a=0,s=n.length;a<s;a+=1)e=n[a],r=this._getAttrs(e,this._getAttrsList(e)),i.push(r);return i},_addListeners:function(){function e(){picturePolyfill.parse(document)}function r(){clearTimeout(i),i=setTimeout(e,n)}return!(!this.isUseful||a)&&(t.addEventListener?(t.addEventListener("resize",r),t.addEventListener("DOMContentLoaded",function(){e(),t.removeEventListener("load",e)}),t.addEventListener("load",e)):t.attachEvent&&(t.attachEvent("onload",e),t.attachEvent("onresize",r)),void(a=!0))},initialize:function(){this._pxRatio=t.devicePixelRatio||1,this._mqSupport=!!t.matchMedia&&null!==t.matchMedia("only all")&&t.matchMedia("only all").matches,this.isUseful=!t.HTMLPictureElement,e=[],r=0,this._addListeners()},parse:function(t,i){var n,a,s,u,c,l,o;if(!this.isUseful)return 0;"undefined"==typeof i&&(i=!0),s=(t||document).getElementsByTagName("picture"),l=this._mqSupport;for(var g=0,d=s.length;g<d;g+=1)n=null,a=s[g],i&&(o=a.getAttribute("data-cache-index"),null!==o&&(n=e[o])),n||(n=this._getSourcesData(a),e[r]=n,a.setAttribute("data-cache-index",r),r+=1),l&&0!==n.length?(c=this._getSrcsetFromData(n),u=this._getSrcFromSrcset(c,this._pxRatio)):(u=a.getAttribute("data-default-src"),c=a.getAttribute("data-default-srcset")),this._setImgAttributes(a,{src:u,srcset:c,alt:a.getAttribute("data-alt")});return g}}}(window);picturePolyfill.initialize(),picturePolyfill.parse();
!function(e,t){function i(){e.removeEventListener("load",i,!1),r=!0}function n(e){return l=l||new n.Class(e)}function o(e,t){for(var i in t)e[i]=t[i];return e}function s(){"#ath"==t.location.hash&&history.replaceState("",e.document.title,t.location.href.split("#")[0]),d.test(t.location.href)&&history.replaceState("",e.document.title,t.location.href.replace(d,"$1")),h.test(t.location.search)&&history.replaceState("",e.document.title,t.location.href.replace(h,"$2"))}var a="addEventListener"in e,r=!1;"complete"===t.readyState?r=!0:a&&e.addEventListener("load",i,!1);var l,d=/\/ath(\/)?$/,h=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/;n.intl={de_de:{ios:"Um diese Web-App zum Home-Bildschirm hinzuzufgen, tippen Sie auf %icon und dann <strong>Zum Home-Bildschirm</strong>.",android:"Um diese Web-App zum Home-Bildschirm hinzuzufgen, ffnen Sie das Men und tippen dann auf <strong>Zum Startbildschirm hinzufgen</strong>. <small>Wenn Ihr Gert eine Mentaste hat, lsst sich das Browsermen ber diese ffnen. Ansonsten tippen Sie auf %icon.</small>"},da_dk:{ios:"For at tilfje denne web app til hjemmeskrmen: Tryk %icon og derefter <strong>Fj til hjemmeskrm</strong>.",android:"For at tilfje denne web app til hjemmeskrmen, bn browser egenskaber menuen og tryk p <strong>Fj til hjemmeskrm</strong>. <small>Denne menu kan tilgs ved at trykke p menu knappen, hvis din enhed har en, eller ved at trykke p det verste hjre menu ikon %icon.</small>"},en_us:{ios:"To add this web app to the home screen: tap %icon and then <strong>Add to Home Screen</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},es_es:{ios:"Para aadir esta aplicacin web a la pantalla de inicio: pulsa %icon y selecciona <strong>Aadir a pantalla de inicio</strong>.",android:"Para aadir esta aplicacin web a la pantalla de inicio, abre las opciones y pulsa <strong>Aadir a pantalla inicio</strong>. <small>El men se puede acceder pulsando el botn tctil en caso de tenerlo, o bien el icono de la parte superior derecha de la pantalla %icon.</small>"},fi_fi:{ios:"Liit tm sovellus kotivalikkoon: klikkaa %icon ja tmn jlkeen <strong>Lis kotivalikkoon</strong>.",android:"Listksesi tmn sovelluksen aloitusnytlle, avaa selaimen valikko ja klikkaa thti -ikonia tai <strong>Lis aloitusnytlle teksti</strong>. <small>Valikkoon psee mys painamalla menuvalikkoa, jos laitteessasi on sellainen tai koskettamalla oikealla ylkulmassa menu ikonia %icon.</small>"},fr_fr:{ios:"Pour ajouter cette application web sur l'cran d'accueil : Appuyez %icon et slectionnez <strong>Ajouter sur l'cran d'accueil</strong>.",android:'Pour ajouter cette application web sur l\'cran d\'accueil : Appuyez sur le bouton "menu", puis sur <strong>Ajouter sur l\'cran d\'accueil</strong>. <small>Le menu peut-tre accessible en appuyant sur le bouton "menu" du tlphone s\'il en possde un <i class="fa fa-bars"></i>. Sinon, il se trouve probablement dans la coin suprieur droit du navigateur %icon.</small>'},he_il:{ios:'<span dir="rtl">   :   %icon  <strong>  </strong>.</span>',android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},hu_hu:{ios:"Ha hozz szeretn adni ezt az alkalmazst a kezdkpernyjhez, rintse meg a kvetkez ikont: %icon , majd a <strong>Hozzads a kezdkpernyhz</strong> menpontot.",android:"Ha hozz szeretn adni ezt az alkalmazst a kezdkpernyjhez, a bngsz menjben kattintson a <strong>Hozzads a kezdkpernyhz</strong> menpontra. <small>A bngsz menjt a kvetkez ikon megrintsvel tudja megnyitni: %icon.</small>"},it_it:{ios:"Per aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>Aggiungi a Home</strong>.",android:"Per aggiungere questa web app alla schermata iniziale, apri il menu opzioni del browser e premi su <strong>Aggiungi alla homescreen</strong>. <small>Puoi accedere al menu premendo il pulsante hardware delle opzioni se la tua device ne ha uno, oppure premendo l'icona %icon in alto a destra.</small>"},ja_jp:{ios:"%icon<strong></strong>",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ko_kr:{ios:"   : %icon    <strong>  </strong>.",android:"   <string>  </string>      . <small>          %icon    .</small>"},nb_no:{ios:"For  installere denne appen p hjem-skjermen: trykk p %icon og deretter <strong>Legg til p Hjem-skjerm</strong>.",android:"For  legge til denne webappen p startsiden pner en nettlesermenyen og velger <strong>Legg til p startsiden</strong>. <small>Menyen pnes ved  trykke p den fysiske menyknappen hvis enheten har det, eller ved  trykke p menyikonet verst til hyre %icon.</small>"},pt_br:{ios:"Para adicionar este app  tela de incio: clique %icon e ento <strong>Tela de incio</strong>.",android:'Para adicionar este app  tela de incio, abra o menu de opes do navegador e selecione <strong>Adicionar  tela inicial</strong>. <small>O menu pode ser acessado pressionando o "menu" button se o seu dispositivo tiver um, ou selecionando o cone %icon no canto superior direito.</small>'},pt_pt:{ios:"Para adicionar esta app ao ecr principal: clique %icon e depois <strong>Ecr principal</strong>.",android:'Para adicionar esta app web ecr principal, abra o menu de opes do navegador e selecione <strong>Adicionar  tela inicial</strong>. <small>O menu pode ser acessado pressionando o "menu" button se o seu dispositivo tiver um, ou selecionando o cone %icon no canto superior direito.</small>'},nl_nl:{ios:"Om deze webapp aan je startscherm toe te voegen, klik op %icon en dan <strong>Zet in startscherm</strong>.",android:'Om deze webapp aan je startscherm toe te voegen, open de browserinstellingen en tik op <strong>Toevoegen aan startscherm</strong>. <small>Gebruik de "menu" knop als je telefoon die heeft, anders het menu-icoon rechtsbovenin %icon.</small>'},ru_ru:{ios:'       ,    %icon   <strong>  ""</strong>.',android:"      ,       <strong>   </strong>. <small>  ,      ,   .      %icon[].</small>"},sv_se:{ios:"Fr att lgga till denna webbapplikation p hemskrmen: tryck p %icon och drefter <strong>Lgg till p hemskrmen</strong>.",android:"Fr att lgga till den hr webbappen p hemskrmen ppnar du webblsarens alternativ-meny och vljer <strong>Lgg till p startskrmen</strong>. <small>Man hittar menyn genom att trycka p hrdvaruknappen om din enhet har en sdan, eller genom att trycka p menyikonen hgst upp till hger %icon.</small>"},tr_tr:{ios:"Uygulamay ana ekrana eklemek iin, %icon ve ardndan <strong>ana ekrana ekle</strong> butonunu tklayn.",android:"Uygulamay ana ekrana eklemek iin, menye girin ve <strong>ana ekrana ekle</strong> butonunu tklayn. <small>Cihaznz men tuuna sahip ise menye girmek iin men tuunu tklayn. Aksi takdirde %icon butonunu tklayn.</small>"},uk_ua:{ios:"      ,  %icon,   <strong>  </strong>.",android:"      ,      <strong>   </strong>. <small>  ,      ,   .       %icon.</small>"},zh_cn:{ios:",%icon, <strong></strong>",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},zh_tw:{ios:", %icon, <strong></strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"}};for(var p in n.intl)n.intl[p.substr(0,2)]=n.intl[p];n.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,logging:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:1,lifespan:15,displayPace:1440,maxDisplayCount:0,icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,privateModeOverride:!1,detectHomescreen:!1};var c=e.navigator.userAgent,m=e.navigator;o(n,{hasToken:"#ath"==t.location.hash||d.test(t.location.href)||h.test(t.location.search),isRetina:e.devicePixelRatio&&e.devicePixelRatio>1,isIDevice:/iphone|ipod|ipad/i.test(c),isMobileChrome:c.indexOf("Android")>-1&&/Chrome\/[.0-9]*/.test(c)&&c.indexOf("Version")==-1,isMobileIE:c.indexOf("Windows Phone")>-1,language:m.language&&m.language.toLowerCase().replace("-","_")||""}),n.language=n.language&&n.language in n.intl?n.language:"en_us",n.isMobileSafari=n.isIDevice&&c.indexOf("Safari")>-1&&c.indexOf("CriOS")<0,n.OS=n.isIDevice?"ios":n.isMobileChrome?"android":n.isMobileIE?"windows":"unsupported",n.OSVersion=c.match(/(OS|Android) (\d+[_\.]\d+)/),n.OSVersion=n.OSVersion&&n.OSVersion[2]?+n.OSVersion[2].replace("_","."):0,n.isStandalone="standalone"in e.navigator&&e.navigator.standalone,n.isTablet=n.isMobileSafari&&c.indexOf("iPad")>-1||n.isMobileChrome&&c.indexOf("Mobile")<0,n.isCompatible=n.isMobileSafari&&n.OSVersion>=6||n.isMobileChrome;var u={lastDisplayTime:0,returningVisitor:!1,displayCount:0,optedout:!1,added:!1};n.removeSession=function(e){try{if(!localStorage)throw new Error("localStorage is not defined");localStorage.removeItem(e||n.defaults.appID)}catch(t){}},n.doLog=function(e){this.options.logging&&console.log(e)},n.Class=function(i){if(this.doLog=n.doLog,this.options=o({},n.defaults),o(this.options,i),i&&i.debug&&"undefined"==typeof i.logging&&(this.options.logging=!0),a){if(this.options.mandatory=this.options.mandatory&&("standalone"in e.navigator||this.options.debug),this.options.modal=this.options.modal||this.options.mandatory,this.options.mandatory&&(this.options.startDelay=-.5),this.options.detectHomescreen=this.options.detectHomescreen===!0?"hash":this.options.detectHomescreen,this.options.debug&&(n.isCompatible=!0,n.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==n.OS?"android":n.OS,n.OSVersion="ios"==n.OS?"8":"4"),this.container=t.documentElement,this.session=this.getItem(this.options.appID),this.session=this.session?JSON.parse(this.session):void 0,!n.hasToken||n.isCompatible&&this.session||(n.hasToken=!1,s()),!n.isCompatible)return void this.doLog("Add to homescreen: not displaying callout because device not supported");this.session=this.session||u;try{if(!localStorage)throw new Error("localStorage is not defined");localStorage.setItem(this.options.appID,JSON.stringify(this.session)),n.hasLocalStorage=!0}catch(r){n.hasLocalStorage=!1,this.options.onPrivate&&this.options.onPrivate.call(this)}for(var l=!this.options.validLocation.length,d=this.options.validLocation.length;d--;)if(this.options.validLocation[d].test(t.location.href)){l=!0;break}if(this.getItem("addToHome")&&this.optOut(),this.session.optedout)return void this.doLog("Add to homescreen: not displaying callout because user opted out");if(this.session.added)return void this.doLog("Add to homescreen: not displaying callout because already added to the homescreen");if(!l)return void this.doLog("Add to homescreen: not displaying callout because not a valid location");if(n.isStandalone)return this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&n.hasLocalStorage&&this.options.onAdd.call(this)),void this.doLog("Add to homescreen: not displaying callout because in standalone mode");if(this.options.detectHomescreen){if(n.hasToken)return s(),this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&n.hasLocalStorage&&this.options.onAdd.call(this)),void this.doLog("Add to homescreen: not displaying callout because URL has token, so we are likely coming from homescreen");"hash"==this.options.detectHomescreen?history.replaceState("",e.document.title,t.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?history.replaceState("",e.document.title,t.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",e.document.title,t.location.href+(t.location.search?"&":"?")+"ath=")}if(!this.session.returningVisitor&&(this.session.returningVisitor=!0,this.updateSession(),this.options.skipFirstVisit))return void this.doLog("Add to homescreen: not displaying callout because skipping first visit");if(!this.options.privateModeOverride&&!n.hasLocalStorage)return void this.doLog("Add to homescreen: not displaying callout because browser is in private mode");this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&(this.doLog("Add to homescreen: autostart displaying callout"),this.show())}},n.Class.prototype={events:{load:"_delayedShow",error:"_delayedShow",orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(e){var t=this.events[e.type];t&&this[t](e)},show:function(i){if(this.options.autostart&&!r)return void setTimeout(this.show.bind(this),50);if(this.shown)return void this.doLog("Add to homescreen: not displaying callout because already shown on screen");var o=Date.now(),s=this.session.lastDisplayTime;if(i!==!0){if(!this.ready)return void this.doLog("Add to homescreen: not displaying callout because not ready");if(o-s<6e4*this.options.displayPace)return void this.doLog("Add to homescreen: not displaying callout because displayed recently");if(this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount)return void this.doLog("Add to homescreen: not displaying callout because displayed too many times already")}this.shown=!0,this.session.lastDisplayTime=o,this.session.displayCount++,this.updateSession(),this.applicationIcon||("ios"==n.OS?this.applicationIcon=t.querySelector('head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]'):this.applicationIcon=t.querySelector('head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]'));var a="";"object"==typeof this.options.message&&n.language in this.options.message?a=this.options.message[n.language][n.OS]:"object"==typeof this.options.message&&n.OS in this.options.message?a=this.options.message[n.OS]:this.options.message in n.intl?a=n.intl[this.options.message][n.OS]:""!==this.options.message?a=this.options.message:n.OS in n.intl[n.language]&&(a=n.intl[n.language][n.OS]),a="<p>"+a.replace(/%icon(?:\[([^\]]+)\])?/gi,function(e,t){return'<span class="ath-action-icon">'+(t?t:"icon")+"</span>"}),this.viewport=t.createElement("div"),this.viewport.className="ath-viewport",this.options.modal&&(this.viewport.className+=" ath-modal"),this.options.mandatory&&(this.viewport.className+=" ath-mandatory"),this.viewport.style.position="absolute",this.element=t.createElement("div"),this.element.className="ath-container ath-"+n.OS+" ath-"+n.OS+(n.OSVersion+"").substr(0,1)+" ath-"+(n.isTablet?"tablet":"phone"),this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;",this.element.style.webkitTransform="translate3d(0,-"+e.innerHeight+"px,0)",this.element.style.transform="translate3d(0,-"+e.innerHeight+"px,0)",this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=t.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img)),this.element.innerHTML+=a,this.viewport.style.left="-99999em",this.viewport.appendChild(this.element),this.container.appendChild(this.viewport),this.img?this.doLog("Add to homescreen: not displaying callout because waiting for img to load"):this._delayedShow()},_delayedShow:function(e){setTimeout(this._show.bind(this),1e3*this.options.startDelay+500)},_show:function(){var i=this;this.updateViewport(),e.addEventListener("resize",this,!1),e.addEventListener("scroll",this,!1),e.addEventListener("orientationchange",this,!1),this.options.modal&&t.addEventListener("touchmove",this,!0),this.options.mandatory||setTimeout(function(){i.element.addEventListener("click",i,!0)},1e3),setTimeout(function(){i.element.style.webkitTransitionDuration="1.2s",i.element.style.transitionDuration="1.2s",i.element.style.webkitTransform="translate3d(0,0,0)",i.element.style.transform="translate3d(0,0,0)"},0),this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1e3*this.options.lifespan)),this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer),this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1)),e.removeEventListener("resize",this,!1),e.removeEventListener("scroll",this,!1),e.removeEventListener("orientationchange",this,!1),t.removeEventListener("touchmove",this,!0),this.element.removeEventListener("click",this,!0),this.element.addEventListener("transitionend",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("MSTransitionEnd",this,!1),this.element.style.webkitTransitionDuration="0.3s",this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1),this.element.removeEventListener("webkitTransitionEnd",this,!1),this.element.removeEventListener("MSTransitionEnd",this,!1),this.container.removeChild(this.viewport),this.shown=!1,this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=e.innerWidth+"px",this.viewport.style.height=e.innerHeight+"px",this.viewport.style.left=e.scrollX+"px",this.viewport.style.top=e.scrollY+"px";var i=t.documentElement.clientWidth;this.orientation=i>t.documentElement.clientHeight?"landscape":"portrait";var o="ios"==n.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>i?1:o/e.innerWidth,this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){n.hasLocalStorage!==!1&&localStorage&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=u,this.updateSession()},getItem:function(e){try{if(!localStorage)throw new Error("localStorage is not defined");return localStorage.getItem(e)}catch(t){n.hasLocalStorage=!1}},optOut:function(){this.session.optedout=!0,this.updateSession()},optIn:function(){this.session.optedout=!1,this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0,this.updateSession()},_preventDefault:function(e){e.preventDefault(),e.stopPropagation()}},e.addToHomescreen=n}(window,document);